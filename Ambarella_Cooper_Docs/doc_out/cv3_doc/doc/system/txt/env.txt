           ENVIRONMENT PARTITION
===========================================

Copyright (C) 2018-2048, Ambarella, Inc.
Author: Cao Rongrong <rrcao@ambarella.com>

===========================================



I - Introduction
----------------

Environment partition is to store environment variables used by Amboot. By default,
the environment partition is named as "env", but users can rename it to other name
by defining PART_ENV in bsp.h.

Note:
  a) Environment partition must work together with flexible firmware layout.
  b) Environment partition is not must have. If environment partition is absent,
     Amboot will use the default enviroment variables that built in with Amboot,
     and the new value of any enviroment variable will be lost at next boot.
  c) If the environment partition is present, but its content is empty, Amboot will
     save the default environment variables into the environment partition.



II - Environment Variables
--------------------------

The contents of environment partition are organized as devicetree, so a DTS file
is necessary to be provided.

Amboot provides a default DTS file to describe the environment variables recognized
by Amboot, i.e., amboot/src/bld/default.env.

If users want to use their own env DTS file, they can put it under bsp directory, and
name it as $(BSP_BOARD_VER).env or $(BSP_BOARD).env
Note:
  $(BSP_BOARD_VER).env has higher priority than $(BSP_BOARD).env

Currently below environment variables are supported by Amboot, and their values can
be changed by "setenv" command. Users can add their own environment variables, but
they need to implement the codes to parse and use their own environment variables
by themselves.


1) auto_boot [BOOL]

If "auto_boot" is present, Linux Kernel will be booted automatically, otherwise
Amboot will stand by and wait for command input.


2) serial_num [STRING]

It's used to store the serial number of the board/production.


3) bootcmd [STRING]

If "bootcmd" is not empty, Amboot will execute the commands stored in "bootcmd"
before booting to Kernel. Users can specify multiple commands in "bootcmd", and
each commands are seperated by semicolon.


4) netdev_eth0/netdev_eth1 [NODE]

These nodes define the ethernet device information like MAC address, Mask, Gateway
and IP address. Please see default.env for reference.
PS:
  There are also netdev_wifi0 and netdev_usb0 nodes supported, they are similar to
  netdev_eth0, but normally not used.


5) tftpd [NODE]

This node defines the information for TFTP server and files to transfer. Please see
default.env for reference.


6) kernel_meta [NODE]

This node defines the information for Linux Kernel image, and it contains below two
properties.

a) partition [STRING]
   Amboot will load Kernel from the partition specified by this property.

b) binary_id [HEX]
   The Kernel image may contain more than one binary, Amboot will load the proper
   binary according to this property.

Note:
  If "kernel_meta" is absent, Amboot will load the Kernel from the default kernel
  partition, i.e., "kernel" partition.


7) dtb_meta [NODE]

This node is similary to "kernel_meta" node, but it's for DTB.

8) ramdisk_meta [NODE]

This node is similary to "kernel_meta" node, but it's for Ramdisk.

9) rootfs_meta [NODE]

This node is similary to "kernel_meta" node, but it's for Rootfs.

10) bootargs [STRING]

If "bootargs" is not empty, Amboot will update the 'bootargs' of dtb with the command
stored in "bootargs" before booting to Kernel.

