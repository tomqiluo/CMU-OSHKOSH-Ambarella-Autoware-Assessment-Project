<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.3"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>System: BASE - Lychee OS</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript" src="../../navtreedata.js"></script>
<script type="text/javascript" src="../../navtree.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/search.js"></script>
<link rel="search" href="../../search_opensearch.php?v=opensearch.xml" type="application/opensearchdescription+xml" title="System"/>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
<link href="../../doxygen-awesome.css" rel="stylesheet" type="text/css"/>
<link href="../../doxygen-awesome-sidebar-only.css" rel="stylesheet" type="text/css"/>
<link href="../../doxygen-ambarella.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="../../Ambarella.png"/></td>
  <td id="projectalign">
   <div id="projectname">System<span id="projectnumber">&#160;Cooper_1.6.0 (CV72 &amp; CV3) @ 2024.07.10 14:12:44</span>
   </div>
   <div id="projectbrief">placeholder</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.3 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "../../search",'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('../../',true,true,'search.html','Search');
  $(document).ready(function() {
    if ($('.searchresults').length > 0) { searchBox.DOMSearchField().focus(); }
  });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('dc/da7/page_sysdoc_lychee_os.html','../../'); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<div><div class="header">
  <div class="headertitle"><div class="title">BASE - Lychee OS </div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h1><a class="anchor" id="multi_cluster_doc_history"></a>
0. Revision History</h1>
<a class="anchor" id="lycheeos-history"></a>
<table class="doxtable">
<caption>Lychee OS History.</caption>
<tr>
<th>System Version</th><th>Updated Date</th><th align="left">Modification </th></tr>
<tr>
<td>202312a</td><td>20231226 </td><td>Initial Version </td></tr>
</table>
<h1><a class="anchor" id="lychee_os_intro"></a>
1. Lychee OS Introduction</h1>
<h2><a class="anchor" id="lychee_os_what_is_lycheeos"></a>
1.1 What is LycheeOS</h2>
<p >Lychee operating system (OS) is built on the Fedora desktop system and it is a specialized Linux distribution tailored for Ambarella system on chip (SoC), featuring Cortex® A76 / A78 architecture and optimized for high performance. Built upon the foundation of Fedora, Lychee OS leverages Fedora's extensive software repository, utilizing it as the primary open-source software (OSS) source. The distribution employs customized compile options specifically designed for the Cortex A76 / A78AE architecture of Ambarella SoC. Lychee OS is compatible with CV5, CV72, and CV3, with the added advantage of graphics processing unit (GPU) acceleration for the graphical user interface (GUI) on CV3.</p>
<div class="image">
<object type="image/svg+xml" data="../../am_lychee_os_logo.svg" width="400px" style="pointer-events: none;"></object>
<div class="caption">
Figure 1-1 LycheeOS Logo.</div></div>
<h2><a class="anchor" id="lychee_os_deploy_and_develop_in_one_box"></a>
1.2 Deploy and Develop in One Box</h2>
<p >Lychee OS incorporates a comprehensive set of development tools, encompassing GCC, Clang, LLVM, RUST, Golang, BCC, Perl, Python, Lua, and Java. As a natively compiled system, it is proficient in generating full-feature OSS while being optimized for both feature richness and code size reduction. The distribution uses Red Hat Packet Manager (RPM) package management, ensuring explicit package dependency checks for enhanced reliability.</p>
<p >What's more, Lychee OS supports a variety of popular open source middleware of multimedia, autonomous-driving and robotics, such as GStreamer, Apollo CyberRT, and ROS2.</p>
<p >Users can easily install, utilize and develop these open source modules with Lychee OS.</p>
<div class="image">
<img src="../../am_lychee_os_show_ros2.jpg" alt="" width="800px"/>
<div class="caption">
Figure 1-2. Render Point Cloud with Rviz2 in LycheeOS Desktop.</div></div>
<div class="image">
<img src="../../am_lychee_os_show_gst.jpg" alt="" width="800px"/>
<div class="caption">
Figure 1-3. NN Inference with GStreamer in LycheeOS Desktop.</div></div>
<h2><a class="anchor" id="lychee_os_native_compile_amba_private_drivers_and_app"></a>
1.3 Native Compile Ambarella private Drivers and Application</h2>
<dl class="section user"><dt>Quicker</dt><dd>Reduce compile time, improve work efficiency, connect the user's keyboard and mouse, compile drivers and applications on Ambarella CV3 / CV72 with Lychee.</dd></dl>
<dl class="section user"><dt>Easier</dt><dd>Get just what you need and compile exactly what you need, just design a brick, but not build a full house from scratch.</dd></dl>
<dl class="section user"><dt>More Standard</dt><dd>Drivers and applications can work with different hardware (HW) configurations and it is no need to recompile for HW changes. Similar to a standard PC or smartphone application, compile it and drop, it will work!</dd></dl>
<div class="image">
<img src="../../am_lychee_os_desktop.png" alt="" width="800px"/>
<div class="caption">
Figure 1-4. LycheeOS Desktop.</div></div>
<hr  />
<h1><a class="anchor" id="lychee_os_install_lycheeos_on_cv3"></a>
2. Install Lychee OS on CV3</h1>
<h2><a class="anchor" id="lychee_os_burn_uboot"></a>
2.1 Flash Uboot</h2>
<dl class="section user"><dt>Preparation</dt><dd><ol type="1">
<li>Connect "USB Console", "AmbaUSB" and "microcontroller unit (MCU)" port with USB cable to the PC.<br  />
</li>
<li>Install AmbaUSB application with the version at least 5.0.7 to the PC.<br  />
</li>
<li>Prepare an secure digital (SD) card with at least 64G. It is recommended to use a 128G SD card, but the maximum size cannot exceed 256G.</li>
<li>Select the required version of Uboot. At present, there are mainly three kinds of Uboot:<ul>
<li>2808-MHz clock / 32-GB memory<br  />
</li>
<li>3192-MHz clock / 32-GB memory<br  />
</li>
<li>3192-MHz clock / 64-GB memory<br  />
</li>
</ul>
</li>
<li>Select the requred version of Lychee OS.</li>
</ol>
</dd></dl>
<dl class="section note"><dt>Note</dt><dd>Please contact the Ambarella support team to obtain the Uboot and Lychee OS.</dd></dl>
<dl class="section user"><dt>Flash Uboot Steps:</dt><dd><ol type="1">
<li>Click "USB Console" and "MCU" serial consoles.<br  />
 There are two important and different consoles:<br  />
 <b>MCU Console</b>: input sequence to control the CV3 Dk_mini (power on /power off / change to USB download mode)<br  />
 <b>USB Console</b>: print and display the log<br  />
</li>
<li>Click the <b>MCU Console</b> and then enter the <b>'p'</b> command to power on the CV3 Dk_mini. <div class="fragment"><div class="line"><span class="preprocessor">### MCU Console</span></div>
<div class="line">&gt; p</div>
</div><!-- fragment --></li>
<li>Open the <b>MCU Console</b> and then enter the <b>'u'</b> command to change the status of MCU to download. <div class="fragment"><div class="line"><span class="preprocessor">### MCU Console</span></div>
<div class="line">&gt; u</div>
</div><!-- fragment --></li>
<li>Download Uboot<ul>
<li>Open the <b>AmbaUSB</b> application.</li>
<li>Select <b>CV3</b> in the chip selection box.</li>
<li>Click <b>Find</b> button to find prepared Uboot file, such as 'uboot-cooper-sdk-2808MHz.elf'.</li>
<li>Click <b>Download</b> button.</li>
</ul>
</li>
<li>Wait for the download to complete, and view the flash information in the console to determine if the flashing was successful.</li>
<li>After flashing Uboot, enter 'p' in "MCU Console" to power off the device.</li>
</ol>
</dd></dl>
<h2><a class="anchor" id="lychee_os_install_lychee_to_sd_card"></a>
2.2 Install Lychee OS to an SD Card</h2>
<p >There are two methods for installing Lychee OS. One method is to automatically run an installation sricpt to automatically install Lychee OS and the other is to manually install it. Ambarella recommends the automatic installation method as it is convenient and fast. If users require more advanced configurations, such as customizing the SD storage space, it is recommended to use the manual installation method.</p>
<dl class="section note"><dt>Note</dt><dd>Both methods only support desktop Linux systems.</dd></dl>
<p><br  />
 </p><dl class="section user"><dt>Perpare the Tools Required for Installation</dt><dd><ol type="1">
<li><b>gparted:</b> This is disk partitioning tool, and it is used to partition the SD card</li>
<li><b>lsblk:</b> This is a Linux tool used to list information about block devices in the system</li>
<li><b>losetup:</b> This is a Linux tool for setting up and controlling loopback devices</li>
<li><b>rsync:</b> This is a fast and flexible tool for synchronizing files and directories <br  />
</li>
</ol>
</dd></dl>
<p>If these tools are not installed, execute the corresponding installation command below according to the user's Linux system. </p><div class="fragment"><div class="line"><span class="preprocessor">### Example for Fedora</span></div>
<div class="line">build$ sudo dnf update</div>
<div class="line">build$ sudo dnf install</div>
<div class="line">build$ sudo dnf install util-linux gparted rsync</div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">### Example for Ubuntu</span></div>
<div class="line">build$ sudo apt-get update</div>
<div class="line">build$ sudo apt-get install util-linux gparted rsync</div>
</div><!-- fragment --><p ><br  />
 </p><dl class="section user"><dt>Automatical Installation (Recommended)</dt><dd></dd></dl>
<p>Insert the SD card into the desktop Linux PC and then run <code>Install_Lychee_Raw_Disk_Image_v4.4.1.sh</code> on desktop Linux PC.<br  />
 </p><div class="fragment"><div class="line">sudo ./Install_Lychee_Raw_Disk_Image_v4.4.1.sh --image=xxx.raw.xz --media=/dev/sdx</div>
</div><!-- fragment --><p> If the installation is successful, the following print information will display: </p><div class="fragment"><div class="line">=====================================================</div>
<div class="line">Successfully umount sd* and loop*</div>
<div class="line">=====================================================</div>
</div><!-- fragment --><p ><br  />
 </p><dl class="section user"><dt>Manual Installation</dt><dd><ol type="1">
<li>Insert the SD card users' prepared into your desktop Linux PC</li>
<li>Make partitions to this SD card<ul>
<li>Run <code>sudo gparted</code> command to open the application <br  />
</li>
<li>Delete the original paritions of this SD card <br  />
</li>
<li>Create a new "GPT" partition table <br  />
</li>
<li>Create the 1st partition (boot partition), change the size to 1 GB (1024 MB), file system type "ext4" (MUST), change the partition label to <code>lychee.boot</code> (MUST) <br  />
</li>
<li>Create the 2nd partition (root partition), change the size to 60 GB (61440 MB), file system type "btrfs" (MUST), Change the partition label to <code>lychee.root</code> (MUST) <br  />
</li>
<li>Create the 3rd partition (home partition), change the size to 50 GB (51200 MB), file system type "btrfs" (MUST), change the partition label to <code>lychee.home</code> (MUST) <br  />
</li>
</ul>
</li>
<li>Confirm that the partitions <code>lychee.root</code> and <code>lychee.boot</code> already exist <div class="fragment"><div class="line">build$ lsblk -f</div>
<div class="line">build$ NAME     FSTYPE   FSVER LABEL     UUID       FSAVAIL FSUSE% MOUNTPOINTS</div>
<div class="line">build$ sda</div>
<div class="line">build$  ├─sda1      ext4     1.0   lychee.boot aae28d63-3d1d-4208-8c79-378400980373</div>
<div class="line">build$  └─sda2      btrfs          lychee.root 26985f95-4078-4a5b-8eda-d112b1d1a0b6</div>
<div class="line">build$ ...</div>
</div><!-- fragment --></li>
<li>Mount the <code>boot</code> and <code>root</code> partitions on the SD card <div class="fragment"><div class="line">build$ sudo mkdir /run/media/lychee.boot</div>
<div class="line">build$ sudo mkdir /run/media/lychee.root</div>
<div class="line">build$ sudo mount /dev/sda1 /run/media/lychee.boot</div>
<div class="line">build$ sudo mount /dev/sda2 /run/media/lychee.root</div>
</div><!-- fragment --></li>
<li>Make the loopback device of Lychee OS with <code>losetup</code> tool <div class="fragment"><div class="line"><span class="preprocessor">### Select the lychee OS raw file under the current file</span></div>
<div class="line">build$ sudo losetup -P --show --find ./lychee_cv3_cooper_20230719.raw</div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">### Check if the following devices are in the /dev directory.</span></div>
<div class="line"><span class="preprocessor">### if they are, then it is sucessful.</span></div>
<div class="line">build$ ls /dev/dev/loop0p*</div>
<div class="line">build$ /dev/loop0p1     <span class="comment">//this is boot</span></div>
<div class="line">build$ /dev/loop0p2     <span class="comment">//this is root</span></div>
</div><!-- fragment --></li>
<li>Copy boot data to boot partition in the SD card <div class="fragment"><div class="line">build$ sudo mount -t <span class="keyword">auto</span> /dev/loop0p1 /mnt</div>
<div class="line">build$ pushd /mnt</div>
<div class="line">build$ sudo rsync -Hav . /run/media/lychee.boot/</div>
<div class="line">build$ popd</div>
<div class="line">build$ sudo umount /mnt</div>
</div><!-- fragment --></li>
<li>Copy root data to root partition in the SD card <div class="fragment"><div class="line">build$ sudo mount -t <span class="keyword">auto</span> /dev/loop0p2 /mnt</div>
<div class="line">build$ pushd /mnt</div>
<div class="line">build$ sudo rsync -Hav . /run/media/lychee.root/</div>
<div class="line">build$ popd</div>
<div class="line">build$ sudo umount /mnt</div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">### Add the following line into fstab</span></div>
<div class="line">build$ sudo vim /run/media/lychee.root/etc/fstab</div>
<div class="line">LABEL=lychee.home /home btrfs defaults 0 0</div>
<div class="line"><span class="preprocessor">### save and quit</span></div>
</div><!-- fragment --></li>
<li>Uninstall loopback devices <div class="fragment"><div class="line">build$ sudo losetup -D</div>
</div><!-- fragment --></li>
<li>Umount <code>lychee.root</code> and <code>lychee.boot</code> <div class="fragment"><div class="line">build$ sudo umount  /run/media/lychee.boot</div>
<div class="line">build$ sudo umount  /run/media/lychee.root</div>
<div class="line">build$ sudo rm /run/media/lychee.boot -rf</div>
<div class="line">build$ sudo rm /run/media/lychee.root -rf</div>
</div><!-- fragment --></li>
</ol>
</dd></dl>
<h2><a class="anchor" id="lychee_os_install_lychee_the_first_boot_lychee_os"></a>
2.3 The First Boot Lychee OS</h2>
<ol type="1">
<li>Insert the SD card into the <code>CV3 Dk_mini</code></li>
<li>Connect CV3 board to a monitor with full HD resolution (1920x1080), using high definition multimedia interface (HDMI®) cable</li>
<li>Connect eth0 with an Ethernet cable to a router with internet access (IMPORTANT)</li>
<li>Connect the keyboard and mouse to CV3 USB port (MUST for the first time boot to do the initial setup)</li>
<li>Input 'p' in "MCU Console" to power on the device, then wait for the "initial setup GUI" to show up in the monitor</li>
<li>Set up <b>Time Zone</b> in the GUI program</li>
<li>Set up <b>Host Name</b></li>
<li>Set up <b>Root User</b>, in the GUI program, choose <b>Enable root</b></li>
<li>Set up <b>User Account</b>, in the GUI program, in <b>advanced</b> section, add the user to <b>wheel,root,disk,dialout,video,sys,admin</b> group</li>
<li>Press <b>Finish</b> in the GUI program</li>
</ol>
<dl class="section note"><dt>Note</dt><dd>After pressing the <b>Finish</b> button, wait approximately 5 minutes as the system is running <code>selinux-autorelabel.service</code>.</dd></dl>
<p><br  />
 </p><dl class="section user"><dt>User Group Explaination</dt><dd><a class="anchor" id="lycheeos-history"></a>
<table class="doxtable">
<caption>Table 2-1. User Group Explaination.</caption>
<tr>
<th>Group</th><th>Explaination</th><th align="left"></th></tr>
<tr>
<td><b>wheel</b> </td><td>Users in wheel group will be granted to run commands that are only allowed for root </td></tr>
<tr>
<td><b>root</b> </td><td>Users in root group will be granted to access files in root group </td></tr>
<tr>
<td><b>disk</b> </td><td>Users in disk group will be granted to access device node in disk group, for example <code>/dev/sdX /dev/mmcblkXXX</code>, and more. </td></tr>
<tr>
<td><b>dialout</b> </td><td>Users in dialout group will be granted to access the serial device, for example <code>/dev/ttySX</code>, <code>/dev/ttyUSBX</code> </td></tr>
<tr>
<td><b>video</b> </td><td>Users in video group will be granted to access the video device, for example <code>/dev/dri/cardX</code>, <code>/dev/fbX</code>, and <code>/dev/video/XXX</code> </td></tr>
<tr>
<td><b>sys</b> </td><td>Users in sys group will be granted to access <code>/sys</code> file system </td></tr>
<tr>
<td><b>admin</b> </td><td>Users in admin group will be granted to access system administrator's tools </td></tr>
</table>
</dd></dl>
<hr  />
<h1><a class="anchor" id="lychee_os_the_first_login_settings"></a>
3. Login Settings</h1>
<dl class="section user"><dt>1. Set Up MAC Address</dt><dd><ul>
<li>Set proper "MAC" address for users' network device <div class="fragment"><div class="line">Lychee$ nm-connection-editor</div>
</div><!-- fragment --></li>
<li>Select the network card that needs to be connected to the internet, and click the <b>Settings</b> button in the lower left corner.</li>
<li>Select <b>random</b> in the cloned MAC address column in the Ethernet page.</li>
<li>Save and quit.</li>
</ul>
</dd></dl>
<p><br  />
 </p><dl class="section user"><dt>2. Config System Time</dt><dd><ul>
<li>Configure to maintain the RTC in universal time, and synchronize the RTC from the system clock. <div class="fragment"><div class="line">Lychee$ sudo timedatectl  set-local-rtc 0</div>
</div><!-- fragment --></li>
</ul>
</dd></dl>
<p><br  />
 </p><dl class="section user"><dt>3. Update the System</dt><dd><ul>
<li>Run the command to upgrade the user's system to the latest. And in the future, if Lychee OS has a newer release, users do not require to go through this process again to re-install, just need to install Lychee OS repo file and run the command. <div class="fragment"><div class="line">lychee$ sudo dnf update --refresh</div>
</div><!-- fragment --> </li>
</ul>
</dd></dl>
<dl class="section note"><dt>Note</dt><dd><ul>
<li>Users should consider this Lychee OS as a complete desktop Linux, and use normal user account to login and work.<br  />
</li>
<li>Uboot only supports boot partition with ext4 file system type, this is probably enhanced in the newer Uboot version.<br  />
</li>
<li>The default system language is English, which can be changed after logging into Linux desktop.</li>
</ul>
</dd></dl>
<p><br  />
 </p><dl class="section user"><dt>4. (Optional) Enable Dual-VOUT</dt><dd><ul>
<li><p class="startli">Check if the default DTB supports dual-VOUT: <br  />
 </p><div class="fragment"><div class="line">Lychee$ vim /boot/extlinux/extlinux.conf</div>
</div><!-- fragment --><p> The content may be as shown below, note the default label for boot:</p>
<div class="fragment"><div class="line">1  <span class="keywordflow">default</span> Ambarella-cv3-5.15.141-300-dual-vout</div>
<div class="line">2</div>
<div class="line">3  timeout 50</div>
<div class="line">4</div>
<div class="line">5  label Ambarella-cv3-5.15.141-300-dual-vout</div>
<div class="line">6  kernel <span class="comment">//vmlinuz-5.15.141-300.lch2023.aarch64</span></div>
<div class="line">7  fdt <span class="comment">//dtb-5.15.141-300.lch2023.aarch64/ambarella/ambarella-cv3-gpu-dual-vout.dtb</span></div>
<div class="line">8  append earlycon console=ttyS0 arm64.nopauth root=/dev/mmcblk0p2 rootwait rw rootfstype=btrfs init=/sbin/init pci=nomsi,pcie_bus_perf pcie_pme=nomsi fw_devlink=permissive rhgb</div>
<div class="line">......</div>
</div><!-- fragment --><p class="startli">If the default DTB name (<code>ambarella-cv3-gpu-dual-vout.dtb</code> in line 7 above for example) includes <b>dual-VOUT</b>, it means dual-VOUT is supported.</p>
<p class="startli">Or users should change default DTB to one that supports dual-VOUT:</p>
<div class="fragment"><div class="line">Lychee$  cd /boot/dtb-5.15.141-300.lch2023.aarch64/ambarella/  # step 1, the path after /boot is defined in line 7 above</div>
<div class="line">Lychee$  ls *dual-vout*.dtb                                    # step 2, check usable dtb</div>
<div class="line">Lychee$  ambarella-cv3-gpu-4K-llava-dual-vout.dtb  ambarella-cv3-gpu-dual-vout.dtb</div>
<div class="line">Lychee$  sudo vim /boot/extlinux/extlinux.conf                 # step 3</div>
</div><!-- fragment --></li>
<li><p class="startli">Or modify dtb to support feature (Advanced): </p><div class="fragment"><div class="line">Lychee$ sudo dtc -I dtb -O dts ambarella-cv3-gpu.dtb -o ambarella-cv3-gpu-dump.dts               # Decompile dtb to dts</div>
<div class="line">Lychee$ sudo vim ambarella-cv3-gpu-dump.dts                                                      # modify dts</div>
<div class="line">Lychee$ sudo dtc -I dts -O dtb ambarella-cv3-gpu-dump.dts -o ambarella-cv3-gpu-&lt;customized&gt;.dtb  # Compile modified dts to dtb</div>
</div><!-- fragment --><p class="startli">Change the content in <code>/boot/extlinux/extlinux.conf</code> (in <b>line 7</b> above for example), replace the DTB name with one in step 2 shown (such as <code>ambarella-cv3-gpu-4K-llava-dual-vout.dtb</code>).</p>
</li>
<li>Change lua configuration for HDMI VOUT: <div class="fragment"><div class="line">Lychee$  cd /etc/ambarella/cv3/vout/</div>
<div class="line">Lychee$  sudo ln -sf vout_hdmi_dual.lua vout_hdmi.lua</div>
</div><!-- fragment --></li>
<li>Reboot Lychee and dual-VOUT can be used now.</li>
</ul>
</dd></dl>
<hr  />
<h1><a class="anchor" id="lychee_os_the_local_sdk_repo_setup_guide"></a>
4. Setup Local SDK Repo</h1>
<dl class="section user"><dt>Configure Local Repository</dt><dd><ul>
<li>Get sdk-release-cv3 local repository. (Contact the Ambarella support team)</li>
<li>Place the <code>sdk-release-cv3-local-repo-20231115.tar.xz</code> in the <code>/var</code> dectory</li>
<li>Extract files to the '/var' folder <div class="fragment"><div class="line">Lychee$ cd /var/ &amp;&amp; sudo tar -xvf sdk-release-cv3-local-repo-20231115.tar.xz</div>
</div><!-- fragment --></li>
</ul>
</dd></dl>
<dl class="section user"><dt>Create Local SDK .repo File</dt><dd><ol type="1">
<li>Create a <code>yum .repo</code> file, so that users can use 'dnf' command to manage software packages in Lychee OS <div class="fragment"><div class="line">Lychee$ sudo vim /etc/yum.repos.d/sdk-release-local.repo</div>
</div><!-- fragment --></li>
<li>Paste the content below to the <code>.repo</code> file for 'dnf' to track and configure the local SDK repo <div class="fragment"><div class="line">[sdk-release-local]</div>
<div class="line"> <a class="code hl_variableRef" target="_blank" href="../../../library/d1/d82/cJSON_8h.html#a25d22ecc7e656d2c59332072684e8766">name</a>=SDK Release - $basearch - CV3</div>
<div class="line"> baseurl=file:</div>
<div class="line"> enabled=1</div>
<div class="line"> type=rpm</div>
<div class="line"> metadata_expire=1h</div>
<div class="line"> skip_if_unavailable=True</div>
<div class="line"> </div>
<div class="line">[sdk-release-local-<a class="code hl_variableRef" target="_blank" href="../../../video/d4/daa/vin__init_8c.html#a07a87b2e6ed927503e2f95f119c9fc23">source</a>]</div>
<div class="line"> <a class="code hl_variableRef" target="_blank" href="../../../library/d1/d82/cJSON_8h.html#a25d22ecc7e656d2c59332072684e8766">name</a>=SDK Release - $basearch - CV3 - Sources</div>
<div class="line"> baseurl=file:</div>
<div class="line"> enabled=1</div>
<div class="line"> type=rpm</div>
<div class="line"> metadata_expire=1h</div>
<div class="line"> skip_if_unavailable=True</div>
<div class="ttc" id="acJSON_8h_html_a25d22ecc7e656d2c59332072684e8766"><div class="ttname"><a href="../../../library/d1/d82/cJSON_8h.html#a25d22ecc7e656d2c59332072684e8766">name</a></div><div class="ttdeci">const char *const name</div></div>
<div class="ttc" id="avin__init_8c_html_a07a87b2e6ed927503e2f95f119c9fc23"><div class="ttname"><a href="../../../video/d4/daa/vin__init_8c.html#a07a87b2e6ed927503e2f95f119c9fc23">source</a></div><div class="ttdeci">int source</div></div>
</div><!-- fragment --></li>
</ol>
</dd></dl>
<dl class="section user"><dt>Install SDK Packages to the System</dt><dd></dd></dl>
<p>Local SDK release repo contains packages: </p><div class="fragment"><div class="line">ambarella-cooper-cv3-kmod (<span class="keyword">private</span>-driver)</div>
<div class="line">ambarella-cooper-cv3-cavalry-kmod</div>
<div class="line">libamba-cooper-imglib-cv3 (3A)</div>
<div class="line">libamba-vproc-cv3</div>
<div class="line">libamba-data-transfer</div>
<div class="line">ambarella-utility-cv3</div>
<div class="line">libamba-eazyai-cv3</div>
<div class="line">libamba-lwmedia (rtsp)</div>
<div class="line">libamba-eazydds</div>
<div class="line">libamba-dsp-monitor-cv3</div>
<div class="line">libamba-tof-cv3</div>
<div class="line">libamba-textinsert</div>
</div><!-- fragment --><dl class="section user"><dt>Install Local SDK release run-time, develop, debug meta package, contains the packages mentioned above.</dt><dd><div class="fragment"><div class="line">Lychee$ sudo dnf install ambarella-cv3-cooper-sdk-run-time ambarella-cv3-cooper-sdk-devel \</div>
<div class="line">         ambarella-cv3-cooper-sdk-debug --refresh --repo sdk-release-local</div>
</div><!-- fragment --></dd></dl>
<dl class="section user"><dt>If users want to download the source RPM, for example (EazyAI), use the following command.</dt><dd><div class="fragment"><div class="line">Lychee$ sudo dnf download --<a class="code hl_variableRef" target="_blank" href="../../../video/d4/daa/vin__init_8c.html#a07a87b2e6ed927503e2f95f119c9fc23">source</a> libamba-eazyai-cv3 --repo sdk-release-local</div>
</div><!-- fragment --></dd></dl>
<dl class="section user"><dt>To Upgrade SDK Release Packages</dt><dd><div class="fragment"><div class="line">Lychee$ sudo dnf update --refresh --repo sdk-release-local</div>
</div><!-- fragment --></dd></dl>
<hr  />
<h1><a class="anchor" id="lychee_os_dnf_command_reference"></a>
5. Command Reference : dnf / rpm</h1>
<p >The commonly used commands for package management in Lychee include: </p><div class="fragment"><div class="line"><span class="preprocessor">### Update all installed packages</span></div>
<div class="line">Lychee$ sudo dnf update</div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">### Install the package</span></div>
<div class="line">Lychee$  Lychee $ sudo dnf install &lt;name&gt;</div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">### Update the package</span></div>
<div class="line">Lychee$ sudo dnf update &lt;name&gt;  </div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">### Downgrade the package</span></div>
<div class="line">Lychee$ Lychee $ sudo dnf downgrade &lt;name&gt;</div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">### Search what provides &quot;test_encode&quot;</span> in designated repository</div>
<div class="line">Lychee$ sudo dnf repoquery --whatprovide <span class="stringliteral">&quot;*test_encode*&quot;</span> --repo lychee-updates-tests</div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">### Clean dnf repo cache</span></div>
<div class="line">Lychee$ sudo dnf clean all</div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">### Show packages installed in your system</span></div>
<div class="line">Lychee$ rpm -qa</div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">### show package info</span></div>
<div class="line">Lychee$ rpm -qi &lt;name&gt;</div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">### show what in the package</span></div>
<div class="line"> Lychee$ rpm -qlp &lt;name&gt;   </div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">### Install the package to your system</span></div>
<div class="line">Lychee $ rpm -ivh &lt;name&gt; </div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">### What does this file belong to</span></div>
<div class="line">Lychee $ rpm -qf &lt;/path/to/file&gt; </div>
</div><!-- fragment --><dl class="section user"><dt>Package "ambarella-cv3-cooper-sdk" contains components:</dt><dd><ul>
<li>private-driver, cavalry, imglib (3A), vproc, tof, eazydds, data-transfer, lwmedia, xorg-ambafbdev, dsp-monitor, cvlib, utility of Ambarella Cooper SDK.</li>
<li>Install all of them using the following command: <div class="fragment"><div class="line">Lychee $ sudo dnf install ambarella-cv3-cooper-sdk --refresh --repo lychee-updates-tests</div>
</div><!-- fragment --></li>
</ul>
</dd></dl>
<p>For more information about [DNF Fedora official document introduction] (<a href="https://docs.fedoraproject.org/en-US/fedora/latest/system-administrators-guide/package-management/DNF/">https://docs.fedoraproject.org/en-US/fedora/latest/system-administrators-guide/package-management/DNF/</a>)</p>
<hr  />
<h1><a class="anchor" id="lychee_os_license"></a>
6. License</h1>
<p >Lychee OS licensed under the MIT license <a href="http://opensource.org/licenses/MIT">http://opensource.org/licenses/MIT</a>.</p>
<p >Ambarella SDK software packages license is as follow:</p>
<p >Copyright (c) 2024 Ambarella International LP.</p>
<p >This file and its contents ( "Software" ) are protected by intellectual property rights including, without limitation, U.S. and/or foreign copyrights. This Software is also the confidential and proprietary information of Ambarella International LP and its licensors. You may not use, reproduce, disclose, distribute, modify, or otherwise prepare derivative works of this Software or any portion thereof except pursuant to a signed license agreement or nondisclosure agreement with Ambarella International LP or its authorized affiliates. In the absence of such an agreement, you agree to promptly notify and return this Software to Ambarella International LP.</p>
<p >THIS SOFTWARE IS PROVIDED "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF NON-INFRINGEMENT, MERCHANTABILITY, AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL AMBARELLA INTERNATIONAL LP OR ITS AFFILIATES BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; COMPUTER FAILURE OR MALFUNCTION; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE. </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="../../doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.3 </li>
  </ul>
</div>
</body>
</html>
