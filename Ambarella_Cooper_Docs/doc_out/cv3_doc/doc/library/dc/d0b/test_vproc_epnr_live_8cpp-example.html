<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.3"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Library: test_vproc_epnr_live.cpp</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript" src="../../navtreedata.js"></script>
<script type="text/javascript" src="../../navtree.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/search.js"></script>
<link rel="search" href="../../search_opensearch.php?v=opensearch.xml" type="application/opensearchdescription+xml" title="Library"/>
<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  extensions: ["tex2jax.js"],
  jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="../../../library/mathjax/MathJax.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
<link href="../../doxygen-awesome.css" rel="stylesheet" type="text/css"/>
<link href="../../doxygen-awesome-sidebar-only.css" rel="stylesheet" type="text/css"/>
<link href="../../doxygen-ambarella.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="../../Ambarella.png"/></td>
  <td id="projectalign">
   <div id="projectname">Library<span id="projectnumber">&#160;Cooper_1.6.0 (CV72 &amp; CV3) @ 2024.07.10 14:12:44</span>
   </div>
   <div id="projectbrief">placeholder</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.3 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "../../search",'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('../../',true,true,'search.html','Search');
  $(document).ready(function() {
    if ($('.searchresults').length > 0) { searchBox.DOMSearchField().focus(); }
  });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('dc/d0b/test_vproc_epnr_live_8cpp-example.html','../../'); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<div class="header">
  <div class="headertitle"><div class="title">test_vproc_epnr_live.cpp</div></div>
</div><!--header-->
<div class="contents">
<p >This is a source code file of test_vproc_epnr_live.</p>
<div class="fragment"><div class="line"><span class="comment">/*******************************************************************************</span></div>
<div class="line"><span class="comment"> * test_vproc_epnr_live.cpp</span></div>
<div class="line"><span class="comment"> *</span></div>
<div class="line"><span class="comment"> * History:</span></div>
<div class="line"><span class="comment"> *    2020/09/25  - [Richard Ren] created for CV22</span></div>
<div class="line"><span class="comment"> *</span></div>
<div class="line"><span class="comment"> * Copyright (c) 2018 Ambarella International LP</span></div>
<div class="line"><span class="comment"> *</span></div>
<div class="line"><span class="comment"> * This file and its contents ( &quot;Software&quot; ) are protected by intellectual</span></div>
<div class="line"><span class="comment"> * property rights including, without limitation, U.S. and/or foreign</span></div>
<div class="line"><span class="comment"> * copyrights. This Software is also the confidential and proprietary</span></div>
<div class="line"><span class="comment"> * information of Ambarella International LP and its licensors. You may not use, reproduce,</span></div>
<div class="line"><span class="comment"> * disclose, distribute, modify, or otherwise prepare derivative works of this</span></div>
<div class="line"><span class="comment"> * Software or any portion thereof except pursuant to a signed license agreement</span></div>
<div class="line"><span class="comment"> * or nondisclosure agreement with Ambarella International LP or its authorized affiliates.</span></div>
<div class="line"><span class="comment"> * In the absence of such an agreement, you agree to promptly notify and return</span></div>
<div class="line"><span class="comment"> * this Software to Ambarella International LP.</span></div>
<div class="line"><span class="comment"> *</span></div>
<div class="line"><span class="comment"> * This file includes sample code and is only for internal testing and evaluation.  If you</span></div>
<div class="line"><span class="comment"> * distribute this sample code (whether in source, object, or binary code form), it will be</span></div>
<div class="line"><span class="comment"> * without any warranty or indemnity protection from Ambarella International LP or its affiliates.</span></div>
<div class="line"><span class="comment"> *</span></div>
<div class="line"><span class="comment"> * THIS SOFTWARE IS PROVIDED &quot;AS IS&quot; AND ANY EXPRESS OR IMPLIED WARRANTIES,</span></div>
<div class="line"><span class="comment"> * INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF NON-INFRINGEMENT,</span></div>
<div class="line"><span class="comment"> * MERCHANTABILITY, AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED.</span></div>
<div class="line"><span class="comment"> * IN NO EVENT SHALL AMBARELLA INTERNATIONAL LP OR ITS AFFILIATES BE LIABLE FOR ANY DIRECT,</span></div>
<div class="line"><span class="comment"> * INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES</span></div>
<div class="line"><span class="comment"> * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;</span></div>
<div class="line"><span class="comment"> * LOSS OF USE, DATA, OR PROFITS; COMPUTER FAILURE OR MALFUNCTION; OR BUSINESS</span></div>
<div class="line"><span class="comment"> * INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN</span></div>
<div class="line"><span class="comment"> * CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)</span></div>
<div class="line"><span class="comment"> * ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE</span></div>
<div class="line"><span class="comment"> * POSSIBILITY OF SUCH DAMAGE.</span></div>
<div class="line"><span class="comment"> *</span></div>
<div class="line"><span class="comment">******************************************************************************/</span></div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#include &lt;unistd.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;fcntl.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;stdio.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;stdlib.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;string.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;ctype.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;errno.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;getopt.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;sched.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;sys/stat.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;sys/ioctl.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;sys/mman.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;sys/time.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;sys/wait.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;time.h&gt;</span></div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#include &lt;assert.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;signal.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;stdint.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &quot;cavalry_ioctl.h&quot;</span></div>
<div class="line"><span class="preprocessor">#include &quot;<a class="code" href="../../de/db0/cavalry__mem_8h.html">cavalry_mem.h</a>&quot;</span></div>
<div class="line"><span class="preprocessor">#include &quot;<a class="code" href="../../d2/dfe/vproc_8h.html">vproc.h</a>&quot;</span></div>
<div class="line"><span class="preprocessor">#include &lt;arm_neon.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;iostream&gt;</span></div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#include &lt;<a class="code" href="../../de/d89/iav__ioctl_8h.html">iav_ioctl.h</a>&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;linux/fb.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &quot;<a class="code" href="../../d9/d8f/lib__smartfb_8h.html">lib_smartfb.h</a>&quot;</span></div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#include &lt;vector&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;opencv2/opencv.hpp&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;opencv2/core.hpp&gt;</span></div>
<div class="line"> </div>
<div class="line"><span class="keyword">using namespace </span>cv;</div>
<div class="line"><span class="keyword">using namespace </span>std;</div>
<div class="line"> </div>
<div class="line"><span class="keyword">enum</span> _run_mode_s{</div>
<div class="line">    EPNR_RUN_ORIGIN=0,</div>
<div class="line">    EPNR_RUN_LPFILTER=1,</div>
<div class="line">    EPNR_RUN_DENOISE=2,</div>
<div class="line">    EPNR_RUN_LOOP3=3,</div>
<div class="line">    EPNR_RUN_LOOP2=4,</div>
<div class="line">};</div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line"><span class="keyword">typedef</span> <span class="keyword">struct </span>kernel_data_s{</div>
<div class="line">    <span class="keywordtype">float</span> *data;</div>
<div class="line">    uint32_t p;</div>
<div class="line">    uint32_t d;</div>
<div class="line">    uint32_t h;</div>
<div class="line">    uint32_t w;</div>
<div class="line">}kernel_data_t;</div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line"><span class="keyword">typedef</span> <span class="keyword">struct </span>cv_mem_mfd_s {</div>
<div class="line">    <span class="keywordtype">void</span> *virt;</div>
<div class="line">    <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> phys;</div>
<div class="line">    <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> size;</div>
<div class="line">}cv_mem_t;</div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line"><span class="keyword">typedef</span> <span class="keyword">struct </span>_iav_s{</div>
<div class="line">    <span class="keywordtype">int</span> <a id="a0" name="a0"></a><a class="code hl_variableRef" target="_blank" href="../../../video/d4/daa/vin__init_8c.html#a5294002f7dca0cd9bcc0009a27895ef7">fd_iav</a>;</div>
<div class="line">    uint32_t phy_addr_base;</div>
<div class="line">    uint8_t* yuv_virt_addr_base;</div>
<div class="line">    uint8_t buffer_id;</div>
<div class="line">    uint8_t buffer_type;</div>
<div class="line">    <span class="keywordtype">int</span> non_block_read;</div>
<div class="line">}iav_t;</div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line"><span class="keyword">typedef</span> <span class="keyword">struct </span>_fb_s{</div>
<div class="line">    uint32_t width;</div>
<div class="line">    uint32_t height;</div>
<div class="line">    uint32_t pitch;</div>
<div class="line">}fb_t;</div>
<div class="line"> </div>
<div class="line"><span class="keyword">typedef</span> <span class="keyword">struct </span>_vproc_cavalry_s{</div>
<div class="line">    <span class="keywordtype">int</span> fd_cavalry;</div>
<div class="line">    cv_mem_t lib_mem;</div>
<div class="line">}vproc_cavalry_t;</div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#define FILENAME_LENGTH (1024)</span></div>
<div class="line"><span class="preprocessor">#define NO_ARG 0</span></div>
<div class="line"><span class="preprocessor">#define HAS_ARG 1</span></div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#define ALIGN_32_BYTE(x) ((((x) + 31) &gt;&gt; 5) &lt;&lt; 5)</span></div>
<div class="line"><span class="preprocessor">#define ALIGN_8_BITS(x) ((((x) + 7) &gt;&gt; 3) &lt;&lt; 3)</span></div>
<div class="line"><span class="preprocessor">#define ALIGN_PITCH(x) (((x) + (CAVALRY_PORT_PITCH_ALIGN) - 1) &amp; ~((CAVALRY_PORT_PITCH_ALIGN) - 1))</span></div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#define IMG_WIDTH 1280</span></div>
<div class="line"><span class="preprocessor">#define IMG_HEIGHT 720</span></div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">int</span> param_buf_id = 0;</div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">int</span> live_running_flag = 1;</div>
<div class="line"><span class="keyword">static</span> <a id="_a1" name="_a1"></a><a class="code hl_struct" href="../../dc/d33/structsmartfb__box__t.html">smartfb_box_t</a> fb_box;</div>
<div class="line"><span class="keyword">static</span> <a id="_a2" name="_a2"></a><a class="code hl_struct" href="../../dd/d07/structsmartfb__textbox__t.html">smartfb_textbox_t</a> fb_textbox;</div>
<div class="line"> </div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">int</span> measure_time_flag = 1;</div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">char</span> vproc_bin_path[FILENAME_LENGTH] = <span class="stringliteral">&quot;/usr/share/ambarella/vproc/vproc.bin&quot;</span>;</div>
<div class="line"> </div>
<div class="line"><span class="keyword">static</span> uint8_t dt_val = 10;</div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">int</span> run_mode=0;</div>
<div class="line"><span class="keyword">static</span> kernel_data_t    lp_cvfilter_ker_vect;</div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">float</span> lp_cvfilter_ker_data[128] = {-1};</div>
<div class="line"> </div>
<div class="line"><span class="keyword">static</span> <span class="keyword">struct </span>option <a id="a3" name="a3"></a>long_options[] = {</div>
<div class="line">    {<span class="stringliteral">&quot;bin&quot;</span>, <a id="a4" name="a4"></a><a class="code hl_defineRef" target="_blank" href="../../../video/d3/d6c/test__fb_8h.html#affec572f11fcba59ce0cd49cbcd0110f">HAS_ARG</a>, 0, <span class="charliteral">&#39;b&#39;</span>},</div>
<div class="line">    {<span class="stringliteral">&quot;dt&quot;</span>, <a class="code hl_defineRef" target="_blank" href="../../../video/d3/d6c/test__fb_8h.html#affec572f11fcba59ce0cd49cbcd0110f">HAS_ARG</a>, 0, <span class="charliteral">&#39;d&#39;</span>},</div>
<div class="line">    {<span class="stringliteral">&quot;LP_ker_size&quot;</span>, <a class="code hl_defineRef" target="_blank" href="../../../video/d3/d6c/test__fb_8h.html#affec572f11fcba59ce0cd49cbcd0110f">HAS_ARG</a>, 0, <span class="charliteral">&#39;k&#39;</span>},</div>
<div class="line">    {<span class="stringliteral">&quot;buffer-id&quot;</span>, <a class="code hl_defineRef" target="_blank" href="../../../video/d3/d6c/test__fb_8h.html#affec572f11fcba59ce0cd49cbcd0110f">HAS_ARG</a>, 0, <span class="charliteral">&#39;B&#39;</span>},</div>
<div class="line">    {<span class="stringliteral">&quot;run-mode&quot;</span>, <a class="code hl_defineRef" target="_blank" href="../../../video/d3/d6c/test__fb_8h.html#affec572f11fcba59ce0cd49cbcd0110f">HAS_ARG</a>, 0, <span class="charliteral">&#39;m&#39;</span>},</div>
<div class="line">    {0, 0, 0, 0}</div>
<div class="line">};</div>
<div class="line"> </div>
<div class="line"><span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">char</span> *<a id="a5" name="a5"></a>short_options = <span class="stringliteral">&quot;b:d:k:B:m:&quot;</span>;</div>
<div class="line"> </div>
<div class="line"><span class="keyword">struct </span><a id="_a6" name="_a6"></a><a class="code hl_structRef" target="_blank" href="../../../video/d2/d4b/structhint__s.html">hint_s</a> {</div>
<div class="line">    <span class="keyword">const</span> <span class="keywordtype">char</span> *<a id="a7" name="a7"></a><a class="code hl_variableRef" target="_blank" href="../../../video/d2/d4b/structhint__s.html#aa56a50443afd9d2f7cf738fb7ffba168">arg</a>;</div>
<div class="line">    <span class="keyword">const</span> <span class="keywordtype">char</span> *<a id="a8" name="a8"></a><a class="code hl_variableRef" target="_blank" href="../../../video/d2/d4b/structhint__s.html#a2799cca21c05a4f99f4c8b3b178d0133">str</a>;</div>
<div class="line">};</div>
<div class="line"> </div>
<div class="line"><span class="keyword">static</span> <span class="keyword">const</span> <span class="keyword">struct </span><a class="code hl_structRef" target="_blank" href="../../../video/d2/d4b/structhint__s.html">hint_s</a> <a id="a9" name="a9"></a>hint[] = {</div>
<div class="line">    {<span class="stringliteral">&quot;&quot;</span>, <span class="stringliteral">&quot;\t\tPath to vproc.bin.&quot;</span>},</div>
<div class="line">    {<span class="stringliteral">&quot;&quot;</span>, <span class="stringliteral">&quot;\t\tdt value. eg. -d 10&quot;</span>},</div>
<div class="line">    {<span class="stringliteral">&quot;&quot;</span>, <span class="stringliteral">&quot;\t\tLP kernel size. eg. -k 3&quot;</span>},</div>
<div class="line">    {<span class="stringliteral">&quot;&quot;</span>, <span class="stringliteral">&quot;\t\tbuffer id.&quot;</span>},</div>
<div class="line">    {<span class="stringliteral">&quot;&quot;</span>, <span class="stringliteral">&quot;\t\tdenoize mode, 0:lp 1:other.&quot;</span>},</div>
<div class="line">};</div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">void</span> <a id="a10" name="a10"></a><a class="code hl_function" href="../../dc/d60/test__smartfb_8c.html#ad96d407a911fbb914fa8e4cfbf2faf0f">usage</a>(<span class="keywordtype">void</span>)</div>
<div class="line">{</div>
<div class="line">    <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> i;</div>
<div class="line"> </div>
<div class="line">    printf(<span class="stringliteral">&quot;test_vproc_epnr_live usage:\n&quot;</span>);</div>
<div class="line">    <span class="keywordflow">for</span> (i = 0; i &lt; <span class="keyword">sizeof</span>(long_options) / <span class="keyword">sizeof</span>(long_options[0]) - 1; i++) {</div>
<div class="line">        <span class="keywordflow">if</span> (isalpha(long_options[i].val))</div>
<div class="line">            printf(<span class="stringliteral">&quot;-%c &quot;</span>, long_options[i].val);</div>
<div class="line">        <span class="keywordflow">else</span></div>
<div class="line">            printf(<span class="stringliteral">&quot;   &quot;</span>);</div>
<div class="line">        printf(<span class="stringliteral">&quot;--%s&quot;</span>, long_options[i].<a id="a11" name="a11"></a><a class="code hl_variable" href="../../d1/d82/cJSON_8h.html#a25d22ecc7e656d2c59332072684e8766">name</a>);</div>
<div class="line">        <span class="keywordflow">if</span> (hint[i].<a class="code hl_variableRef" target="_blank" href="../../../video/d2/d4b/structhint__s.html#aa56a50443afd9d2f7cf738fb7ffba168">arg</a>[0] != 0)</div>
<div class="line">            printf(<span class="stringliteral">&quot; [%s]&quot;</span>, hint[i].<a class="code hl_variableRef" target="_blank" href="../../../video/d2/d4b/structhint__s.html#aa56a50443afd9d2f7cf738fb7ffba168">arg</a>);</div>
<div class="line">        printf(<span class="stringliteral">&quot;\t%s\n&quot;</span>, hint[i].<a class="code hl_variableRef" target="_blank" href="../../../video/d2/d4b/structhint__s.html#a2799cca21c05a4f99f4c8b3b178d0133">str</a>);</div>
<div class="line">    }</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">int</span> init_param(<span class="keywordtype">int</span> argc, <span class="keywordtype">char</span> **argv)</div>
<div class="line">{</div>
<div class="line">    <span class="keywordtype">int</span> value;</div>
<div class="line">    <span class="keywordtype">int</span> ch;</div>
<div class="line">    <span class="keywordtype">int</span> option_index = 0;</div>
<div class="line">    <span class="keywordtype">float</span> norm_ker;</div>
<div class="line"> </div>
<div class="line">    opterr = 0;</div>
<div class="line">    <span class="keywordflow">while</span> ((ch = getopt_long(argc, argv, short_options, long_options, &amp;option_index))</div>
<div class="line">        != -1) {</div>
<div class="line">    <span class="keywordflow">switch</span> (ch) {</div>
<div class="line">        <span class="keywordflow">case</span> <span class="charliteral">&#39;b&#39;</span>:</div>
<div class="line">            value = strlen(optarg);</div>
<div class="line">            <span class="keywordflow">if</span> (value &gt;= FILENAME_LENGTH) {</div>
<div class="line">                printf(<span class="stringliteral">&quot;Filename [%s] is too long [%d] (&gt;%d).\n&quot;</span>, optarg,</div>
<div class="line">                    value, FILENAME_LENGTH);</div>
<div class="line">                <span class="keywordflow">return</span> -1;</div>
<div class="line">            }</div>
<div class="line">            snprintf(vproc_bin_path, <span class="keyword">sizeof</span>(vproc_bin_path), <span class="stringliteral">&quot;%s&quot;</span>, optarg);</div>
<div class="line">            <span class="keywordflow">break</span>;</div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">case</span> <span class="charliteral">&#39;d&#39;</span>:</div>
<div class="line">            dt_val = atoi(optarg);</div>
<div class="line">            <span class="keywordflow">break</span>;</div>
<div class="line">        <span class="keywordflow">case</span> <span class="charliteral">&#39;k&#39;</span>:</div>
<div class="line">            lp_cvfilter_ker_vect.w = atoi(optarg);</div>
<div class="line">            lp_cvfilter_ker_vect.h = lp_cvfilter_ker_vect.w;</div>
<div class="line">            norm_ker = 1.0 / (lp_cvfilter_ker_vect.w * lp_cvfilter_ker_vect.h);</div>
<div class="line">            <span class="keywordflow">for</span> (uint32_t i=0; i&lt; lp_cvfilter_ker_vect.h; i++) {</div>
<div class="line">                <span class="keywordflow">for</span> (uint32_t j = 0; j &lt; lp_cvfilter_ker_vect.w; j++) {</div>
<div class="line">                    lp_cvfilter_ker_data[i * lp_cvfilter_ker_vect.w+j] = norm_ker;</div>
<div class="line">                }</div>
<div class="line">            }</div>
<div class="line"> </div>
<div class="line">            <span class="keywordflow">break</span>;</div>
<div class="line">        <span class="keywordflow">case</span> <span class="charliteral">&#39;m&#39;</span>:</div>
<div class="line">            run_mode = atoi(optarg);</div>
<div class="line">            <span class="keywordflow">break</span>;</div>
<div class="line">        <span class="keywordflow">case</span> <span class="charliteral">&#39;B&#39;</span>:</div>
<div class="line">            param_buf_id = atoi(optarg);</div>
<div class="line">            <span class="keywordflow">break</span>;</div>
<div class="line">        <span class="keywordflow">default</span>:</div>
<div class="line">            printf(<span class="stringliteral">&quot;unknown option found: %c\n&quot;</span>, ch);</div>
<div class="line">            <span class="keywordflow">return</span> -1;</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line">    lp_cvfilter_ker_vect.data = lp_cvfilter_ker_data;</div>
<div class="line">    <span class="keywordflow">return</span> 0;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">int</span> smartfb_draw_text(<span class="keyword">const</span> <span class="keywordtype">char</span> *text_data, <span class="keywordtype">int</span> x, <span class="keywordtype">int</span> y,</div>
<div class="line">            <span class="keywordtype">int</span> fontsize, <span class="keywordtype">int</span> thickness, <span class="keywordtype">int</span> color, <span class="keywordtype">int</span> bg_color, <span class="keywordtype">int</span> bg_alpha)</div>
<div class="line">{</div>
<div class="line">    <a class="code hl_struct" href="../../dc/d33/structsmartfb__box__t.html">smartfb_box_t</a> *textbox;</div>
<div class="line">    <a id="_a12" name="_a12"></a><a class="code hl_struct" href="../../d9/d50/structsmartfb__obj__t.html">smartfb_obj_t</a> *fb_obj;</div>
<div class="line">    textbox = &amp;fb_textbox.<a id="a13" name="a13"></a><a class="code hl_variable" href="../../dd/d07/structsmartfb__textbox__t.html#a52bde70682c4f2774280f6e4a5543914">box</a>;</div>
<div class="line">    fb_obj = &amp;textbox-&gt;<a id="a14" name="a14"></a><a class="code hl_variable" href="../../dc/d33/structsmartfb__box__t.html#a5c4857750a95f12d5ab4b5c3fda83bbf">obj</a>;</div>
<div class="line">    fb_textbox.<a id="a15" name="a15"></a><a class="code hl_variable" href="../../dd/d07/structsmartfb__textbox__t.html#a21a0365727fbeb370a00462b6f7d57dc">font_size</a> = fontsize;</div>
<div class="line">    textbox-&gt;<a id="a16" name="a16"></a><a class="code hl_variable" href="../../dc/d33/structsmartfb__box__t.html#ac57e8bd071f9869f0ef57ccbb861d7b3">line_thickness</a> = thickness;</div>
<div class="line">    fb_textbox.<a id="a17" name="a17"></a><a class="code hl_variable" href="../../dd/d07/structsmartfb__textbox__t.html#a57342927d68b58b5f6ff609229a9228f">wrap_line</a> = 0;</div>
<div class="line">    fb_textbox.<a id="a18" name="a18"></a><a class="code hl_variable" href="../../dd/d07/structsmartfb__textbox__t.html#abb8aa18bb777181ebe8164423c85b1b7">bold</a> = 0;</div>
<div class="line">    fb_textbox.<a id="a19" name="a19"></a><a class="code hl_variable" href="../../dd/d07/structsmartfb__textbox__t.html#ad8804a601fd765d2f98883d5473a75f7">italic</a> = 0;</div>
<div class="line">    fb_obj-&gt;<a id="a20" name="a20"></a><a class="code hl_variable" href="../../d9/d50/structsmartfb__obj__t.html#a21f524fe1a263d9db15e889ef0af18ed">color</a> = color;</div>
<div class="line">    fb_obj-&gt;<a id="a21" name="a21"></a><a class="code hl_variable" href="../../d9/d50/structsmartfb__obj__t.html#ab0faf0a67b71437ad86c58cf1f58201a">bg_color</a> = bg_color;</div>
<div class="line">    fb_obj-&gt;<a id="a22" name="a22"></a><a class="code hl_variable" href="../../d9/d50/structsmartfb__obj__t.html#ab353949fb9b49536f0b393dcbef42b1c">bg_alpha</a> = bg_alpha;</div>
<div class="line">    fb_obj-&gt;<a id="a23" name="a23"></a><a class="code hl_variable" href="../../d9/d50/structsmartfb__obj__t.html#a0586d471a8d932425a7c597dbe2e2e6c">offset_x</a> = x;</div>
<div class="line">    fb_obj-&gt;<a id="a24" name="a24"></a><a class="code hl_variable" href="../../d9/d50/structsmartfb__obj__t.html#aed7068943eea7cd4d120a92910cc621e">offset_y</a> = y;</div>
<div class="line">    textbox-&gt;<a id="a25" name="a25"></a><a class="code hl_variable" href="../../dc/d33/structsmartfb__box__t.html#a5103232dda61eefd81b5b849643c5753">width</a> = fb_textbox.<a class="code hl_variable" href="../../dd/d07/structsmartfb__textbox__t.html#a21a0365727fbeb370a00462b6f7d57dc">font_size</a> * strlen(text_data);</div>
<div class="line">    textbox-&gt;<a id="a26" name="a26"></a><a class="code hl_variable" href="../../dc/d33/structsmartfb__box__t.html#a46a3d4708b9b955a65540f1c7f9d47b5">height</a> = fb_textbox.<a class="code hl_variable" href="../../dd/d07/structsmartfb__textbox__t.html#a21a0365727fbeb370a00462b6f7d57dc">font_size</a>;</div>
<div class="line">    snprintf(fb_textbox.<a id="a27" name="a27"></a><a class="code hl_variable" href="../../dd/d07/structsmartfb__textbox__t.html#a15a24e13f019ccdd028849a175980318">text</a>, <span class="keyword">sizeof</span>(fb_textbox.<a class="code hl_variable" href="../../dd/d07/structsmartfb__textbox__t.html#a15a24e13f019ccdd028849a175980318">text</a>), <span class="stringliteral">&quot;%s&quot;</span>, text_data);</div>
<div class="line">    <a id="a28" name="a28"></a><a class="code hl_function" href="../../df/d1d/group__SmartFB-api.html#gafabe2068c0a376e56c612c215bc286da">smartfb_draw_textbox</a>(&amp;fb_textbox);</div>
<div class="line">    <span class="keywordflow">return</span> 0;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">void</span> sigstop(<span class="keywordtype">int</span> flag)</div>
<div class="line">{</div>
<div class="line">    live_running_flag = 0;</div>
<div class="line">    printf(<span class="stringliteral">&quot;Receive Stop Signal, exit live mode!\n&quot;</span>);</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">int</span> create_vect(<a id="_a29" name="_a29"></a><a class="code hl_struct" href="../../df/d51/structvect__desc__t.html">vect_desc_t</a>* vect,cv_mem_t* vm,</div>
<div class="line">    <span class="keywordtype">int</span> h, <span class="keywordtype">int</span> w, <span class="keywordtype">int</span> d, <span class="keywordtype">int</span> data_size, <span class="keywordtype">int</span> with_cache)</div>
<div class="line">{</div>
<div class="line">    vect-&gt;<a id="a30" name="a30"></a><a class="code hl_variable" href="../../df/d51/structvect__desc__t.html#ae30613371d9332251793d73dd1cffb4a">shape</a>.<a id="a31" name="a31"></a><a class="code hl_variable" href="../../d3/dfe/structvect__shape__t.html#a93c7c40d4fc2b2a4e8fea0f75e81e856">p</a> = 1;</div>
<div class="line">    vect-&gt;<a class="code hl_variable" href="../../df/d51/structvect__desc__t.html#ae30613371d9332251793d73dd1cffb4a">shape</a>.<a id="a32" name="a32"></a><a class="code hl_variable" href="../../d3/dfe/structvect__shape__t.html#a3808cd021ae482979b2c4e49e1fab2e3">d</a> = d;</div>
<div class="line">    vect-&gt;<a class="code hl_variable" href="../../df/d51/structvect__desc__t.html#ae30613371d9332251793d73dd1cffb4a">shape</a>.<a id="a33" name="a33"></a><a class="code hl_variable" href="../../d3/dfe/structvect__shape__t.html#a50d0f0f0767450a76d736d60766c9999">h</a> = h;</div>
<div class="line">    vect-&gt;<a class="code hl_variable" href="../../df/d51/structvect__desc__t.html#ae30613371d9332251793d73dd1cffb4a">shape</a>.<a id="a34" name="a34"></a><a class="code hl_variable" href="../../d3/dfe/structvect__shape__t.html#ad0fb62e7a08e70fc5e0a76b67809f84b">w</a> = w;</div>
<div class="line">    vect-&gt;<a id="a35" name="a35"></a><a class="code hl_variable" href="../../df/d51/structvect__desc__t.html#a169952c253c9909a5f727afaec738893">pitch</a> = ALIGN_PITCH(w * data_size);</div>
<div class="line">    vect-&gt;<a id="a36" name="a36"></a><a class="code hl_variable" href="../../df/d51/structvect__desc__t.html#abcee95ff813380d633bad137178eb09c">color_space</a> = <a id="a37" name="a37"></a><a class="code hl_enumvalue" href="../../df/dd0/group__vproc-helper.html#gga584ebcddad576d573a2f8f290cc435a4a1e749bf0931375566ae438d23d149b62">CS_VECT</a>;</div>
<div class="line">    vm-&gt;size = vect-&gt;<a class="code hl_variable" href="../../df/d51/structvect__desc__t.html#a169952c253c9909a5f727afaec738893">pitch</a> * vect-&gt;<a class="code hl_variable" href="../../df/d51/structvect__desc__t.html#ae30613371d9332251793d73dd1cffb4a">shape</a>.<a class="code hl_variable" href="../../d3/dfe/structvect__shape__t.html#a50d0f0f0767450a76d736d60766c9999">h</a> * vect-&gt;<a class="code hl_variable" href="../../df/d51/structvect__desc__t.html#ae30613371d9332251793d73dd1cffb4a">shape</a>.<a class="code hl_variable" href="../../d3/dfe/structvect__shape__t.html#a3808cd021ae482979b2c4e49e1fab2e3">d</a>;</div>
<div class="line">    <span class="keywordflow">if</span> (<a id="a38" name="a38"></a><a class="code hl_function" href="../../d3/dbf/group__cavalry__mem-api-details.html#ga78fe436b7764d49520410be725783432">cavalry_mem_alloc</a>(&amp;vm-&gt;size, &amp;vm-&gt;phys, &amp;vm-&gt;virt, with_cache) &lt; 0) {</div>
<div class="line">        perror(<span class="stringliteral">&quot;cavalry_mem_alloc err\n&quot;</span>);</div>
<div class="line">        <span class="keywordflow">return</span> -1;</div>
<div class="line">    }</div>
<div class="line">    vect-&gt;<a id="a39" name="a39"></a><a class="code hl_variable" href="../../df/d51/structvect__desc__t.html#ac0d7d4727c50cb5436655cb70778fb03">data_addr</a> = vm-&gt;phys;</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">return</span> vm-&gt;size;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">int</span> free_vmem(cv_mem_t* vm)</div>
<div class="line">{</div>
<div class="line">    <span class="keywordflow">if</span> (vm-&gt;virt != NULL) {</div>
<div class="line">        <span class="keywordflow">if</span> (<a id="a40" name="a40"></a><a class="code hl_function" href="../../d3/dbf/group__cavalry__mem-api-details.html#gae80d26c23fcc3eb0f578f32647f90a7a">cavalry_mem_free</a>(vm-&gt;size , vm-&gt;phys, vm-&gt;virt) &lt; 0) {</div>
<div class="line">            printf(<span class="stringliteral">&quot;cavalry_mem_alloc err\n&quot;</span>);</div>
<div class="line">            <span class="keywordflow">return</span> -1;</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">return</span> 0;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#ifndef AM_IOCTL</span></div>
<div class="line"><span class="preprocessor">#define AM_IOCTL(_filp, _cmd, _arg) \</span></div>
<div class="line"><span class="preprocessor">        do {                        \</span></div>
<div class="line"><span class="preprocessor">            if (ioctl(_filp, _cmd, _arg) &lt; 0) { \</span></div>
<div class="line"><span class="preprocessor">                perror(#_cmd);      \</span></div>
<div class="line"><span class="preprocessor">                return -1;          \</span></div>
<div class="line"><span class="preprocessor">            }                       \</span></div>
<div class="line"><span class="preprocessor">        } while (0)</span></div>
<div class="line"><span class="preprocessor">#endif</span></div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">int</span> check_iav_state(<span class="keywordtype">int</span> fd_iav)</div>
<div class="line">{</div>
<div class="line">    <span class="keywordtype">int</span> state;</div>
<div class="line"> </div>
<div class="line">    <a id="a41" name="a41"></a><a class="code hl_defineRef" target="_blank" href="../../../video/de/ddf/vout__init__cfg_8c.html#a88a5b93883c34229851d6a7a93254850">AM_IOCTL</a>(fd_iav, <a id="a42" name="a42"></a><a class="code hl_define" href="../../df/d17/group__iav-ioc-enc-use-drv.html#gaeaad4e2420887b9b769ecb322c16c1ac">IAV_IOC_GET_IAV_STATE</a>, &amp;state);</div>
<div class="line">    <span class="keywordflow">if</span> ((state != <a id="a43" name="a43"></a><a class="code hl_enumvalue" href="../../d3/de3/group__iav-ioctl-general-helper.html#ggafc7fb94a411b7cedcb91492097fdb928a24f1c67d4886473779ceba84546aa9f4">IAV_STATE_PREVIEW</a>) &amp;&amp; (state != <a id="a44" name="a44"></a><a class="code hl_enumvalue" href="../../d3/de3/group__iav-ioctl-general-helper.html#ggafc7fb94a411b7cedcb91492097fdb928a3f68c2db148568fb9fa0af2f4ca2fa38">IAV_STATE_ENCODING</a>)) {</div>
<div class="line">        printf(<span class="stringliteral">&quot;IAV is not in preview/encoding state!\n&quot;</span>);</div>
<div class="line">        <span class="keywordflow">return</span> -1;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">return</span> 0;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">int</span> map_yuv_buffer(iav_t *iav_inf)</div>
<div class="line">{</div>
<div class="line">    <span class="keyword">struct </span><a id="_a45" name="_a45"></a><a class="code hl_struct" href="../../db/d5e/structiav__queryinfo.html">iav_queryinfo</a> query_info;</div>
<div class="line">    <span class="keyword">struct </span><a id="_a46" name="_a46"></a><a class="code hl_struct" href="../../d5/d30/structiav__canvas__info.html">iav_canvas_info</a> *canvas_info = NULL;</div>
<div class="line"> </div>
<div class="line">    memset(&amp;query_info, 0, <span class="keyword">sizeof</span>(query_info));</div>
<div class="line">    query_info.qid = <a id="a47" name="a47"></a><a class="code hl_enumvalue" href="../../d3/de3/group__iav-ioctl-general-helper.html#gga1a439af5ebc8b8d356cfc7bfc7929a22ac21f054d0af36e5602d4673fc27b74e9">IAV_INFO_CANVAS</a>;</div>
<div class="line">    canvas_info = &amp;query_info.arg.canvas;</div>
<div class="line">    canvas_info-&gt;<a id="a48" name="a48"></a><a class="code hl_variable" href="../../d5/d30/structiav__canvas__info.html#a2f1e22f38f7be358c963bc2a979fbf4d">canvas_id</a> = iav_inf-&gt;buffer_id;</div>
<div class="line">    <span class="keywordflow">if</span> (ioctl(iav_inf-&gt;fd_iav, <a id="a49" name="a49"></a><a class="code hl_define" href="../../df/d17/group__iav-ioc-enc-use-drv.html#gafa8b43da12bfe905cd91b143a7670c0a">IAV_IOC_QUERY_INFO</a>, &amp;query_info) &lt; 0) {</div>
<div class="line">        perror(<span class="stringliteral">&quot;IAV_IOC_QUERY_INFO&quot;</span>);</div>
<div class="line">        <span class="keywordflow">return</span> -1;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    uint32_t <a id="a50" name="a50"></a><a class="code hl_variable" href="../../d5/d30/structiav__canvas__info.html#a6a21f902348c92a852a41a6ad83cf469">mem_size</a> = canvas_info-&gt;<a class="code hl_variable" href="../../d5/d30/structiav__canvas__info.html#a6a21f902348c92a852a41a6ad83cf469">mem_size</a>;</div>
<div class="line">    iav_inf-&gt;yuv_virt_addr_base = (uint8_t *)mmap(NULL, <a class="code hl_variable" href="../../d5/d30/structiav__canvas__info.html#a6a21f902348c92a852a41a6ad83cf469">mem_size</a>, PROT_READ, MAP_SHARED, iav_inf-&gt;fd_iav, canvas_info-&gt;<a id="a51" name="a51"></a><a class="code hl_variable" href="../../d5/d30/structiav__canvas__info.html#a36706adaf8155ec1f0ce5b2130f996fc">mem_phys_addr</a>);</div>
<div class="line">    <span class="keywordflow">if</span> (iav_inf-&gt;yuv_virt_addr_base == MAP_FAILED) {</div>
<div class="line">        perror(<span class="stringliteral">&quot;mmap (%d) failed: %s\n&quot;</span>);</div>
<div class="line">        <span class="keywordflow">return</span> -1;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    iav_inf-&gt;phy_addr_base = canvas_info-&gt;<a class="code hl_variable" href="../../d5/d30/structiav__canvas__info.html#a36706adaf8155ec1f0ce5b2130f996fc">mem_phys_addr</a>;</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">return</span> 0;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">int</span> initial_iav_canvas(iav_t *iav_inf, uint8_t buffer_id, <span class="keywordtype">int</span> non_block_read)</div>
<div class="line">{</div>
<div class="line">    iav_inf-&gt;buffer_id = buffer_id;</div>
<div class="line">    iav_inf-&gt;non_block_read = non_block_read;</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> ((iav_inf-&gt;fd_iav = open(<span class="stringliteral">&quot;/dev/iav&quot;</span>, O_RDWR, 0)) &lt; 0) {</div>
<div class="line">        perror(<span class="stringliteral">&quot;/dev/iav&quot;</span>);</div>
<div class="line">        <span class="keywordflow">return</span> -1;</div>
<div class="line">    }</div>
<div class="line">    printf(<span class="stringliteral">&quot;init iav done!\n&quot;</span>);</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// check iav state</span></div>
<div class="line">    <span class="keywordflow">if</span> (check_iav_state(iav_inf-&gt;fd_iav) &lt; 0){</div>
<div class="line">        <span class="keywordflow">return</span> -1;</div>
<div class="line">    }</div>
<div class="line">    <span class="comment">// map dsp buffer</span></div>
<div class="line">    <span class="keywordflow">if</span> (map_yuv_buffer(iav_inf) &lt; 0){</div>
<div class="line">        <span class="keywordflow">return</span> -1;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">return</span> 0;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">int</span> get_yuv_data_from_iav_canvas(iav_t *iav_inf, <a id="_a52" name="_a52"></a><a class="code hl_struct" href="../../d8/de5/structiav__querydesc.html">iav_querydesc</a> *query_desc, <a class="code hl_struct" href="../../df/d51/structvect__desc__t.html">vect_desc_t</a> *y,<a class="code hl_struct" href="../../df/d51/structvect__desc__t.html">vect_desc_t</a> *uv)</div>
<div class="line">{</div>
<div class="line">    <span class="keyword">struct </span><a id="_a53" name="_a53"></a><a class="code hl_struct" href="../../dc/d6a/structiav__yuv__cap.html">iav_yuv_cap</a> *data_cap;</div>
<div class="line">    memset(y, 0, <span class="keyword">sizeof</span>(<a class="code hl_struct" href="../../df/d51/structvect__desc__t.html">vect_desc_t</a>));</div>
<div class="line">    memset(query_desc, 0, <span class="keyword">sizeof</span>(<a class="code hl_struct" href="../../d8/de5/structiav__querydesc.html">iav_querydesc</a>));</div>
<div class="line"> </div>
<div class="line">    query_desc-&gt;<a id="a54" name="a54"></a><a class="code hl_variable" href="../../d8/de5/structiav__querydesc.html#aa73b12ace6ac7df824707a89ac4f91ff">qid</a> = <a id="a55" name="a55"></a><a class="code hl_enumvalue" href="../../d3/de3/group__iav-ioctl-general-helper.html#gga3606b35b652dca594dc455dfb0b9f172ad1eb61f9c66c08ad24169d01d4d0ee9e">IAV_DESC_CANVAS</a>;</div>
<div class="line">    query_desc-&gt;<a id="a56" name="a56"></a><a class="code hl_variable" href="../../d8/de5/structiav__querydesc.html#a99c68192c9905f231a62a98ee6534cbb">arg</a>.<a id="a57" name="a57"></a><a class="code hl_variable" href="../../d8/de5/structiav__querydesc.html#a8f1abab245b551bdff8a16e77bf819e9">canvas</a>.<a id="a58" name="a58"></a><a class="code hl_variable" href="../../d5/dfb/structiav__canvasdesc.html#a2f1e22f38f7be358c963bc2a979fbf4d">canvas_id</a> = iav_inf-&gt;buffer_id;</div>
<div class="line">    <span class="keywordflow">if</span> (!iav_inf-&gt;non_block_read) {</div>
<div class="line">        query_desc-&gt;<a class="code hl_variable" href="../../d8/de5/structiav__querydesc.html#a99c68192c9905f231a62a98ee6534cbb">arg</a>.<a class="code hl_variable" href="../../d8/de5/structiav__querydesc.html#a8f1abab245b551bdff8a16e77bf819e9">canvas</a>.<a id="a59" name="a59"></a><a class="code hl_variable" href="../../d5/dfb/structiav__canvasdesc.html#ad4f2b1cfb6206d376dd2b024c7c15b9a">non_block_flag</a> &amp;= ~IAV_BUFCAP_NONBLOCK;</div>
<div class="line">    } <span class="keywordflow">else</span> {</div>
<div class="line">        query_desc-&gt;<a class="code hl_variable" href="../../d8/de5/structiav__querydesc.html#a99c68192c9905f231a62a98ee6534cbb">arg</a>.<a class="code hl_variable" href="../../d8/de5/structiav__querydesc.html#a8f1abab245b551bdff8a16e77bf819e9">canvas</a>.<a class="code hl_variable" href="../../d5/dfb/structiav__canvasdesc.html#ad4f2b1cfb6206d376dd2b024c7c15b9a">non_block_flag</a> |= <a id="a60" name="a60"></a><a class="code hl_enumvalue" href="../../d3/de3/group__iav-ioctl-general-helper.html#ggacac47b074a54b97e30e32e180b888f30a09c699e50b30d6f6043809ba4f87b1fc">IAV_BUFCAP_NONBLOCK</a>;</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">if</span> (ioctl(iav_inf-&gt;fd_iav, <a id="a61" name="a61"></a><a class="code hl_define" href="../../da/d9a/group__iav-ioc-enc-use-mem.html#ga9087cb6f84796c640fcf100cea43be09">IAV_IOC_QUERY_DESC</a>, query_desc) &lt; 0) {</div>
<div class="line">        <span class="keywordflow">if</span> (errno != EINTR) {</div>
<div class="line">            perror(<span class="stringliteral">&quot;IAV_IOC_QUERY_DESC&quot;</span>);</div>
<div class="line">            <span class="keywordflow">return</span> -1;</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line">    data_cap = &amp;query_desc-&gt;<a class="code hl_variable" href="../../d8/de5/structiav__querydesc.html#a99c68192c9905f231a62a98ee6534cbb">arg</a>.<a class="code hl_variable" href="../../d8/de5/structiav__querydesc.html#a8f1abab245b551bdff8a16e77bf819e9">canvas</a>.<a id="a62" name="a62"></a><a class="code hl_variable" href="../../d5/dfb/structiav__canvasdesc.html#ad1847147a26fa6e714478a599d584f45">yuv</a>;</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> (data_cap-&gt;<a id="a63" name="a63"></a><a class="code hl_variable" href="../../dc/d6a/structiav__yuv__cap.html#a85db88ffee2944ecd35c616393976289">width</a> % 2 == 1) {</div>
<div class="line">        printf(<span class="stringliteral">&quot;image width should be even!\n&quot;</span>);</div>
<div class="line">        <span class="keywordflow">return</span> -1;</div>
<div class="line">    }</div>
<div class="line">    y-&gt;<a class="code hl_variable" href="../../df/d51/structvect__desc__t.html#ae30613371d9332251793d73dd1cffb4a">shape</a>.<a class="code hl_variable" href="../../d3/dfe/structvect__shape__t.html#a93c7c40d4fc2b2a4e8fea0f75e81e856">p</a> = 1;</div>
<div class="line">    y-&gt;<a class="code hl_variable" href="../../df/d51/structvect__desc__t.html#ae30613371d9332251793d73dd1cffb4a">shape</a>.<a class="code hl_variable" href="../../d3/dfe/structvect__shape__t.html#a3808cd021ae482979b2c4e49e1fab2e3">d</a> = 1;</div>
<div class="line">    y-&gt;<a class="code hl_variable" href="../../df/d51/structvect__desc__t.html#ae30613371d9332251793d73dd1cffb4a">shape</a>.<a class="code hl_variable" href="../../d3/dfe/structvect__shape__t.html#a50d0f0f0767450a76d736d60766c9999">h</a> = data_cap-&gt;<a id="a64" name="a64"></a><a class="code hl_variable" href="../../dc/d6a/structiav__yuv__cap.html#add40f8a56ae8cc650f92a3aa4d2bac99">height</a>;</div>
<div class="line">    y-&gt;<a class="code hl_variable" href="../../df/d51/structvect__desc__t.html#ae30613371d9332251793d73dd1cffb4a">shape</a>.<a class="code hl_variable" href="../../d3/dfe/structvect__shape__t.html#ad0fb62e7a08e70fc5e0a76b67809f84b">w</a> = data_cap-&gt;<a class="code hl_variable" href="../../dc/d6a/structiav__yuv__cap.html#a85db88ffee2944ecd35c616393976289">width</a>;</div>
<div class="line">    y-&gt;<a id="a65" name="a65"></a><a class="code hl_variable" href="../../df/d51/structvect__desc__t.html#a96eedf1bc368872e2a9b5452170dee85">data_format</a>.<a id="a66" name="a66"></a><a class="code hl_variable" href="../../d4/d7a/structdata__format__t.html#a98b4563c5f811938ca031a7553ae81e3">sign</a> = 0;    <span class="comment">// yuv2rgb only support Fix8 as input/output</span></div>
<div class="line">    y-&gt;<a class="code hl_variable" href="../../df/d51/structvect__desc__t.html#a96eedf1bc368872e2a9b5452170dee85">data_format</a>.<a id="a67" name="a67"></a><a class="code hl_variable" href="../../d4/d7a/structdata__format__t.html#a9b6214ecd62318c384c2e83d11edd034">datasize</a> = 0;</div>
<div class="line">    y-&gt;<a class="code hl_variable" href="../../df/d51/structvect__desc__t.html#a96eedf1bc368872e2a9b5452170dee85">data_format</a>.<a id="a68" name="a68"></a><a class="code hl_variable" href="../../d4/d7a/structdata__format__t.html#aececd150ca276030727a270d1818c206">exp_offset</a> = 0;</div>
<div class="line">    y-&gt;<a class="code hl_variable" href="../../df/d51/structvect__desc__t.html#a96eedf1bc368872e2a9b5452170dee85">data_format</a>.<a id="a69" name="a69"></a><a class="code hl_variable" href="../../d4/d7a/structdata__format__t.html#a7e7136211ff9abfc5b164dbabd4fedbd">exp_bits</a> = 0;</div>
<div class="line">    y-&gt;<a class="code hl_variable" href="../../df/d51/structvect__desc__t.html#a169952c253c9909a5f727afaec738893">pitch</a> = data_cap-&gt;<a id="a70" name="a70"></a><a class="code hl_variable" href="../../dc/d6a/structiav__yuv__cap.html#acd497cc6637ae5062f58897e65e16193">pitch</a>;</div>
<div class="line">    y-&gt;<a class="code hl_variable" href="../../df/d51/structvect__desc__t.html#ac0d7d4727c50cb5436655cb70778fb03">data_addr</a> = iav_inf-&gt;phy_addr_base + data_cap-&gt;<a id="a71" name="a71"></a><a class="code hl_variable" href="../../dc/d6a/structiav__yuv__cap.html#a7ed2668fc9c18679b1a349a2f6914f3f">y_addr_offset</a>;</div>
<div class="line">    y-&gt;<a class="code hl_variable" href="../../df/d51/structvect__desc__t.html#abcee95ff813380d633bad137178eb09c">color_space</a> = <a class="code hl_enumvalue" href="../../df/dd0/group__vproc-helper.html#gga584ebcddad576d573a2f8f290cc435a4a1e749bf0931375566ae438d23d149b62">CS_VECT</a>;</div>
<div class="line"> </div>
<div class="line">    uv-&gt;<a class="code hl_variable" href="../../df/d51/structvect__desc__t.html#ae30613371d9332251793d73dd1cffb4a">shape</a>.<a class="code hl_variable" href="../../d3/dfe/structvect__shape__t.html#a93c7c40d4fc2b2a4e8fea0f75e81e856">p</a> = 1;</div>
<div class="line">    uv-&gt;<a class="code hl_variable" href="../../df/d51/structvect__desc__t.html#ae30613371d9332251793d73dd1cffb4a">shape</a>.<a class="code hl_variable" href="../../d3/dfe/structvect__shape__t.html#a3808cd021ae482979b2c4e49e1fab2e3">d</a> = 1;</div>
<div class="line">    uv-&gt;<a class="code hl_variable" href="../../df/d51/structvect__desc__t.html#ae30613371d9332251793d73dd1cffb4a">shape</a>.<a class="code hl_variable" href="../../d3/dfe/structvect__shape__t.html#a50d0f0f0767450a76d736d60766c9999">h</a> = data_cap-&gt;<a class="code hl_variable" href="../../dc/d6a/structiav__yuv__cap.html#add40f8a56ae8cc650f92a3aa4d2bac99">height</a>;</div>
<div class="line">    uv-&gt;<a class="code hl_variable" href="../../df/d51/structvect__desc__t.html#ae30613371d9332251793d73dd1cffb4a">shape</a>.<a class="code hl_variable" href="../../d3/dfe/structvect__shape__t.html#ad0fb62e7a08e70fc5e0a76b67809f84b">w</a> = data_cap-&gt;<a class="code hl_variable" href="../../dc/d6a/structiav__yuv__cap.html#a85db88ffee2944ecd35c616393976289">width</a>;</div>
<div class="line">    uv-&gt;<a class="code hl_variable" href="../../df/d51/structvect__desc__t.html#a96eedf1bc368872e2a9b5452170dee85">data_format</a>.<a class="code hl_variable" href="../../d4/d7a/structdata__format__t.html#a98b4563c5f811938ca031a7553ae81e3">sign</a> = 0;   <span class="comment">// yuv2rgb only support Fix8 as input/output</span></div>
<div class="line">    uv-&gt;<a class="code hl_variable" href="../../df/d51/structvect__desc__t.html#a96eedf1bc368872e2a9b5452170dee85">data_format</a>.<a class="code hl_variable" href="../../d4/d7a/structdata__format__t.html#a9b6214ecd62318c384c2e83d11edd034">datasize</a> = 0;</div>
<div class="line">    uv-&gt;<a class="code hl_variable" href="../../df/d51/structvect__desc__t.html#a96eedf1bc368872e2a9b5452170dee85">data_format</a>.<a class="code hl_variable" href="../../d4/d7a/structdata__format__t.html#aececd150ca276030727a270d1818c206">exp_offset</a> = 0;</div>
<div class="line">    uv-&gt;<a class="code hl_variable" href="../../df/d51/structvect__desc__t.html#a96eedf1bc368872e2a9b5452170dee85">data_format</a>.<a class="code hl_variable" href="../../d4/d7a/structdata__format__t.html#a7e7136211ff9abfc5b164dbabd4fedbd">exp_bits</a> = 0;</div>
<div class="line">    uv-&gt;<a class="code hl_variable" href="../../df/d51/structvect__desc__t.html#a169952c253c9909a5f727afaec738893">pitch</a> = data_cap-&gt;<a class="code hl_variable" href="../../dc/d6a/structiav__yuv__cap.html#acd497cc6637ae5062f58897e65e16193">pitch</a>;</div>
<div class="line">    uv-&gt;<a class="code hl_variable" href="../../df/d51/structvect__desc__t.html#ac0d7d4727c50cb5436655cb70778fb03">data_addr</a> = iav_inf-&gt;phy_addr_base + data_cap-&gt;<a id="a72" name="a72"></a><a class="code hl_variable" href="../../dc/d6a/structiav__yuv__cap.html#a4eb7b75b76c9314ccc6582b332fdfb9d">uv_addr_offset</a>;</div>
<div class="line">    uv-&gt;<a class="code hl_variable" href="../../df/d51/structvect__desc__t.html#abcee95ff813380d633bad137178eb09c">color_space</a> = <a class="code hl_enumvalue" href="../../df/dd0/group__vproc-helper.html#gga584ebcddad576d573a2f8f290cc435a4a1e749bf0931375566ae438d23d149b62">CS_VECT</a>;</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">return</span> 0;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">int</span> custom_vout(iav_t *iav_inf, <a class="code hl_struct" href="../../df/d51/structvect__desc__t.html">vect_desc_t</a> *y_vect, <a class="code hl_struct" href="../../df/d51/structvect__desc__t.html">vect_desc_t</a> *uv_vect)</div>
<div class="line">{</div>
<div class="line">    <a id="_a73" name="_a73"></a><a class="code hl_struct" href="../../d1/dfd/structiav__vout__sync__img__osd__t.html">iav_vout_sync_img_osd_t</a> img_osd;</div>
<div class="line">    memset(&amp;img_osd, 0, <span class="keyword">sizeof</span>(<a class="code hl_struct" href="../../d1/dfd/structiav__vout__sync__img__osd__t.html">iav_vout_sync_img_osd_t</a>));</div>
<div class="line"> </div>
<div class="line">    img_osd.<a id="a74" name="a74"></a><a class="code hl_variable" href="../../d1/dfd/structiav__vout__sync__img__osd__t.html#a049a525f0e8bc8bee106f89f18f896ce">vout_id</a> = 1;</div>
<div class="line">    img_osd.<a id="a75" name="a75"></a><a class="code hl_variable" href="../../d1/dfd/structiav__vout__sync__img__osd__t.html#a86aeba28d29d66cabf04b7851230a96f">img_luma_addr</a> = y_vect-&gt;<a class="code hl_variable" href="../../df/d51/structvect__desc__t.html#ac0d7d4727c50cb5436655cb70778fb03">data_addr</a>;</div>
<div class="line">    img_osd.<a id="a76" name="a76"></a><a class="code hl_variable" href="../../d1/dfd/structiav__vout__sync__img__osd__t.html#ac88318425e6cf9b81a3a10687ef53dc4">img_chroma_addr</a> = uv_vect-&gt;<a class="code hl_variable" href="../../df/d51/structvect__desc__t.html#ac0d7d4727c50cb5436655cb70778fb03">data_addr</a>;</div>
<div class="line">    img_osd.<a id="a77" name="a77"></a><a class="code hl_variable" href="../../d1/dfd/structiav__vout__sync__img__osd__t.html#a137bd648638b6572ac111f8f56888eda">img_pitch</a> = y_vect-&gt;<a class="code hl_variable" href="../../df/d51/structvect__desc__t.html#a169952c253c9909a5f727afaec738893">pitch</a>;</div>
<div class="line">    <span class="keywordflow">if</span> (ioctl(iav_inf-&gt;fd_iav, <a id="a78" name="a78"></a><a class="code hl_define" href="../../d1/d1a/group__iav-ioctl-vout-api.html#gab14d640893fe44e6d9795024d27e78e1">IAV_IOC_VOUT_SYNC_IMG_OSD</a>, &amp;img_osd) &lt; 0) {</div>
<div class="line">        printf(<span class="stringliteral">&quot;IAV_IOC_VOUT_SYNC_IMG_OSD error!\n&quot;</span>);</div>
<div class="line">        <span class="keywordflow">return</span> -1;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">return</span> 0;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">int</span> frame_buffer_init(uint8_t <a id="a79" name="a79"></a>vout_id, fb_t *fb_inf)</div>
<div class="line">{</div>
<div class="line">    <a id="_a80" name="_a80"></a><a class="code hl_struct" href="../../d3/d93/structsmartfb__init__t.html">smartfb_init_t</a> fb_type;</div>
<div class="line">    <span class="keyword">struct </span>fb_var_screeninfo var;</div>
<div class="line">    fb_type.<a id="a81" name="a81"></a><a class="code hl_variable" href="../../d3/d93/structsmartfb__init__t.html#acc236d9fa6afdd015974d2e963d37f20">vout</a> = (<a id="a82" name="a82"></a><a class="code hl_enumeration" href="../../d3/d3f/group__SmartFB-helper.html#ga24f8d0e6e69fe22fb6212eecd6d7d69c">smartfb_vout_id</a>)vout_id;</div>
<div class="line">    memset(&amp;fb_box, 0, <span class="keyword">sizeof</span>(<a class="code hl_struct" href="../../dc/d33/structsmartfb__box__t.html">smartfb_box_t</a>));</div>
<div class="line">    memset(&amp;fb_textbox, 0, <span class="keyword">sizeof</span>(<a class="code hl_struct" href="../../dd/d07/structsmartfb__textbox__t.html">smartfb_textbox_t</a>));</div>
<div class="line">    <span class="keywordflow">if</span> (<a id="a83" name="a83"></a><a class="code hl_function" href="../../df/d1d/group__SmartFB-api.html#ga347c0b34a8d388ca39ad2cf7d461e92f">smartfb_init</a>(&amp;fb_type) &lt; 0) {</div>
<div class="line">        <span class="keywordflow">return</span> -1;</div>
<div class="line">    }</div>
<div class="line">    <a id="a84" name="a84"></a><a class="code hl_function" href="../../df/d1d/group__SmartFB-api.html#gace92396e59f4602c2ee9b03d04909a01">smartfb_get_var</a>(&amp;var);</div>
<div class="line">    fb_inf-&gt;width = var.xres;</div>
<div class="line">    fb_inf-&gt;height = var.yres;</div>
<div class="line">    fb_inf-&gt;pitch = ((var.xres - 1) / 32 + 1) * 32;</div>
<div class="line">    <span class="keywordflow">return</span> 0;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">int</span> vproc_cavalry_init(vproc_cavalry_t *vpc_info, <span class="keywordtype">char</span>* vproc_bin_path)</div>
<div class="line">{</div>
<div class="line">    uint32_t size;</div>
<div class="line">    <span class="keywordflow">if</span> ((vpc_info-&gt;fd_cavalry = open(<span class="stringliteral">&quot;/dev/cavalry&quot;</span>, O_RDWR, 0)) &lt; 0) {</div>
<div class="line">        perror(<span class="stringliteral">&quot;/dev/cavalry&quot;</span>);</div>
<div class="line">        <span class="keywordflow">return</span> -1;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> (<a id="a85" name="a85"></a><a class="code hl_function" href="../../d3/dbf/group__cavalry__mem-api-details.html#ga201938043385c5764ad3e2f4df21343d">cavalry_mem_init</a>(vpc_info-&gt;fd_cavalry, 0) &lt; 0) {</div>
<div class="line">        printf(<span class="stringliteral">&quot;cavalry_mem_init err\n&quot;</span>);</div>
<div class="line">        <span class="keywordflow">return</span> -1;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> (<a id="a86" name="a86"></a><a class="code hl_function" href="../../d5/d03/group__vproc-api-details.html#ga0bb807d2e99af893e9e0a0881c0dac52">vproc_init</a>(vproc_bin_path, &amp;size) &lt; 0) {</div>
<div class="line">        printf(<span class="stringliteral">&quot;vproc_init err\n&quot;</span>);</div>
<div class="line">        <span class="keywordflow">return</span> -1;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    memset(&amp;vpc_info-&gt;lib_mem, 0, <span class="keyword">sizeof</span>(vpc_info-&gt;lib_mem));</div>
<div class="line">    vpc_info-&gt;lib_mem.size = size;</div>
<div class="line">    <span class="keywordflow">if</span> (<a class="code hl_function" href="../../d3/dbf/group__cavalry__mem-api-details.html#ga78fe436b7764d49520410be725783432">cavalry_mem_alloc</a>(&amp;vpc_info-&gt;lib_mem.size, &amp;vpc_info-&gt;lib_mem.phys, &amp;vpc_info-&gt;lib_mem.virt, 0) &lt; 0) {</div>
<div class="line">        printf(<span class="stringliteral">&quot;cavalry_mem_alloc err\n&quot;</span>);</div>
<div class="line">        <span class="keywordflow">return</span> -1;</div>
<div class="line">    }</div>
<div class="line">    <a id="a87" name="a87"></a><a class="code hl_function" href="../../d5/d03/group__vproc-api-details.html#gafc636587c0dd71b4704571ff558a7bea">vproc_load</a>(vpc_info-&gt;fd_cavalry, (uint8_t*)vpc_info-&gt;lib_mem.virt, vpc_info-&gt;lib_mem.phys, size);</div>
<div class="line">    <span class="keywordflow">return</span> 0;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">int</span> <a id="a88" name="a88"></a><a class="code hl_function" href="../../dc/d60/test__smartfb_8c.html#a3c04138a5bfe5d72780bb7e82a18e627">main</a>(<span class="keywordtype">int</span> argc, <span class="keywordtype">char</span> **argv)</div>
<div class="line">{</div>
<div class="line">    uint64_t    run_loop_cnt = 0;</div>
<div class="line">    uint8_t run_scene = 0;</div>
<div class="line">    uint8_t run_dt = 0;</div>
<div class="line">    <span class="keyword">struct </span>timeval tv1, tv2, tv3;</div>
<div class="line">    fb_t fb_inf;</div>
<div class="line">    iav_t iav_inf;</div>
<div class="line">    <span class="keyword">struct </span><a class="code hl_struct" href="../../d8/de5/structiav__querydesc.html">iav_querydesc</a> query_desc;</div>
<div class="line"> </div>
<div class="line">    vproc_cavalry_t vpc_inf;</div>
<div class="line">    <span class="keywordtype">char</span>    draw_string[128];</div>
<div class="line">    cv_mem_t    yout_mem, uvout_mem, qentro_out_mem;</div>
<div class="line">    <a class="code hl_struct" href="../../df/d51/structvect__desc__t.html">vect_desc_t</a> yin_vect, uvin_vect, yout_vect, uvout_vect, qentro_out_vect;</div>
<div class="line"> </div>
<div class="line">    signal(SIGINT, sigstop);</div>
<div class="line">    signal(SIGQUIT, sigstop);</div>
<div class="line">    signal(SIGTERM, sigstop);</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> (argc &lt; 2) {</div>
<div class="line">        <a class="code hl_function" href="../../dc/d60/test__smartfb_8c.html#ad96d407a911fbb914fa8e4cfbf2faf0f">usage</a>();</div>
<div class="line">        <span class="keywordflow">return</span> 0;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> (init_param(argc, argv) &lt; 0) {</div>
<div class="line">        <span class="keywordflow">return</span> -1;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> (initial_iav_canvas(&amp;iav_inf,param_buf_id, 0) &lt; 0){</div>
<div class="line">        <span class="keywordflow">return</span> -1;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> (frame_buffer_init(<a id="a89" name="a89"></a><a class="code hl_enumvalue" href="../../d3/d3f/group__SmartFB-helper.html#gga24f8d0e6e69fe22fb6212eecd6d7d69cab7802e9dae736c89e55473de77737d2d">SMARTFB_ANALOG_VOUT</a>,&amp;fb_inf) &lt; 0) {</div>
<div class="line">        printf(<span class="stringliteral">&quot;init smartfb failed\n&quot;</span>);</div>
<div class="line">        <span class="keywordflow">return</span> -1;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    vproc_cavalry_init(&amp;vpc_inf, vproc_bin_path);</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">do</span> {</div>
<div class="line">        <span class="keywordflow">if</span> (<a id="a90" name="a90"></a><a class="code hl_function" href="../../d5/d03/group__vproc-api-details.html#ga66acd7c9b37dbc4eb3f3842fb756a2a3">vproc_cvfilter_init</a>() &lt; 0){</div>
<div class="line">            printf(<span class="stringliteral">&quot;vproc_cvfilter_init err\n&quot;</span>);</div>
<div class="line">            <span class="keywordflow">break</span>;</div>
<div class="line">            }</div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">if</span> (get_yuv_data_from_iav_canvas(&amp;iav_inf, &amp;query_desc,  &amp;yin_vect, &amp;uvin_vect) &lt; 0 ){</div>
<div class="line">            printf(<span class="stringliteral">&quot;fails at get_y_data_from_iav_canvas()\n&quot;</span>);</div>
<div class="line">            <span class="keywordflow">break</span>;</div>
<div class="line">        }</div>
<div class="line"> </div>
<div class="line">        create_vect(&amp;yout_vect, &amp;yout_mem, yin_vect.<a class="code hl_variable" href="../../df/d51/structvect__desc__t.html#ae30613371d9332251793d73dd1cffb4a">shape</a>.<a class="code hl_variable" href="../../d3/dfe/structvect__shape__t.html#a50d0f0f0767450a76d736d60766c9999">h</a>, yin_vect.<a class="code hl_variable" href="../../df/d51/structvect__desc__t.html#a169952c253c9909a5f727afaec738893">pitch</a>,</div>
<div class="line">                    yin_vect.<a class="code hl_variable" href="../../df/d51/structvect__desc__t.html#ae30613371d9332251793d73dd1cffb4a">shape</a>.<a class="code hl_variable" href="../../d3/dfe/structvect__shape__t.html#a3808cd021ae482979b2c4e49e1fab2e3">d</a>, <span class="keyword">sizeof</span>(uint8_t), 1);</div>
<div class="line">        yout_vect.<a class="code hl_variable" href="../../df/d51/structvect__desc__t.html#a96eedf1bc368872e2a9b5452170dee85">data_format</a>.<a class="code hl_variable" href="../../d4/d7a/structdata__format__t.html#a98b4563c5f811938ca031a7553ae81e3">sign</a> = 0;</div>
<div class="line">        yout_vect.<a class="code hl_variable" href="../../df/d51/structvect__desc__t.html#a96eedf1bc368872e2a9b5452170dee85">data_format</a>.<a class="code hl_variable" href="../../d4/d7a/structdata__format__t.html#a9b6214ecd62318c384c2e83d11edd034">datasize</a> = 0;</div>
<div class="line">        yout_vect.<a class="code hl_variable" href="../../df/d51/structvect__desc__t.html#a96eedf1bc368872e2a9b5452170dee85">data_format</a>.<a class="code hl_variable" href="../../d4/d7a/structdata__format__t.html#aececd150ca276030727a270d1818c206">exp_offset</a> = 0;</div>
<div class="line">        yout_vect.<a class="code hl_variable" href="../../df/d51/structvect__desc__t.html#a96eedf1bc368872e2a9b5452170dee85">data_format</a>.<a class="code hl_variable" href="../../d4/d7a/structdata__format__t.html#a7e7136211ff9abfc5b164dbabd4fedbd">exp_bits</a> = 0;</div>
<div class="line">        yout_vect.<a class="code hl_variable" href="../../df/d51/structvect__desc__t.html#ae30613371d9332251793d73dd1cffb4a">shape</a>.<a class="code hl_variable" href="../../d3/dfe/structvect__shape__t.html#ad0fb62e7a08e70fc5e0a76b67809f84b">w</a> = yin_vect.<a class="code hl_variable" href="../../df/d51/structvect__desc__t.html#ae30613371d9332251793d73dd1cffb4a">shape</a>.<a class="code hl_variable" href="../../d3/dfe/structvect__shape__t.html#ad0fb62e7a08e70fc5e0a76b67809f84b">w</a>;</div>
<div class="line"> </div>
<div class="line">        create_vect(&amp;uvout_vect, &amp;uvout_mem, yin_vect.<a class="code hl_variable" href="../../df/d51/structvect__desc__t.html#ae30613371d9332251793d73dd1cffb4a">shape</a>.<a class="code hl_variable" href="../../d3/dfe/structvect__shape__t.html#a50d0f0f0767450a76d736d60766c9999">h</a>, yin_vect.<a class="code hl_variable" href="../../df/d51/structvect__desc__t.html#a169952c253c9909a5f727afaec738893">pitch</a>,</div>
<div class="line">                    yin_vect.<a class="code hl_variable" href="../../df/d51/structvect__desc__t.html#ae30613371d9332251793d73dd1cffb4a">shape</a>.<a class="code hl_variable" href="../../d3/dfe/structvect__shape__t.html#a3808cd021ae482979b2c4e49e1fab2e3">d</a>, <span class="keyword">sizeof</span>(uint8_t), 1);</div>
<div class="line">        uvout_vect.<a class="code hl_variable" href="../../df/d51/structvect__desc__t.html#a96eedf1bc368872e2a9b5452170dee85">data_format</a>.<a class="code hl_variable" href="../../d4/d7a/structdata__format__t.html#a98b4563c5f811938ca031a7553ae81e3">sign</a> = 0;</div>
<div class="line">        uvout_vect.<a class="code hl_variable" href="../../df/d51/structvect__desc__t.html#a96eedf1bc368872e2a9b5452170dee85">data_format</a>.<a class="code hl_variable" href="../../d4/d7a/structdata__format__t.html#a9b6214ecd62318c384c2e83d11edd034">datasize</a> = 0;</div>
<div class="line">        uvout_vect.<a class="code hl_variable" href="../../df/d51/structvect__desc__t.html#a96eedf1bc368872e2a9b5452170dee85">data_format</a>.<a class="code hl_variable" href="../../d4/d7a/structdata__format__t.html#aececd150ca276030727a270d1818c206">exp_offset</a> = 0;</div>
<div class="line">        uvout_vect.<a class="code hl_variable" href="../../df/d51/structvect__desc__t.html#a96eedf1bc368872e2a9b5452170dee85">data_format</a>.<a class="code hl_variable" href="../../d4/d7a/structdata__format__t.html#a7e7136211ff9abfc5b164dbabd4fedbd">exp_bits</a> = 0;</div>
<div class="line">        uvout_vect.<a class="code hl_variable" href="../../df/d51/structvect__desc__t.html#ae30613371d9332251793d73dd1cffb4a">shape</a>.<a class="code hl_variable" href="../../d3/dfe/structvect__shape__t.html#ad0fb62e7a08e70fc5e0a76b67809f84b">w</a> = yin_vect.<a class="code hl_variable" href="../../df/d51/structvect__desc__t.html#ae30613371d9332251793d73dd1cffb4a">shape</a>.<a class="code hl_variable" href="../../d3/dfe/structvect__shape__t.html#ad0fb62e7a08e70fc5e0a76b67809f84b">w</a>;</div>
<div class="line"> </div>
<div class="line">        create_vect(&amp;qentro_out_vect, &amp;qentro_out_mem, 1, 1, 1, <span class="keyword">sizeof</span>(uint32_t), 0);</div>
<div class="line">        qentro_out_vect.<a class="code hl_variable" href="../../df/d51/structvect__desc__t.html#a96eedf1bc368872e2a9b5452170dee85">data_format</a>.<a class="code hl_variable" href="../../d4/d7a/structdata__format__t.html#a98b4563c5f811938ca031a7553ae81e3">sign</a> = 1;</div>
<div class="line">        qentro_out_vect.<a class="code hl_variable" href="../../df/d51/structvect__desc__t.html#a96eedf1bc368872e2a9b5452170dee85">data_format</a>.<a class="code hl_variable" href="../../d4/d7a/structdata__format__t.html#a9b6214ecd62318c384c2e83d11edd034">datasize</a> = 2;</div>
<div class="line">        qentro_out_vect.<a class="code hl_variable" href="../../df/d51/structvect__desc__t.html#a96eedf1bc368872e2a9b5452170dee85">data_format</a>.<a class="code hl_variable" href="../../d4/d7a/structdata__format__t.html#aececd150ca276030727a270d1818c206">exp_offset</a> = 0;</div>
<div class="line">        qentro_out_vect.<a class="code hl_variable" href="../../df/d51/structvect__desc__t.html#a96eedf1bc368872e2a9b5452170dee85">data_format</a>.<a class="code hl_variable" href="../../d4/d7a/structdata__format__t.html#a7e7136211ff9abfc5b164dbabd4fedbd">exp_bits</a> = 7;</div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">while</span>(live_running_flag){</div>
<div class="line">            <span class="keywordflow">if</span> (get_yuv_data_from_iav_canvas(&amp;iav_inf, &amp;query_desc,  &amp;yin_vect, &amp;uvin_vect) &lt; 0 ){</div>
<div class="line">                printf(<span class="stringliteral">&quot;fails at get_yuv_data_from_iav_canvas()\n&quot;</span>);</div>
<div class="line">                <span class="keywordflow">break</span>;</div>
<div class="line">            }</div>
<div class="line"> </div>
<div class="line">            <a id="a91" name="a91"></a><a class="code hl_function" href="../../d5/d03/group__vproc-api-details.html#gabe02fe589e89be15f212d4487ccf956a">vproc_memcpy</a>(uvout_vect.<a class="code hl_variable" href="../../df/d51/structvect__desc__t.html#ac0d7d4727c50cb5436655cb70778fb03">data_addr</a>, uvin_vect.<a class="code hl_variable" href="../../df/d51/structvect__desc__t.html#ac0d7d4727c50cb5436655cb70778fb03">data_addr</a>, yin_vect.<a class="code hl_variable" href="../../df/d51/structvect__desc__t.html#ae30613371d9332251793d73dd1cffb4a">shape</a>.<a class="code hl_variable" href="../../d3/dfe/structvect__shape__t.html#a50d0f0f0767450a76d736d60766c9999">h</a> * yin_vect.<a class="code hl_variable" href="../../df/d51/structvect__desc__t.html#a169952c253c9909a5f727afaec738893">pitch</a> );</div>
<div class="line"> </div>
<div class="line">            <span class="keywordflow">if</span> (run_mode == EPNR_RUN_ORIGIN) {      <span class="comment">//original out</span></div>
<div class="line">                run_dt = 0;</div>
<div class="line">                run_scene = EPNR_RUN_ORIGIN;</div>
<div class="line">            }<span class="keywordflow">else</span> <span class="keywordflow">if</span> (run_mode == EPNR_RUN_LPFILTER) {  <span class="comment">//LP filter out</span></div>
<div class="line">                run_scene = EPNR_RUN_LPFILTER;</div>
<div class="line">            }<span class="keywordflow">else</span> <span class="keywordflow">if</span> (run_mode == EPNR_RUN_DENOISE) {   <span class="comment">//denoise out</span></div>
<div class="line">                run_scene = EPNR_RUN_DENOISE;</div>
<div class="line">                run_dt = dt_val;</div>
<div class="line">            }<span class="keywordflow">else</span> <span class="keywordflow">if</span> (run_mode == EPNR_RUN_LOOP3 &amp;&amp; run_loop_cnt == 0){ <span class="comment">//loop running</span></div>
<div class="line">                run_scene = EPNR_RUN_ORIGIN;</div>
<div class="line">                run_dt = 0;</div>
<div class="line">            }</div>
<div class="line"> </div>
<div class="line">            <span class="keywordflow">if</span> (measure_time_flag) {</div>
<div class="line">                gettimeofday(&amp;tv1, NULL);</div>
<div class="line">            }</div>
<div class="line">            <span class="keywordflow">if</span> (run_scene == EPNR_RUN_LPFILTER){</div>
<div class="line">                <span class="keywordflow">if</span>(<a id="a92" name="a92"></a><a class="code hl_function" href="../../d5/d03/group__vproc-api-details.html#ga412b8da8d5df57b88341c39cfcba64ae">vproc_lpcvfilter</a>(&amp;yin_vect, lp_cvfilter_ker_vect.data,</div>
<div class="line">                    lp_cvfilter_ker_vect.h, lp_cvfilter_ker_vect.w, &amp;yout_vect)&lt;0){</div>
<div class="line">                    printf(<span class="stringliteral">&quot;fails at low pass filter, vproc_lpcvfilter()\n&quot;</span>);</div>
<div class="line">                    <span class="keywordflow">break</span>;</div>
<div class="line">                }</div>
<div class="line">            }<span class="keywordflow">else</span>{</div>
<div class="line">                <span class="keywordflow">if</span> (<a id="a93" name="a93"></a><a class="code hl_function" href="../../d5/d03/group__vproc-api-details.html#ga8c5ba0e4ff6d88b9b788d25603ad4d68">vproc_epnr</a>(&amp;yin_vect, &amp;yout_vect, run_dt) &lt; 0){</div>
<div class="line">                    printf(<span class="stringliteral">&quot;fails at vproc_epnr()\n&quot;</span>);</div>
<div class="line">                    exit(-1);</div>
<div class="line">                }</div>
<div class="line">            }</div>
<div class="line"> </div>
<div class="line">            <span class="keywordflow">if</span> (measure_time_flag) {</div>
<div class="line">                gettimeofday(&amp;tv2, NULL);</div>
<div class="line">                printf(<span class="stringliteral">&quot;epnr takes %ld us Per loop\n&quot;</span>,</div>
<div class="line">                    (tv2.tv_sec - tv1.tv_sec) * 1000000 + (tv2.tv_usec - tv1.tv_usec));</div>
<div class="line">            }</div>
<div class="line"> </div>
<div class="line">            custom_vout(&amp;iav_inf, &amp;yout_vect, &amp;uvout_vect);</div>
<div class="line"> </div>
<div class="line">            <span class="keywordflow">if</span> (<a id="a94" name="a94"></a><a class="code hl_function" href="../../df/d1d/group__SmartFB-api.html#gae544e9c8eecff31b68c03769939108f5">smartfb_clear_buffer</a>() &lt; 0){</div>
<div class="line">                <span class="keywordflow">return</span> -1;</div>
<div class="line">            }</div>
<div class="line"> </div>
<div class="line">            <span class="keywordflow">if</span> (run_scene ==EPNR_RUN_ORIGIN){</div>
<div class="line">                snprintf(draw_string, <span class="keyword">sizeof</span>(draw_string), <span class="stringliteral">&quot;origin, %ld&quot;</span>, run_loop_cnt);</div>
<div class="line">            }<span class="keywordflow">else</span> <span class="keywordflow">if</span> (run_scene ==EPNR_RUN_LPFILTER){</div>
<div class="line">                snprintf(draw_string, <span class="keyword">sizeof</span>(draw_string), <span class="stringliteral">&quot;LP filter, %ld&quot;</span>, run_loop_cnt);</div>
<div class="line">            }<span class="keywordflow">else</span> <span class="keywordflow">if</span> (run_scene == EPNR_RUN_DENOISE){</div>
<div class="line">                snprintf(draw_string, <span class="keyword">sizeof</span>(draw_string), <span class="stringliteral">&quot;EPNR, %ld&quot;</span>, run_loop_cnt);</div>
<div class="line">            }</div>
<div class="line"> </div>
<div class="line">            smartfb_draw_text(draw_string, 700, 30, 40, 1, 200,</div>
<div class="line">                <a id="a95" name="a95"></a><a class="code hl_enumvalue" href="../../d3/d3f/group__SmartFB-helper.html#ggad7e4de5c6057a0cab0e6ada35101a2f2a522699f409bb6e592be1b61a755f545d">SMARTFB_COLOR_WHITE</a>, <a id="a96" name="a96"></a><a class="code hl_enumvalue" href="../../d3/d3f/group__SmartFB-helper.html#gga3dac4432c8e7ea3db6cb7305486ed5ffa450c186dece7daa201ac549a4d28526b">SMARTFB_ALPHA_LEVEL0</a>);</div>
<div class="line">            <span class="keywordflow">if</span> (<a id="a97" name="a97"></a><a class="code hl_function" href="../../df/d1d/group__SmartFB-api.html#gaed20c8b8a98a2607e3b8441e44b350e5">smartfb_display</a>() &lt; 0){</div>
<div class="line">                exit(-1);</div>
<div class="line">            }</div>
<div class="line"> </div>
<div class="line">            <span class="keywordflow">if</span> ( run_mode ==EPNR_RUN_LOOP3){</div>
<div class="line">                <span class="keywordflow">if</span> (run_loop_cnt % 50 ==0){</div>
<div class="line">                    <span class="keywordflow">if</span> (run_scene ==EPNR_RUN_ORIGIN){</div>
<div class="line">                        run_scene = EPNR_RUN_LPFILTER;</div>
<div class="line">                    }<span class="keywordflow">else</span> <span class="keywordflow">if</span> (run_scene ==EPNR_RUN_LPFILTER){</div>
<div class="line">                        run_scene = EPNR_RUN_DENOISE;</div>
<div class="line">                        run_dt = dt_val;</div>
<div class="line">                    }<span class="keywordflow">else</span> <span class="keywordflow">if</span> (run_scene == EPNR_RUN_DENOISE){</div>
<div class="line">                        run_scene = EPNR_RUN_ORIGIN;</div>
<div class="line">                        run_dt = 0;</div>
<div class="line">                    }</div>
<div class="line">                }</div>
<div class="line">            }<span class="keywordflow">else</span> <span class="keywordflow">if</span> ( run_mode ==EPNR_RUN_LOOP2){</div>
<div class="line">                <span class="keywordflow">if</span> (run_loop_cnt % 50 ==0){</div>
<div class="line">                    <span class="keywordflow">if</span> (run_scene ==EPNR_RUN_ORIGIN){</div>
<div class="line">                        run_scene = EPNR_RUN_DENOISE;</div>
<div class="line">                        run_dt = dt_val;</div>
<div class="line">                    }<span class="keywordflow">else</span> <span class="keywordflow">if</span> (run_scene == EPNR_RUN_DENOISE){</div>
<div class="line">                        run_scene = EPNR_RUN_ORIGIN;</div>
<div class="line">                        run_dt = 0;</div>
<div class="line">                    }</div>
<div class="line">                }</div>
<div class="line">            }</div>
<div class="line"> </div>
<div class="line">            <span class="keywordflow">if</span> (measure_time_flag) {</div>
<div class="line">                gettimeofday(&amp;tv3, NULL);</div>
<div class="line">                printf(<span class="stringliteral">&quot;whole loop takes %ld us\n&quot;</span>,</div>
<div class="line">                    (tv3.tv_sec - tv1.tv_sec) * 1000000 + (tv3.tv_usec - tv1.tv_usec));</div>
<div class="line">            }</div>
<div class="line"> </div>
<div class="line">            run_loop_cnt++;</div>
<div class="line">        }</div>
<div class="line">    } <span class="keywordflow">while</span> (0);</div>
<div class="line"> </div>
<div class="line">    free_vmem(&amp;yout_mem);</div>
<div class="line">    free_vmem(&amp;vpc_inf.lib_mem);</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">return</span> 0;</div>
<div class="line">}</div>
<div class="ttc" id="acJSON_8h_html_a25d22ecc7e656d2c59332072684e8766"><div class="ttname"><a href="../../d1/d82/cJSON_8h.html#a25d22ecc7e656d2c59332072684e8766">name</a></div><div class="ttdeci">const char *const name</div><div class="ttdef"><b>Definition:</b> cJSON.h:264</div></div>
<div class="ttc" id="acavalry__mem_8h_html"><div class="ttname"><a href="../../de/db0/cavalry__mem_8h.html">cavalry_mem.h</a></div></div>
<div class="ttc" id="agroup__SmartFB-api_html_ga347c0b34a8d388ca39ad2cf7d461e92f"><div class="ttname"><a href="../../df/d1d/group__SmartFB-api.html#ga347c0b34a8d388ca39ad2cf7d461e92f">smartfb_init</a></div><div class="ttdeci">AMBA_API int smartfb_init(smartfb_init_t *fb_init)</div><div class="ttdef"><b>Definition:</b> lib_smartfb.c:1313</div></div>
<div class="ttc" id="agroup__SmartFB-api_html_gace92396e59f4602c2ee9b03d04909a01"><div class="ttname"><a href="../../df/d1d/group__SmartFB-api.html#gace92396e59f4602c2ee9b03d04909a01">smartfb_get_var</a></div><div class="ttdeci">AMBA_API int smartfb_get_var(struct fb_var_screeninfo *fb_var)</div><div class="ttdef"><b>Definition:</b> lib_smartfb.c:1675</div></div>
<div class="ttc" id="agroup__SmartFB-api_html_gae544e9c8eecff31b68c03769939108f5"><div class="ttname"><a href="../../df/d1d/group__SmartFB-api.html#gae544e9c8eecff31b68c03769939108f5">smartfb_clear_buffer</a></div><div class="ttdeci">AMBA_API int smartfb_clear_buffer(void)</div><div class="ttdef"><b>Definition:</b> lib_smartfb.c:1971</div></div>
<div class="ttc" id="agroup__SmartFB-api_html_gaed20c8b8a98a2607e3b8441e44b350e5"><div class="ttname"><a href="../../df/d1d/group__SmartFB-api.html#gaed20c8b8a98a2607e3b8441e44b350e5">smartfb_display</a></div><div class="ttdeci">AMBA_API int smartfb_display(void)</div><div class="ttdef"><b>Definition:</b> lib_smartfb.c:1470</div></div>
<div class="ttc" id="agroup__SmartFB-api_html_gafabe2068c0a376e56c612c215bc286da"><div class="ttname"><a href="../../df/d1d/group__SmartFB-api.html#gafabe2068c0a376e56c612c215bc286da">smartfb_draw_textbox</a></div><div class="ttdeci">AMBA_API int smartfb_draw_textbox(smartfb_textbox_t *fb_textbox)</div><div class="ttdef"><b>Definition:</b> lib_smartfb.c:1777</div></div>
<div class="ttc" id="agroup__SmartFB-helper_html_ga24f8d0e6e69fe22fb6212eecd6d7d69c"><div class="ttname"><a href="../../d3/d3f/group__SmartFB-helper.html#ga24f8d0e6e69fe22fb6212eecd6d7d69c">smartfb_vout_id</a></div><div class="ttdeci">smartfb_vout_id</div><div class="ttdoc">Define the output type of SmartFB.</div><div class="ttdef"><b>Definition:</b> lib_smartfb.h:60</div></div>
<div class="ttc" id="agroup__SmartFB-helper_html_gga24f8d0e6e69fe22fb6212eecd6d7d69cab7802e9dae736c89e55473de77737d2d"><div class="ttname"><a href="../../d3/d3f/group__SmartFB-helper.html#gga24f8d0e6e69fe22fb6212eecd6d7d69cab7802e9dae736c89e55473de77737d2d">SMARTFB_ANALOG_VOUT</a></div><div class="ttdeci">@ SMARTFB_ANALOG_VOUT</div><div class="ttdef"><b>Definition:</b> lib_smartfb.h:62</div></div>
<div class="ttc" id="agroup__SmartFB-helper_html_gga3dac4432c8e7ea3db6cb7305486ed5ffa450c186dece7daa201ac549a4d28526b"><div class="ttname"><a href="../../d3/d3f/group__SmartFB-helper.html#gga3dac4432c8e7ea3db6cb7305486ed5ffa450c186dece7daa201ac549a4d28526b">SMARTFB_ALPHA_LEVEL0</a></div><div class="ttdeci">@ SMARTFB_ALPHA_LEVEL0</div><div class="ttdef"><b>Definition:</b> lib_smartfb.h:112</div></div>
<div class="ttc" id="agroup__SmartFB-helper_html_ggad7e4de5c6057a0cab0e6ada35101a2f2a522699f409bb6e592be1b61a755f545d"><div class="ttname"><a href="../../d3/d3f/group__SmartFB-helper.html#ggad7e4de5c6057a0cab0e6ada35101a2f2a522699f409bb6e592be1b61a755f545d">SMARTFB_COLOR_WHITE</a></div><div class="ttdeci">@ SMARTFB_COLOR_WHITE</div><div class="ttdef"><b>Definition:</b> lib_smartfb.h:103</div></div>
<div class="ttc" id="agroup__cavalry__mem-api-details_html_ga201938043385c5764ad3e2f4df21343d"><div class="ttname"><a href="../../d3/dbf/group__cavalry__mem-api-details.html#ga201938043385c5764ad3e2f4df21343d">cavalry_mem_init</a></div><div class="ttdeci">AMBA_API int cavalry_mem_init(IN int fd_cav, IN uint8_t verbose)</div></div>
<div class="ttc" id="agroup__cavalry__mem-api-details_html_ga78fe436b7764d49520410be725783432"><div class="ttname"><a href="../../d3/dbf/group__cavalry__mem-api-details.html#ga78fe436b7764d49520410be725783432">cavalry_mem_alloc</a></div><div class="ttdeci">AMBA_API int cavalry_mem_alloc(IN unsigned long *psize, OUT unsigned long *pphys, OUT void **pvirt, IN uint8_t cache_en)</div></div>
<div class="ttc" id="agroup__cavalry__mem-api-details_html_gae80d26c23fcc3eb0f578f32647f90a7a"><div class="ttname"><a href="../../d3/dbf/group__cavalry__mem-api-details.html#gae80d26c23fcc3eb0f578f32647f90a7a">cavalry_mem_free</a></div><div class="ttdeci">AMBA_API int cavalry_mem_free(IN unsigned long size, IN unsigned long phys, IN void *virt)</div></div>
<div class="ttc" id="agroup__iav-ioc-enc-use-drv_html_gaeaad4e2420887b9b769ecb322c16c1ac"><div class="ttname"><a href="../../df/d17/group__iav-ioc-enc-use-drv.html#gaeaad4e2420887b9b769ecb322c16c1ac">IAV_IOC_GET_IAV_STATE</a></div><div class="ttdeci">#define IAV_IOC_GET_IAV_STATE</div><div class="ttdef"><b>Definition:</b> iav_ioctl.h:4164</div></div>
<div class="ttc" id="agroup__iav-ioc-enc-use-drv_html_gafa8b43da12bfe905cd91b143a7670c0a"><div class="ttname"><a href="../../df/d17/group__iav-ioc-enc-use-drv.html#gafa8b43da12bfe905cd91b143a7670c0a">IAV_IOC_QUERY_INFO</a></div><div class="ttdeci">#define IAV_IOC_QUERY_INFO</div><div class="ttdef"><b>Definition:</b> iav_ioctl.h:4198</div></div>
<div class="ttc" id="agroup__iav-ioc-enc-use-mem_html_ga9087cb6f84796c640fcf100cea43be09"><div class="ttname"><a href="../../da/d9a/group__iav-ioc-enc-use-mem.html#ga9087cb6f84796c640fcf100cea43be09">IAV_IOC_QUERY_DESC</a></div><div class="ttdeci">#define IAV_IOC_QUERY_DESC</div><div class="ttdef"><b>Definition:</b> iav_ioctl.h:4521</div></div>
<div class="ttc" id="agroup__iav-ioctl-general-helper_html_gga1a439af5ebc8b8d356cfc7bfc7929a22ac21f054d0af36e5602d4673fc27b74e9"><div class="ttname"><a href="../../d3/de3/group__iav-ioctl-general-helper.html#gga1a439af5ebc8b8d356cfc7bfc7929a22ac21f054d0af36e5602d4673fc27b74e9">IAV_INFO_CANVAS</a></div><div class="ttdeci">@ IAV_INFO_CANVAS</div><div class="ttdef"><b>Definition:</b> iav_ioctl.h:721</div></div>
<div class="ttc" id="agroup__iav-ioctl-general-helper_html_gga3606b35b652dca594dc455dfb0b9f172ad1eb61f9c66c08ad24169d01d4d0ee9e"><div class="ttname"><a href="../../d3/de3/group__iav-ioctl-general-helper.html#gga3606b35b652dca594dc455dfb0b9f172ad1eb61f9c66c08ad24169d01d4d0ee9e">IAV_DESC_CANVAS</a></div><div class="ttdeci">@ IAV_DESC_CANVAS</div><div class="ttdef"><b>Definition:</b> iav_ioctl.h:701</div></div>
<div class="ttc" id="agroup__iav-ioctl-general-helper_html_ggacac47b074a54b97e30e32e180b888f30a09c699e50b30d6f6043809ba4f87b1fc"><div class="ttname"><a href="../../d3/de3/group__iav-ioctl-general-helper.html#ggacac47b074a54b97e30e32e180b888f30a09c699e50b30d6f6043809ba4f87b1fc">IAV_BUFCAP_NONBLOCK</a></div><div class="ttdeci">@ IAV_BUFCAP_NONBLOCK</div><div class="ttdef"><b>Definition:</b> iav_ioctl.h:955</div></div>
<div class="ttc" id="agroup__iav-ioctl-general-helper_html_ggafc7fb94a411b7cedcb91492097fdb928a24f1c67d4886473779ceba84546aa9f4"><div class="ttname"><a href="../../d3/de3/group__iav-ioctl-general-helper.html#ggafc7fb94a411b7cedcb91492097fdb928a24f1c67d4886473779ceba84546aa9f4">IAV_STATE_PREVIEW</a></div><div class="ttdeci">@ IAV_STATE_PREVIEW</div><div class="ttdef"><b>Definition:</b> iav_ioctl.h:618</div></div>
<div class="ttc" id="agroup__iav-ioctl-general-helper_html_ggafc7fb94a411b7cedcb91492097fdb928a3f68c2db148568fb9fa0af2f4ca2fa38"><div class="ttname"><a href="../../d3/de3/group__iav-ioctl-general-helper.html#ggafc7fb94a411b7cedcb91492097fdb928a3f68c2db148568fb9fa0af2f4ca2fa38">IAV_STATE_ENCODING</a></div><div class="ttdeci">@ IAV_STATE_ENCODING</div><div class="ttdef"><b>Definition:</b> iav_ioctl.h:619</div></div>
<div class="ttc" id="agroup__iav-ioctl-vout-api_html_gab14d640893fe44e6d9795024d27e78e1"><div class="ttname"><a href="../../d1/d1a/group__iav-ioctl-vout-api.html#gab14d640893fe44e6d9795024d27e78e1">IAV_IOC_VOUT_SYNC_IMG_OSD</a></div><div class="ttdeci">#define IAV_IOC_VOUT_SYNC_IMG_OSD</div><div class="ttdef"><b>Definition:</b> iav_vout_ioctl.h:149</div></div>
<div class="ttc" id="agroup__vproc-api-details_html_ga0bb807d2e99af893e9e0a0881c0dac52"><div class="ttname"><a href="../../d5/d03/group__vproc-api-details.html#ga0bb807d2e99af893e9e0a0881c0dac52">vproc_init</a></div><div class="ttdeci">AMBA_API int vproc_init(IN const char *bin_name, IN_OUT uint32_t *size)</div></div>
<div class="ttc" id="agroup__vproc-api-details_html_ga412b8da8d5df57b88341c39cfcba64ae"><div class="ttname"><a href="../../d5/d03/group__vproc-api-details.html#ga412b8da8d5df57b88341c39cfcba64ae">vproc_lpcvfilter</a></div><div class="ttdeci">AMBA_API int vproc_lpcvfilter(IN vect_desc_t *im_vect, IN float *ker_content, IN uint32_t ker_h, IN uint32_t ker_w, OUT vect_desc_t *out_vect)</div></div>
<div class="ttc" id="agroup__vproc-api-details_html_ga66acd7c9b37dbc4eb3f3842fb756a2a3"><div class="ttname"><a href="../../d5/d03/group__vproc-api-details.html#ga66acd7c9b37dbc4eb3f3842fb756a2a3">vproc_cvfilter_init</a></div><div class="ttdeci">AMBA_API int vproc_cvfilter_init(void)</div></div>
<div class="ttc" id="agroup__vproc-api-details_html_ga8c5ba0e4ff6d88b9b788d25603ad4d68"><div class="ttname"><a href="../../d5/d03/group__vproc-api-details.html#ga8c5ba0e4ff6d88b9b788d25603ad4d68">vproc_epnr</a></div><div class="ttdeci">AMBA_API int vproc_epnr(vect_desc_t *in_vect, vect_desc_t *out_vect, uint8_t dt)</div></div>
<div class="ttc" id="agroup__vproc-api-details_html_gabe02fe589e89be15f212d4487ccf956a"><div class="ttname"><a href="../../d5/d03/group__vproc-api-details.html#gabe02fe589e89be15f212d4487ccf956a">vproc_memcpy</a></div><div class="ttdeci">AMBA_API int vproc_memcpy(IN cv_daddr_t dst_phy_addr, IN cv_daddr_t src_phy_addr, IN uint32_t size)</div></div>
<div class="ttc" id="agroup__vproc-api-details_html_gafc636587c0dd71b4704571ff558a7bea"><div class="ttname"><a href="../../d5/d03/group__vproc-api-details.html#gafc636587c0dd71b4704571ff558a7bea">vproc_load</a></div><div class="ttdeci">AMBA_API int vproc_load(IN int fd_cavalry, IN uint8_t *virt_addr, IN cv_daddr_t phy_addr, IN uint32_t size)</div></div>
<div class="ttc" id="agroup__vproc-helper_html_gga584ebcddad576d573a2f8f290cc435a4a1e749bf0931375566ae438d23d149b62"><div class="ttname"><a href="../../df/dd0/group__vproc-helper.html#gga584ebcddad576d573a2f8f290cc435a4a1e749bf0931375566ae438d23d149b62">CS_VECT</a></div><div class="ttdeci">@ CS_VECT</div><div class="ttdef"><b>Definition:</b> vproc.h:77</div></div>
<div class="ttc" id="aiav__ioctl_8h_html"><div class="ttname"><a href="../../de/d89/iav__ioctl_8h.html">iav_ioctl.h</a></div><div class="ttdoc">This file defines IAV driver ioctl api.</div></div>
<div class="ttc" id="alib__smartfb_8h_html"><div class="ttname"><a href="../../d9/d8f/lib__smartfb_8h.html">lib_smartfb.h</a></div><div class="ttdoc">This file shows the SmartFB library API.</div></div>
<div class="ttc" id="astructdata__format__t_html_a7e7136211ff9abfc5b164dbabd4fedbd"><div class="ttname"><a href="../../d4/d7a/structdata__format__t.html#a7e7136211ff9abfc5b164dbabd4fedbd">data_format_t::exp_bits</a></div><div class="ttdeci">int8_t exp_bits</div><div class="ttdef"><b>Definition:</b> vproc.h:267</div></div>
<div class="ttc" id="astructdata__format__t_html_a98b4563c5f811938ca031a7553ae81e3"><div class="ttname"><a href="../../d4/d7a/structdata__format__t.html#a98b4563c5f811938ca031a7553ae81e3">data_format_t::sign</a></div><div class="ttdeci">int8_t sign</div><div class="ttdef"><b>Definition:</b> vproc.h:264</div></div>
<div class="ttc" id="astructdata__format__t_html_a9b6214ecd62318c384c2e83d11edd034"><div class="ttname"><a href="../../d4/d7a/structdata__format__t.html#a9b6214ecd62318c384c2e83d11edd034">data_format_t::datasize</a></div><div class="ttdeci">int8_t datasize</div><div class="ttdef"><b>Definition:</b> vproc.h:265</div></div>
<div class="ttc" id="astructdata__format__t_html_aececd150ca276030727a270d1818c206"><div class="ttname"><a href="../../d4/d7a/structdata__format__t.html#aececd150ca276030727a270d1818c206">data_format_t::exp_offset</a></div><div class="ttdeci">int8_t exp_offset</div><div class="ttdef"><b>Definition:</b> vproc.h:266</div></div>
<div class="ttc" id="astructhint__s_html"><div class="ttname"><a href="../../../video/d2/d4b/structhint__s.html">hint_s</a></div></div>
<div class="ttc" id="astructhint__s_html_a2799cca21c05a4f99f4c8b3b178d0133"><div class="ttname"><a href="../../../video/d2/d4b/structhint__s.html#a2799cca21c05a4f99f4c8b3b178d0133">hint_s::str</a></div><div class="ttdeci">const char * str</div></div>
<div class="ttc" id="astructhint__s_html_aa56a50443afd9d2f7cf738fb7ffba168"><div class="ttname"><a href="../../../video/d2/d4b/structhint__s.html#aa56a50443afd9d2f7cf738fb7ffba168">hint_s::arg</a></div><div class="ttdeci">const char * arg</div></div>
<div class="ttc" id="astructiav__canvas__info_html"><div class="ttname"><a href="../../d5/d30/structiav__canvas__info.html">iav_canvas_info</a></div><div class="ttdef"><b>Definition:</b> iav_ioctl.h:1063</div></div>
<div class="ttc" id="astructiav__canvas__info_html_a2f1e22f38f7be358c963bc2a979fbf4d"><div class="ttname"><a href="../../d5/d30/structiav__canvas__info.html#a2f1e22f38f7be358c963bc2a979fbf4d">iav_canvas_info::canvas_id</a></div><div class="ttdeci">u32 canvas_id</div><div class="ttdef"><b>Definition:</b> iav_ioctl.h:1064</div></div>
<div class="ttc" id="astructiav__canvas__info_html_a36706adaf8155ec1f0ce5b2130f996fc"><div class="ttname"><a href="../../d5/d30/structiav__canvas__info.html#a36706adaf8155ec1f0ce5b2130f996fc">iav_canvas_info::mem_phys_addr</a></div><div class="ttdeci">unsigned long mem_phys_addr</div><div class="ttdef"><b>Definition:</b> iav_ioctl.h:1070</div></div>
<div class="ttc" id="astructiav__canvas__info_html_a6a21f902348c92a852a41a6ad83cf469"><div class="ttname"><a href="../../d5/d30/structiav__canvas__info.html#a6a21f902348c92a852a41a6ad83cf469">iav_canvas_info::mem_size</a></div><div class="ttdeci">unsigned long mem_size</div><div class="ttdef"><b>Definition:</b> iav_ioctl.h:1071</div></div>
<div class="ttc" id="astructiav__canvasdesc_html_a2f1e22f38f7be358c963bc2a979fbf4d"><div class="ttname"><a href="../../d5/dfb/structiav__canvasdesc.html#a2f1e22f38f7be358c963bc2a979fbf4d">iav_canvasdesc::canvas_id</a></div><div class="ttdeci">u32 canvas_id</div><div class="ttdef"><b>Definition:</b> iav_ioctl.h:2263</div></div>
<div class="ttc" id="astructiav__canvasdesc_html_ad1847147a26fa6e714478a599d584f45"><div class="ttname"><a href="../../d5/dfb/structiav__canvasdesc.html#ad1847147a26fa6e714478a599d584f45">iav_canvasdesc::yuv</a></div><div class="ttdeci">struct iav_yuv_cap yuv</div><div class="ttdef"><b>Definition:</b> iav_ioctl.h:2275</div></div>
<div class="ttc" id="astructiav__canvasdesc_html_ad4f2b1cfb6206d376dd2b024c7c15b9a"><div class="ttname"><a href="../../d5/dfb/structiav__canvasdesc.html#ad4f2b1cfb6206d376dd2b024c7c15b9a">iav_canvasdesc::non_block_flag</a></div><div class="ttdeci">u32 non_block_flag</div><div class="ttdef"><b>Definition:</b> iav_ioctl.h:2264</div></div>
<div class="ttc" id="astructiav__querydesc_html"><div class="ttname"><a href="../../d8/de5/structiav__querydesc.html">iav_querydesc</a></div><div class="ttdef"><b>Definition:</b> iav_ioctl.h:2412</div></div>
<div class="ttc" id="astructiav__querydesc_html_a8f1abab245b551bdff8a16e77bf819e9"><div class="ttname"><a href="../../d8/de5/structiav__querydesc.html#a8f1abab245b551bdff8a16e77bf819e9">iav_querydesc::canvas</a></div><div class="ttdeci">struct iav_canvasdesc canvas</div><div class="ttdef"><b>Definition:</b> iav_ioctl.h:2419</div></div>
<div class="ttc" id="astructiav__querydesc_html_a99c68192c9905f231a62a98ee6534cbb"><div class="ttname"><a href="../../d8/de5/structiav__querydesc.html#a99c68192c9905f231a62a98ee6534cbb">iav_querydesc::arg</a></div><div class="ttdeci">union iav_querydesc::@71 arg</div></div>
<div class="ttc" id="astructiav__querydesc_html_aa73b12ace6ac7df824707a89ac4f91ff"><div class="ttname"><a href="../../d8/de5/structiav__querydesc.html#aa73b12ace6ac7df824707a89ac4f91ff">iav_querydesc::qid</a></div><div class="ttdeci">enum iav_desc_id qid</div><div class="ttdef"><b>Definition:</b> iav_ioctl.h:2413</div></div>
<div class="ttc" id="astructiav__queryinfo_html"><div class="ttname"><a href="../../db/d5e/structiav__queryinfo.html">iav_queryinfo</a></div><div class="ttdef"><b>Definition:</b> iav_ioctl.h:1170</div></div>
<div class="ttc" id="astructiav__vout__sync__img__osd__t_html"><div class="ttname"><a href="../../d1/dfd/structiav__vout__sync__img__osd__t.html">iav_vout_sync_img_osd_t</a></div><div class="ttdef"><b>Definition:</b> iav_vout_common.h:550</div></div>
<div class="ttc" id="astructiav__vout__sync__img__osd__t_html_a049a525f0e8bc8bee106f89f18f896ce"><div class="ttname"><a href="../../d1/dfd/structiav__vout__sync__img__osd__t.html#a049a525f0e8bc8bee106f89f18f896ce">iav_vout_sync_img_osd_t::vout_id</a></div><div class="ttdeci">int vout_id</div><div class="ttdef"><b>Definition:</b> iav_vout_common.h:551</div></div>
<div class="ttc" id="astructiav__vout__sync__img__osd__t_html_a137bd648638b6572ac111f8f56888eda"><div class="ttname"><a href="../../d1/dfd/structiav__vout__sync__img__osd__t.html#a137bd648638b6572ac111f8f56888eda">iav_vout_sync_img_osd_t::img_pitch</a></div><div class="ttdeci">int img_pitch</div><div class="ttdef"><b>Definition:</b> iav_vout_common.h:555</div></div>
<div class="ttc" id="astructiav__vout__sync__img__osd__t_html_a86aeba28d29d66cabf04b7851230a96f"><div class="ttname"><a href="../../d1/dfd/structiav__vout__sync__img__osd__t.html#a86aeba28d29d66cabf04b7851230a96f">iav_vout_sync_img_osd_t::img_luma_addr</a></div><div class="ttdeci">u32 img_luma_addr</div><div class="ttdef"><b>Definition:</b> iav_vout_common.h:553</div></div>
<div class="ttc" id="astructiav__vout__sync__img__osd__t_html_ac88318425e6cf9b81a3a10687ef53dc4"><div class="ttname"><a href="../../d1/dfd/structiav__vout__sync__img__osd__t.html#ac88318425e6cf9b81a3a10687ef53dc4">iav_vout_sync_img_osd_t::img_chroma_addr</a></div><div class="ttdeci">u32 img_chroma_addr</div><div class="ttdef"><b>Definition:</b> iav_vout_common.h:554</div></div>
<div class="ttc" id="astructiav__yuv__cap_html"><div class="ttname"><a href="../../dc/d6a/structiav__yuv__cap.html">iav_yuv_cap</a></div><div class="ttdef"><b>Definition:</b> iav_ioctl.h:2175</div></div>
<div class="ttc" id="astructiav__yuv__cap_html_a4eb7b75b76c9314ccc6582b332fdfb9d"><div class="ttname"><a href="../../dc/d6a/structiav__yuv__cap.html#a4eb7b75b76c9314ccc6582b332fdfb9d">iav_yuv_cap::uv_addr_offset</a></div><div class="ttdeci">unsigned long uv_addr_offset</div><div class="ttdef"><b>Definition:</b> iav_ioctl.h:2184</div></div>
<div class="ttc" id="astructiav__yuv__cap_html_a7ed2668fc9c18679b1a349a2f6914f3f"><div class="ttname"><a href="../../dc/d6a/structiav__yuv__cap.html#a7ed2668fc9c18679b1a349a2f6914f3f">iav_yuv_cap::y_addr_offset</a></div><div class="ttdeci">unsigned long y_addr_offset</div><div class="ttdef"><b>Definition:</b> iav_ioctl.h:2183</div></div>
<div class="ttc" id="astructiav__yuv__cap_html_a85db88ffee2944ecd35c616393976289"><div class="ttname"><a href="../../dc/d6a/structiav__yuv__cap.html#a85db88ffee2944ecd35c616393976289">iav_yuv_cap::width</a></div><div class="ttdeci">u32 width</div><div class="ttdef"><b>Definition:</b> iav_ioctl.h:2176</div></div>
<div class="ttc" id="astructiav__yuv__cap_html_acd497cc6637ae5062f58897e65e16193"><div class="ttname"><a href="../../dc/d6a/structiav__yuv__cap.html#acd497cc6637ae5062f58897e65e16193">iav_yuv_cap::pitch</a></div><div class="ttdeci">u32 pitch</div><div class="ttdef"><b>Definition:</b> iav_ioctl.h:2178</div></div>
<div class="ttc" id="astructiav__yuv__cap_html_add40f8a56ae8cc650f92a3aa4d2bac99"><div class="ttname"><a href="../../dc/d6a/structiav__yuv__cap.html#add40f8a56ae8cc650f92a3aa4d2bac99">iav_yuv_cap::height</a></div><div class="ttdeci">u32 height</div><div class="ttdef"><b>Definition:</b> iav_ioctl.h:2177</div></div>
<div class="ttc" id="astructsmartfb__box__t_html"><div class="ttname"><a href="../../dc/d33/structsmartfb__box__t.html">smartfb_box_t</a></div><div class="ttdoc">Description of box parameters.</div><div class="ttdef"><b>Definition:</b> lib_smartfb.h:145</div></div>
<div class="ttc" id="astructsmartfb__box__t_html_a46a3d4708b9b955a65540f1c7f9d47b5"><div class="ttname"><a href="../../dc/d33/structsmartfb__box__t.html#a46a3d4708b9b955a65540f1c7f9d47b5">smartfb_box_t::height</a></div><div class="ttdeci">u16 height</div><div class="ttdef"><b>Definition:</b> lib_smartfb.h:148</div></div>
<div class="ttc" id="astructsmartfb__box__t_html_a5103232dda61eefd81b5b849643c5753"><div class="ttname"><a href="../../dc/d33/structsmartfb__box__t.html#a5103232dda61eefd81b5b849643c5753">smartfb_box_t::width</a></div><div class="ttdeci">u16 width</div><div class="ttdef"><b>Definition:</b> lib_smartfb.h:147</div></div>
<div class="ttc" id="astructsmartfb__box__t_html_a5c4857750a95f12d5ab4b5c3fda83bbf"><div class="ttname"><a href="../../dc/d33/structsmartfb__box__t.html#a5c4857750a95f12d5ab4b5c3fda83bbf">smartfb_box_t::obj</a></div><div class="ttdeci">smartfb_obj_t obj</div><div class="ttdef"><b>Definition:</b> lib_smartfb.h:146</div></div>
<div class="ttc" id="astructsmartfb__box__t_html_ac57e8bd071f9869f0ef57ccbb861d7b3"><div class="ttname"><a href="../../dc/d33/structsmartfb__box__t.html#ac57e8bd071f9869f0ef57ccbb861d7b3">smartfb_box_t::line_thickness</a></div><div class="ttdeci">u8 line_thickness</div><div class="ttdef"><b>Definition:</b> lib_smartfb.h:149</div></div>
<div class="ttc" id="astructsmartfb__init__t_html"><div class="ttname"><a href="../../d3/d93/structsmartfb__init__t.html">smartfb_init_t</a></div><div class="ttdoc">Description the parameters needed for smartfb initialization.</div><div class="ttdef"><b>Definition:</b> lib_smartfb.h:126</div></div>
<div class="ttc" id="astructsmartfb__init__t_html_acc236d9fa6afdd015974d2e963d37f20"><div class="ttname"><a href="../../d3/d93/structsmartfb__init__t.html#acc236d9fa6afdd015974d2e963d37f20">smartfb_init_t::vout</a></div><div class="ttdeci">enum smartfb_vout_id vout</div><div class="ttdef"><b>Definition:</b> lib_smartfb.h:127</div></div>
<div class="ttc" id="astructsmartfb__obj__t_html"><div class="ttname"><a href="../../d9/d50/structsmartfb__obj__t.html">smartfb_obj_t</a></div><div class="ttdoc">Description of object parameters.</div><div class="ttdef"><b>Definition:</b> lib_smartfb.h:133</div></div>
<div class="ttc" id="astructsmartfb__obj__t_html_a0586d471a8d932425a7c597dbe2e2e6c"><div class="ttname"><a href="../../d9/d50/structsmartfb__obj__t.html#a0586d471a8d932425a7c597dbe2e2e6c">smartfb_obj_t::offset_x</a></div><div class="ttdeci">u16 offset_x</div><div class="ttdef"><b>Definition:</b> lib_smartfb.h:134</div></div>
<div class="ttc" id="astructsmartfb__obj__t_html_a21f524fe1a263d9db15e889ef0af18ed"><div class="ttname"><a href="../../d9/d50/structsmartfb__obj__t.html#a21f524fe1a263d9db15e889ef0af18ed">smartfb_obj_t::color</a></div><div class="ttdeci">u8 color</div><div class="ttdef"><b>Definition:</b> lib_smartfb.h:136</div></div>
<div class="ttc" id="astructsmartfb__obj__t_html_ab0faf0a67b71437ad86c58cf1f58201a"><div class="ttname"><a href="../../d9/d50/structsmartfb__obj__t.html#ab0faf0a67b71437ad86c58cf1f58201a">smartfb_obj_t::bg_color</a></div><div class="ttdeci">u8 bg_color</div><div class="ttdef"><b>Definition:</b> lib_smartfb.h:137</div></div>
<div class="ttc" id="astructsmartfb__obj__t_html_ab353949fb9b49536f0b393dcbef42b1c"><div class="ttname"><a href="../../d9/d50/structsmartfb__obj__t.html#ab353949fb9b49536f0b393dcbef42b1c">smartfb_obj_t::bg_alpha</a></div><div class="ttdeci">u8 bg_alpha</div><div class="ttdef"><b>Definition:</b> lib_smartfb.h:138</div></div>
<div class="ttc" id="astructsmartfb__obj__t_html_aed7068943eea7cd4d120a92910cc621e"><div class="ttname"><a href="../../d9/d50/structsmartfb__obj__t.html#aed7068943eea7cd4d120a92910cc621e">smartfb_obj_t::offset_y</a></div><div class="ttdeci">u16 offset_y</div><div class="ttdef"><b>Definition:</b> lib_smartfb.h:135</div></div>
<div class="ttc" id="astructsmartfb__textbox__t_html"><div class="ttname"><a href="../../dd/d07/structsmartfb__textbox__t.html">smartfb_textbox_t</a></div><div class="ttdoc">Description of textbox parameters.</div><div class="ttdef"><b>Definition:</b> lib_smartfb.h:167</div></div>
<div class="ttc" id="astructsmartfb__textbox__t_html_a15a24e13f019ccdd028849a175980318"><div class="ttname"><a href="../../dd/d07/structsmartfb__textbox__t.html#a15a24e13f019ccdd028849a175980318">smartfb_textbox_t::text</a></div><div class="ttdeci">char text[MAX_TEXT_SIZE]</div><div class="ttdef"><b>Definition:</b> lib_smartfb.h:175</div></div>
<div class="ttc" id="astructsmartfb__textbox__t_html_a21a0365727fbeb370a00462b6f7d57dc"><div class="ttname"><a href="../../dd/d07/structsmartfb__textbox__t.html#a21a0365727fbeb370a00462b6f7d57dc">smartfb_textbox_t::font_size</a></div><div class="ttdeci">u8 font_size</div><div class="ttdef"><b>Definition:</b> lib_smartfb.h:169</div></div>
<div class="ttc" id="astructsmartfb__textbox__t_html_a52bde70682c4f2774280f6e4a5543914"><div class="ttname"><a href="../../dd/d07/structsmartfb__textbox__t.html#a52bde70682c4f2774280f6e4a5543914">smartfb_textbox_t::box</a></div><div class="ttdeci">smartfb_box_t box</div><div class="ttdef"><b>Definition:</b> lib_smartfb.h:168</div></div>
<div class="ttc" id="astructsmartfb__textbox__t_html_a57342927d68b58b5f6ff609229a9228f"><div class="ttname"><a href="../../dd/d07/structsmartfb__textbox__t.html#a57342927d68b58b5f6ff609229a9228f">smartfb_textbox_t::wrap_line</a></div><div class="ttdeci">u32 wrap_line</div><div class="ttdef"><b>Definition:</b> lib_smartfb.h:173</div></div>
<div class="ttc" id="astructsmartfb__textbox__t_html_abb8aa18bb777181ebe8164423c85b1b7"><div class="ttname"><a href="../../dd/d07/structsmartfb__textbox__t.html#abb8aa18bb777181ebe8164423c85b1b7">smartfb_textbox_t::bold</a></div><div class="ttdeci">u8 bold</div><div class="ttdef"><b>Definition:</b> lib_smartfb.h:171</div></div>
<div class="ttc" id="astructsmartfb__textbox__t_html_ad8804a601fd765d2f98883d5473a75f7"><div class="ttname"><a href="../../dd/d07/structsmartfb__textbox__t.html#ad8804a601fd765d2f98883d5473a75f7">smartfb_textbox_t::italic</a></div><div class="ttdeci">u8 italic</div><div class="ttdef"><b>Definition:</b> lib_smartfb.h:172</div></div>
<div class="ttc" id="astructvect__desc__t_html"><div class="ttname"><a href="../../df/d51/structvect__desc__t.html">vect_desc_t</a></div><div class="ttdoc">The vector description.</div><div class="ttdef"><b>Definition:</b> vproc.h:276</div></div>
<div class="ttc" id="astructvect__desc__t_html_a169952c253c9909a5f727afaec738893"><div class="ttname"><a href="../../df/d51/structvect__desc__t.html#a169952c253c9909a5f727afaec738893">vect_desc_t::pitch</a></div><div class="ttdeci">uint32_t pitch</div><div class="ttdef"><b>Definition:</b> vproc.h:278</div></div>
<div class="ttc" id="astructvect__desc__t_html_a96eedf1bc368872e2a9b5452170dee85"><div class="ttname"><a href="../../df/d51/structvect__desc__t.html#a96eedf1bc368872e2a9b5452170dee85">vect_desc_t::data_format</a></div><div class="ttdeci">data_format_t data_format</div><div class="ttdef"><b>Definition:</b> vproc.h:280</div></div>
<div class="ttc" id="astructvect__desc__t_html_abcee95ff813380d633bad137178eb09c"><div class="ttname"><a href="../../df/d51/structvect__desc__t.html#abcee95ff813380d633bad137178eb09c">vect_desc_t::color_space</a></div><div class="ttdeci">color_space_t color_space</div><div class="ttdef"><b>Definition:</b> vproc.h:281</div></div>
<div class="ttc" id="astructvect__desc__t_html_ac0d7d4727c50cb5436655cb70778fb03"><div class="ttname"><a href="../../df/d51/structvect__desc__t.html#ac0d7d4727c50cb5436655cb70778fb03">vect_desc_t::data_addr</a></div><div class="ttdeci">cv_daddr_t data_addr</div><div class="ttdef"><b>Definition:</b> vproc.h:277</div></div>
<div class="ttc" id="astructvect__desc__t_html_ae30613371d9332251793d73dd1cffb4a"><div class="ttname"><a href="../../df/d51/structvect__desc__t.html#ae30613371d9332251793d73dd1cffb4a">vect_desc_t::shape</a></div><div class="ttdeci">vect_shape_t shape</div><div class="ttdef"><b>Definition:</b> vproc.h:279</div></div>
<div class="ttc" id="astructvect__shape__t_html_a3808cd021ae482979b2c4e49e1fab2e3"><div class="ttname"><a href="../../d3/dfe/structvect__shape__t.html#a3808cd021ae482979b2c4e49e1fab2e3">vect_shape_t::d</a></div><div class="ttdeci">uint32_t d</div><div class="ttdef"><b>Definition:</b> vproc.h:255</div></div>
<div class="ttc" id="astructvect__shape__t_html_a50d0f0f0767450a76d736d60766c9999"><div class="ttname"><a href="../../d3/dfe/structvect__shape__t.html#a50d0f0f0767450a76d736d60766c9999">vect_shape_t::h</a></div><div class="ttdeci">uint32_t h</div><div class="ttdef"><b>Definition:</b> vproc.h:256</div></div>
<div class="ttc" id="astructvect__shape__t_html_a93c7c40d4fc2b2a4e8fea0f75e81e856"><div class="ttname"><a href="../../d3/dfe/structvect__shape__t.html#a93c7c40d4fc2b2a4e8fea0f75e81e856">vect_shape_t::p</a></div><div class="ttdeci">uint32_t p</div><div class="ttdef"><b>Definition:</b> vproc.h:254</div></div>
<div class="ttc" id="astructvect__shape__t_html_ad0fb62e7a08e70fc5e0a76b67809f84b"><div class="ttname"><a href="../../d3/dfe/structvect__shape__t.html#ad0fb62e7a08e70fc5e0a76b67809f84b">vect_shape_t::w</a></div><div class="ttdeci">uint32_t w</div><div class="ttdef"><b>Definition:</b> vproc.h:257</div></div>
<div class="ttc" id="atest__fb_8h_html_affec572f11fcba59ce0cd49cbcd0110f"><div class="ttname"><a href="../../../video/d3/d6c/test__fb_8h.html#affec572f11fcba59ce0cd49cbcd0110f">HAS_ARG</a></div><div class="ttdeci">#define HAS_ARG</div></div>
<div class="ttc" id="atest__smartfb_8c_html_a3c04138a5bfe5d72780bb7e82a18e627"><div class="ttname"><a href="../../dc/d60/test__smartfb_8c.html#a3c04138a5bfe5d72780bb7e82a18e627">main</a></div><div class="ttdeci">int main(int argc, char **argv)</div><div class="ttdef"><b>Definition:</b> test_smartfb.c:1009</div></div>
<div class="ttc" id="atest__smartfb_8c_html_ad96d407a911fbb914fa8e4cfbf2faf0f"><div class="ttname"><a href="../../dc/d60/test__smartfb_8c.html#ad96d407a911fbb914fa8e4cfbf2faf0f">usage</a></div><div class="ttdeci">static void usage(void)</div><div class="ttdef"><b>Definition:</b> test_smartfb.c:161</div></div>
<div class="ttc" id="avin__init_8c_html_a5294002f7dca0cd9bcc0009a27895ef7"><div class="ttname"><a href="../../../video/d4/daa/vin__init_8c.html#a5294002f7dca0cd9bcc0009a27895ef7">fd_iav</a></div><div class="ttdeci">int fd_iav</div></div>
<div class="ttc" id="avout__init__cfg_8c_html_a88a5b93883c34229851d6a7a93254850"><div class="ttname"><a href="../../../video/de/ddf/vout__init__cfg_8c.html#a88a5b93883c34229851d6a7a93254850">AM_IOCTL</a></div><div class="ttdeci">#define AM_IOCTL(_filp, _cmd, _arg)</div></div>
<div class="ttc" id="avproc_8h_html"><div class="ttname"><a href="../../d2/dfe/vproc_8h.html">vproc.h</a></div></div>
</div><!-- fragment --> </div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="../../doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.3 </li>
  </ul>
</div>
</body>
</html>
