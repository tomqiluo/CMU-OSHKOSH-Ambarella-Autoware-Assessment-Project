<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.3"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Video: ADVANCED - Arbitrary Image Scaler</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript" src="../../navtreedata.js"></script>
<script type="text/javascript" src="../../navtree.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/search.js"></script>
<link rel="search" href="../../search_opensearch.php?v=opensearch.xml" type="application/opensearchdescription+xml" title="Video"/>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
<link href="../../doxygen-awesome.css" rel="stylesheet" type="text/css"/>
<link href="../../doxygen-awesome-sidebar-only.css" rel="stylesheet" type="text/css"/>
<link href="../../doxygen-ambarella.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="../../Ambarella.png"/></td>
  <td id="projectalign">
   <div id="projectname">Video<span id="projectnumber">&#160;Cooper_1.6.0 (CV72 &amp; CV3) @ 2024.07.10 14:12:44</span>
   </div>
   <div id="projectbrief">placeholder</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.3 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "../../search",'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('../../',true,true,'search.html','Search');
  $(document).ready(function() {
    if ($('.searchresults').length > 0) { searchBox.DOMSearchField().focus(); }
  });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('d8/d93/fs_adv_arb_img_scaler.html','../../'); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<div><div class="header">
  <div class="headertitle"><div class="title">ADVANCED - Arbitrary Image Scaler </div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h1><a class="anchor" id="arbi_img_scaler"></a>
1. Arbitrary Image Scaler</h1>
<p >CV5x can export the image digital signal processor (IDSP) mixer to enable user applications to perform up- / down-scaling. Using the scaler, a user-specified input buffer can be cropped and scaled up or down to the chosen output size. Because the arbitrary image scaler is multiplexed with the source buffer (when it is enabled), the seventh source buffer must be disabled for all channels and cannot be used as a pyramid input buffer.</p>
<div class="image">
<img src="../../fs_img_scale.png" alt=""/>
<div class="caption">
Figure 1-1. Arbitrary Image Scaler.</div></div>
<dl class="section user"><dt>Resolution and Scalability</dt><dd></dd></dl>
<ul>
<li>The maximum input buffer size can be up to 14336x14336.</li>
<li>The maximum output buffer size can be up to 14336x8192.</li>
<li>The image scaler supports up to 8x upscaling and 1/8x downscaling.</li>
</ul>
<dl class="section user"><dt>Input Data Format</dt><dd></dd></dl>
<p>Three types of YUV formats are supported for the input / output (I/O) buffer:</p>
<ul>
<li><b>YUV400</b> </li>
<li><b>YUV420</b> </li>
<li><b>YUV422</b> </li>
</ul>
<p >Once designated, the format of the I/O buffer must be kept the same.</p>
<dl class="section user"><dt>Buffer Address Alignment</dt><dd></dd></dl>
<p>The buffer pitch of the input buffer should be aligned to 64 on CV5x and aligned to 128 on CV72. The x-offset and width of cropping window must be aligned to 4; the y-offset and height must be aligned to two. When the buffer width is aligned to 4, but not aligned to 64 or 128 (such as 720), it must be padded to be aligned to 64 or 128 before image scaling is performed.</p>
<p >The buffer pitch of the output buffer must be aligned to 64 on CV5x and aligned to 128 on CV72, and the buffer width must be aligned to 4. When the buffer width is aligned to 4, but is not aligned to 64 or 128 (such as 360), it must be padded to be aligned to 64 or 128 before image scaling is performed.</p>
<hr  />
<h1><a class="anchor" id="section_img_scller_examples"></a>
2. Arbitrary Image Scaler Example</h1>
<h2><a class="anchor" id="example_arbi_img_scaler1"></a>
Example 1: Crop and Upscale from Canvas0 (YUV420) with Top-Left Offset 100x200 and Size 480p to 1080p</h2>
<div class="fragment"><div class="line">Remove the seventh <a class="code hl_variableRef" href="../../../library/d1/d82/cJSON_8h.html#aff2566f4c366b48d73479bef43ee4d2e">buffer</a> from the canvases in the Lua file `cv5_vin0_1080p_linear.lua` first.</div>
<div class="line"> </div>
<div class="line">board# test_encode --resource-cfg /usr/share/ambarella/lua_scripts/cv5_vin0_1080p_linear.lua --img-scale 1\        <span class="comment">// For CV5 or CV52</span></div>
<div class="line">           --img-scale-<a class="code hl_variableRef" href="../../../library/d1/d82/cJSON_8h.html#adb411a44855a4c49231d72a0fc9a3b3b">format</a> 0 --img-scale-max-in 1920x1080 --img-scale-max-out 1920x1080\</div>
<div class="line">           --img-scale-job-queue-depth 8</div>
<div class="line">(Or board# test_encode --resource-cfg /usr/share/ambarella/lua_scripts/cv72_vin0_1080p_linear.lua --img-scale 1\   <span class="comment">// For CV72</span></div>
<div class="line">           --img-scale-<a class="code hl_variableRef" href="../../../library/d1/d82/cJSON_8h.html#adb411a44855a4c49231d72a0fc9a3b3b">format</a> 0 --img-scale-max-in 1920x1080 --img-scale-max-out 1920x1080\</div>
<div class="line">           --img-scale-job-queue-depth 8)</div>
<div class="line">board# test_img_scale -b 0 --binoffset 100x200 --binsize 720x480 --boutsize 1920x1080 -f file_name</div>
<div class="ttc" id="acJSON_8h_html_adb411a44855a4c49231d72a0fc9a3b3b"><div class="ttname"><a href="../../../library/d1/d82/cJSON_8h.html#adb411a44855a4c49231d72a0fc9a3b3b">format</a></div><div class="ttdeci">char const int const cJSON_bool format</div></div>
<div class="ttc" id="acJSON_8h_html_aff2566f4c366b48d73479bef43ee4d2e"><div class="ttname"><a href="../../../library/d1/d82/cJSON_8h.html#aff2566f4c366b48d73479bef43ee4d2e">buffer</a></div><div class="ttdeci">char * buffer</div></div>
</div><!-- fragment --> </div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="../../doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.3 </li>
  </ul>
</div>
</body>
</html>
