<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.3"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Security: Data Transfer Protection</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript" src="../../navtreedata.js"></script>
<script type="text/javascript" src="../../navtree.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/search.js"></script>
<link rel="search" href="../../search_opensearch.php?v=opensearch.xml" type="application/opensearchdescription+xml" title="Security"/>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
<link href="../../doxygen-awesome.css" rel="stylesheet" type="text/css"/>
<link href="../../doxygen-awesome-sidebar-only.css" rel="stylesheet" type="text/css"/>
<link href="../../doxygen-ambarella.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="../../Ambarella.png"/></td>
  <td id="projectalign">
   <div id="projectname">Security<span id="projectnumber">&#160;Cooper_1.6.0 (CV72 &amp; CV3) @ 2024.07.10 14:12:44</span>
   </div>
   <div id="projectbrief">placeholder</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.3 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "../../search",'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('../../',true,true,'search.html','Search');
  $(document).ready(function() {
    if ($('.searchresults').length > 0) { searchBox.DOMSearchField().focus(); }
  });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('df/d19/data_transfer_protection.html','../../'); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<div><div class="header">
  <div class="headertitle"><div class="title">Data Transfer Protection </div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p >For data transfer protection, Ambarella recommends choosing the widely used transport layer security (TLS); it is the best practice for data transfer protection. The Ambarella software development kit (SDK) supports TLS in both Linux and the trusted operating system (TOS) (open portable trusted execution environment (OP-TEE)). <br  />
 Additionally, a similar secure connection is supported in CVflow.</p>
<h1><a class="anchor" id="ssl_and_tls"></a>
1. SSL and TLS</h1>
<p >Secure socket layer (SSL) and its successor, TLS, are protocols for establishing authenticated and encrypted links between networked computers. SSL encrypts the data being transmitted so that a third party cannot eavesdrop on the transmission and view the data being transmitted. Only the user’s computer and the secure server are able to recognize the data.</p>
<h2><a class="anchor" id="ssl_protocols"></a>
1.1 SSL Protocols</h2>
<p >SSL protocols include the SSL record protocol, handshake protocol, change-cipher specification protocol, and alert protocol.</p>
<h3><a class="anchor" id=""></a>
</h3>
<p >The figure below shows the SSL protocol stack: </p><a class="anchor" id="ssl_protocol_stack"></a>
<table class="doxtable">
<caption>Table 1-1. SSL Protocol Stack.</caption>
<tr>
<th align="left">Handshake Protocol</th><th align="left">Change Cipher Spec Protocol</th><th align="left">Alert Protocol</th><th align="left">HTTP </th></tr>
<tr>
<td align="center" colspan="4">SSL Record Protocol </td></tr>
<tr>
<td align="center" colspan="4">TCP </td></tr>
<tr>
<td align="center" colspan="4">IP </td></tr>
</table>
<h3><a class="anchor" id="ssl_record_protocol"></a>
1.1.2 SSL Record Protocol</h3>
<p >SSL record protocol provides two services to the SSL connection:</p><ul>
<li>Confidentality</li>
<li>Message integrity In the SSL record protocol application, data is divided into fragments. The fragments are compressed, and then the encrypted MAC generated by algorithms (such secure hash protocol (SHA)) is appended. Subsequently, the encryption of the data is completed and the last SSL header is appended to the data.</li>
</ul>
<h3><a class="anchor" id="handshake_protocol"></a>
1.1.3 Handshake Protocol</h3>
<p >The handshake protocol is used to establish sessions. This protocol enables the client and the server to mutually authenticate by sending a series of messages to one another.</p>
<h3><a class="anchor" id="change_cipher_protocol"></a>
1.1.4 Change-Cipher Protocol</h3>
<p >This protocol uses the SSL record protocol. Unless the handshake protocol is completed, the SSL record output will be in a pending state. After the handshake protocol, the pending state is converted into the current state. The change-cipher protocol consists of a single message, which is one byte in length and can have only one value. This protocol causes the pending state to be copied into the current state.</p>
<h3><a class="anchor" id="alert_protocol"></a>
1.1.5 Alert Protocol</h3>
<p >This protocol is used to convey SSL-related alerts to the peer entity. Each message in this protocol contains two bytes: 1-byte level and 1-byte alert.</p>
<h2><a class="anchor" id="ssl_work_flow"></a>
1.2 SSL Work Flow</h2>
<p >An SSL session is established over a TCP socket. The following sequence demonstrates the flow for an existing TCP application that has been modified to use SSL:</p><ol type="1">
<li><code>CLIENT_HELLO</code>: the client sends a <code>CLIENT_HELLO</code> command to the server, which includes the following:<ul>
<li>The highest SSL and TLS version supported by the client</li>
<li>Ciphers supported by the client (listed in order of preference)</li>
<li>Data compression methods supported by the client</li>
<li>Session ID. If the client is starting a new SSL session, the session ID is 0</li>
<li>Random data generated by the client for use in the key generation process</li>
</ul>
</li>
<li><code>SERVER_HELLO</code>: the server sends a <code>SERVER_HELLO</code> command to the client, which includes the SSL or TLS version that will be used for the SSL session. The cipher will also be used for the SSL session. Note that the session ID is for the SSL session. Additionally, random data will be generated by the server for use in the key generation process</li>
<li><code>CERTIFICATE</code>: the server sends the <code>CERTIFICATE</code> command. This command includes the server’s certificate and, optionally, a chain of certificates beginning with the certificate of the client application (CA) that assigned the server’s certificate</li>
<li><code>SERVER_DONE</code>: the server sends the <code>SERVER_DONE</code> command, which indicates that the server has completed this phase of the SSL handshake. If client authentication is performed, additional commands will flow between the client and the server following the <code>SERVER_DONE</code> command</li>
<li><code>CERTIFICATE_VERIFY</code>: the client informs the server that it has verified the server’s certificate</li>
<li><code>CHANGE_CIPHER_SPEC</code>: the client sends the <code>CHANGE_CIPHER_SPEC</code> command. This command indicates that the contents of subsequent SSL record data sent by the client during the SSL session will be encrypted. The 5-byte SSL record headers are never encrypted</li>
<li><code>FINSHED</code>: the client sends the <code>FINSHED</code> command. This command includes a digest of all SSL handshake commands that have flowed between the server and the client up to this point. The figure below demonstrates an SSL handshake. <a class="anchor" id="SSL_Handshake"></a><div class="image">
<img src="../../ssl_handshake.png" alt=""/>
<div class="caption">
Figure 1-1. SSL Handshake.</div></div>
</li>
</ol>
<h1><a class="anchor" id="tls_solution_in_amba"></a>
2. TLS Solutions in the Ambarella SDK</h1>
<p >Ambarella uses OpenSSL in the normal world and MbedTLS in the secure world to set up TLS connections. Users can set up a TLS server and make a connection with the chip. The TLS client can be set up in both the normal world (Linux) and the secure world (OP-TEE). The path for example code of the TLS server is <code>packages/security/reference_code/openssl_tls_test/openssl_tls_test_server</code>.</p>
<h2><a class="anchor" id="tls_client_in_normal_world"></a>
2.1 TLS Client in Normal World</h2>
<p >Ambarella uses OpenSSL to set up a TLS connection in the normal world. The TLS work flow is provided, as shown below: <a class="anchor" id="TLS_Connection_Between_the_Server_and_Normal"></a>World </p><div class="image">
<img src="../../fig_tls_connection.png" alt=""/>
<div class="caption">
Figure 1-2. TLS Connection Between the Server and Normal World.</div></div>
<p> The path for example code of the TLS client in the normal world is <code>packages/security/reference_code/openssl_tls_test/openssl_tls_test_client</code>.</p>
<h1><a class="anchor" id="secure_connection_in_cvflow"></a>
3. Secure Connection in CVflow®</h1>
<p >CVflow supports ED25519 and X25519, which provide support for secure connections. </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="../../doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.3 </li>
  </ul>
</div>
</body>
</html>
