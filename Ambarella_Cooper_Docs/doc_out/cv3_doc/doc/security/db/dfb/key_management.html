<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.3"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Security: Key Management</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript" src="../../navtreedata.js"></script>
<script type="text/javascript" src="../../navtree.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/search.js"></script>
<link rel="search" href="../../search_opensearch.php?v=opensearch.xml" type="application/opensearchdescription+xml" title="Security"/>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
<link href="../../doxygen-awesome.css" rel="stylesheet" type="text/css"/>
<link href="../../doxygen-awesome-sidebar-only.css" rel="stylesheet" type="text/css"/>
<link href="../../doxygen-ambarella.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="../../Ambarella.png"/></td>
  <td id="projectalign">
   <div id="projectname">Security<span id="projectnumber">&#160;Cooper_1.6.0 (CV72 &amp; CV3) @ 2024.07.10 14:12:44</span>
   </div>
   <div id="projectbrief">placeholder</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.3 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "../../search",'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('../../',true,true,'search.html','Search');
  $(document).ready(function() {
    if ($('.searchresults').length > 0) { searchBox.DOMSearchField().focus(); }
  });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('db/dfb/key_management.html','../../'); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<div><div class="header">
  <div class="headertitle"><div class="title">Key Management </div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h1><a class="anchor" id="key_management_history"></a>
0. Revision History</h1>
<a class="anchor" id="key_management_history"></a>
<table class="doxtable">
<caption></caption>
<tr>
<th>Version</th><th>Updated Date</th><th align="left">Modification </th></tr>
<tr>
<td>0.0.1</td><td>20231217</td><td>Initial Version </td></tr>
</table>
<p >Key management is a crucial aspect of security. Secure boot is based on the digital signature process, which requires a private key to generate the signature (sign signature), as well as a public key to verify it. Private keys must be kept confidential, as the public keys are deployed on the device. Ambarella chips use one-time programmable (OTP) to prevent tampering of public keys. As private keys are required for compiling firmware, they are located in the Arm® trusted firmware (ATF) / open portable trusted execution environment (OP-TEE) source code directory. Developers, QAs, maintainers, and manufacturers can access private keys directly, thus presenting a high risk of key leakage. To address this issue, the Ambarella Flexible Linux Software Development Kit (SDK) introduces the remote procedure call (RPC) toolkit. The Ambarella SDK also supports cloud-based key management via the Amazon key management service (KMS) for secure boot and Arm® TrustZone®. Because cloud-based KMS is provided by the cloud service vendor, this feature is provided as a separate patch; it is not a standard part of the Ambarella SDK. This feature can be requested from the Ambarella contact window. Detailed descriptions of cloud-based key management is beyond the scope of this document. This chapter provides an overview of key management.</p><ul>
<li>Section <a class="el" href="../../db/dfb/key_management.html#pub_key_on_dev">1. Public Keys on the Device</a></li>
<li>Section <a class="el" href="../../db/dfb/key_management.html#pri_key_in_local">2. Private Keys in Local (Default Approach)</a></li>
<li>Section <a class="el" href="../../db/dfb/key_management.html#pri_key_rpc">3. Private Keys at the Remote Server (RPC Toolkit)</a></li>
<li>Section <a class="el" href="../../db/dfb/key_management.html#revoke_rot_key">4. Revoking the RoT Key</a></li>
<li>Section <a class="el" href="../../db/dfb/key_management.html#key_management_user_guide">5. User Guide</a></li>
</ul>
<h1><a class="anchor" id="pub_key_on_dev"></a>
1. Public Keys on the Device</h1>
<p >The local root of trust (RoT) public key (PK) can be found at <code>ambarella/security/tz_sb_keys/local_keys/rot_keys/ed25519/pub_rot.bin</code> and tThe remote RoT PK can be found on the server side at <code>ambarella/security/build/tz_dev_server/pub_rot.bin</code>. The RoT PK is programmed into one-time programmable (OTP) and is used as the root of trust for secure boot. The ATF keys are derived from the RoT key, and then embedded in the firmware binary. For OP-TEE, the trusted application (TA) public key is embedded into the OP-TEE-OS binary. The public key for authenticating the Linux kernel is embedded into the AMBoot binary. </p><dl class="section note"><dt>Note</dt><dd>There are 16 RoT key slots in OTP; customers <b>MUST</b> program 16 RoT keys during the mass-production (MP) process. Leaving empty RoT key slots can lead to system security risks.</dd></dl>
<h1><a class="anchor" id="pri_key_in_local"></a>
2. Private Keys in Local (Default Approach)</h1>
<p >There are three major keys: the RoT key, which is used for secure boot; the kernel key, for Linux kernel authentication; and the TA key, for TA binary authentication. In the default approach, these keys can be found in the source code directory.</p><ul>
<li>RoT private key: <code>ambarella/security/tz_sb_keys/local_keys/rot_keys/ed25519/pri_rot.bin</code></li>
<li>Kernel private key: <code>ambarella/security/tz_sb_keys/local_keys/kernel_keys/ed25519/pri_kernel.bin</code></li>
<li>CoT root key: <code>ambarella/security/tz_sb_keys/local_keys/cot_root_keys/rsa2048/pri_cot_root.pem</code></li>
<li>TA private key: <code>ambarella/boot/tee/optee_os/keys/default_ta.pem</code></li>
</ul>
<h1><a class="anchor" id="pri_key_rpc"></a>
3. Private Keys at the Remote Server (RPC Toolkit)</h1>
<p >In this section, Ambarella introduces a new method of key management: the RPC toolkit. This kit is compatible with the original tools in ATF / OP-TEE, while restricting private key access to administrators. With the RPC toolkit, developers, quality assurances (QAs), maintainers, and manufacturers can compile ATF / OP-TEE without directly accessing the private key. This toolkit contains a daemon program, tool proxies on the developer side, a server that maintains the private keys, and a signing service. The makefile can request a signing service via tool proxies, which connects the daemon. Then, the daemon requests the signing service over a TLS connection with the server, which is a safe connection used to prevent a "middle-man attack". The following diagram shows the three components of the development toolkit: the developer server, the daemon, and the tool proxy. Developers can share a single server with both an individual daemon and with the tool proxies.</p>
<p ><a class="anchor" id="Data_Encryption_Diagram"></a></p><div class="image">
<img src="../../rpc_toolkit.png" alt=""/>
<div class="caption">
Figure 1-1. RPC Toolkit.</div></div>
<p >The tool proxies provide identical services with the original tools in ATF / OP-TEE. However, there is one difference: the private keys are not local; they exist only on the remote server side. The keys on the server are located in the following paths:</p><ul>
<li>RoT private key: <code>ambarella/security/build/tz_dev_server/rot_private.pem</code></li>
<li>Kernel private key: <code>ambarella/security/build/tz_dev_server/kernel_private.pem</code></li>
<li>CoT root key: <code>ambarella/security/build/tz_dev_server/pri_cot_root.pem</code></li>
<li>TA private key: <code>ambarella/security/build/tz_dev_server/default_ta.pem</code></li>
</ul>
<h1><a class="anchor" id="revoke_rot_key"></a>
4. Revoking the RoT Key</h1>
<p >There are 16 RSA key slots in OTP, which makes it possible to revoke the RoT key. The manufacturer should writes all 16 RSA keys in OTP, and then locks them during the manufacturing stage so that each key can cover several years. For example, the first key can cover ten years, the second key can cover the next ten years, and so on. Although there is an invalid bit in OTP for the first two keys, the last key cannot be revoked. When a key is marked as invalid, secure boot will switch to the next key. A brief example of the public key revocation mechanism: there are invalid bits for the first two RoT keys. Secure read-only memory (ROM) / BST / BL2 checks those invalid bits before loading the RoT key. If the invalid bit is set, Secure ROM / BST / BL2 will load the next key.</p>
<h1><a class="anchor" id="key_management_user_guide"></a>
5. User Guide</h1>
<h2><a class="anchor" id="prepare_key_pairs"></a>
5.1. Preparing the Key Pairs</h2>
<p >For users working with one project only, one key set is sufficient. The project leader chooses the key set and then sends it to the other members in the project. It is acceptable to use an existing key set for this use case. The following sections describe how to generate a new key set, as well as how to use an existing key set for both local and RPC approaches.</p>
<h3><a class="anchor" id="generate_new_key_pairs"></a>
5.1.1 Generating New Keys for the Local Approach (Optional)</h3>
<p >Use the commands below to generate new keys. The SDK is released with default key pairs, so the commands are used to replace the default set. Ensure that new keys are necessary before proceeding, and remember to save the generated keys.</p><ol type="1">
<li>Generate a new pair of RoT keys (including the public key bin): <div class="fragment"><div class="line">build$ cd ambarella/security/security_tools/scripts/</div>
<div class="line">build$ chmod +x gen_rot_key.sh</div>
<div class="line">build$ ./gen_rot_key.sh ed25519</div>
</div><!-- fragment --></li>
<li>Generate a new kernel private key: <div class="fragment"><div class="line">build$ cd ambarella/security/security_tools/scripts/</div>
<div class="line">build$ chmod +x gen_kernel_key.sh</div>
<div class="line">build$ ./gen_kernel_key.sh ed25519</div>
</div><!-- fragment --></li>
<li>Generate a new TA private key: <div class="fragment"><div class="line">build$ cd ambarella/security/security_tools/scripts/</div>
<div class="line">build$ chmod +x gen_optee_ta_key.sh</div>
<div class="line">build$ ./gen_optee_ta_key.sh</div>
</div><!-- fragment --></li>
<li>Generate a new CoT Root private key: <div class="fragment"><div class="line">build$ cd ambarella/security/security_tools/scripts/</div>
<div class="line">build$ chmod +x gen_cot_root_key.sh</div>
<div class="line">build$ ./gen_cot_root_key.sh</div>
</div><!-- fragment --></li>
</ol>
<h3><a class="anchor" id="generate_new_key_pairs_for_rpc"></a>
5.1.2 Generating New Keys for the RPC Approach (Optional)</h3>
<p >When users prepare the development server, these keys will automatically be generated.</p>
<h2><a class="anchor" id="specify_rot_key_index"></a>
5.2 Specify RoT Key Index in BST Header</h2>
<p >There is a key index field in the BST header. Users can modify <code>ambarella/boot/amboot/vif/bst.info</code> to specify the RoT key index.<br  />
 <b>#define BST_SEC_KEYINX 0x0000</b></p>
<h2><a class="anchor" id="compile_sdk_with_secure_boot"></a>
5.3 Compiling the SDK with a Secure Boot</h2>
<p >When compiling the SDK, users must ensure that the secure boot configuration is selected. If the system includes Arm TrustZone, use <code>xxxx_trustzone_config</code>. If the system does not include Arm TrustZone, use <code>xxxx_secure_boot_without_trustzone_config</code>. The steps for compiling are as follows.</p>
<p ><b>Amba build:</b> </p><div class="fragment"><div class="line">build$ source build/env/amba-build.env</div>
<div class="line">select the board</div>
<div class="line">build$ make ipcam_tz_config</div>
</div><!-- fragment --><p ><b>Yocto build:</b> </p><div class="fragment"><div class="line">build$ source build/env/yocto-build.env</div>
<div class="line">Select the board</div>
<div class="line">Build# make ipcam_tz_config</div>
</div><!-- fragment --><p >By default, the compiler chooses the local approach (private keys in a local place in the source code). To use the RPC approach, select the following items in <code>make menuconfig</code>.</p>
<p ><b>Amba build:</b> </p><div class="fragment"><div class="line">build$ make menuconfig</div>
<div class="line"> security  ---&gt;</div>
<div class="line">  boot-security (security/boot_security)  ---&gt;</div>
<div class="line">   [*] Using RPC(Remote Procedure Call) Toolkit For Trust Zone ---&gt;</div>
<div class="line">    (9088) Local port</div>
</div><!-- fragment --><p ><b>Yocto build:</b> </p><div class="fragment"><div class="line">build$ make menuconfig</div>
<div class="line"> meta-ambabsp  ---&gt;</div>
<div class="line">  recipes-boot-security  ---&gt;</div>
<div class="line">   boot-security (meta-ambasecurity/recipes-boot-security/boot-security)  ---&gt;</div>
</div><!-- fragment --><dl class="section note"><dt>Note</dt><dd><ul>
<li>The “local port” is used for the development tool proxy and daemon. If several developers use the same PC or server for compiling, each developer must choose a different port.</li>
<li>Users must ensure that the RPC development server and the daemon are configured before compiling to use the remote approach. Instructions on how to configure the correct environment are described in the next section.</li>
</ul>
</dd></dl>
<p><b>Compile the SDK</b> </p><div class="fragment"><div class="line">build$ make</div>
</div><!-- fragment --><dl class="section note"><dt>Note</dt><dd>OP-TEE versions 3.8 and later require Python 3 (3.6.9). Users must ensure that the build machine has the correct Python version. If a Python report error occurs, users must install the related Python modules using the following commands: <div class="fragment"><div class="line">build$ sudo apt install python3-pyelftools</div>
<div class="line">build$ sudo apt install python3-pip</div>
<div class="line">build$ pip3 install pycryptodomex</div>
</div><!-- fragment --></dd></dl>
<h2><a class="anchor" id="set_up_rpc_env"></a>
5.4 Setting Up the RPC Environment</h2>
<p >The RPC toolkits can be found under <code>ambarella/security/build</code>:</p><ul>
<li>Compiled development server: <code>./tz_dev_server/tz_dev_server_v2</code></li>
<li>Compiled development daemon: <code>./tz_dev_daemon/tz_dev_daemon</code></li>
<li>Compiled tool proxies: <code>./tz_dev_proxy/</code> For detailed steps, refer to <code>ambarella/security/build/trustzone_secure_boot_toolkit_help.txt</code>.</li>
</ul>
<h3><a class="anchor" id="run_dev_server"></a>
5.4.1 Running the Development Server</h3>
<p >Running the server program on the privileged server requires several keys and a certificate. Refer to the following steps to generate the keys and to start the server program.</p><ol type="1">
<li>Create a server identity key pair. Ambarella strongly recommends that users select a passphrase that is more secure than “1234”, as shown in the example below:<br  />
 <code># openssl genpkey -algorithm RSA -out server_priv_key.pem -pkeyopt rsa_keygen_bits:2048 -pkeyopt rsa_keygen_pubexp:65537 -pass pass:1234 -aes-256-cbc</code></li>
<li>Generate the self-signed certificate:<br  />
 <code># openssl req -new -x509 -days 3650 -key server_priv_key.pem -out server.crt -subj /C=CN/ST=SH/L=PD/O=amba/OU=system/CN=amba/emailAddress=abcdefg@ambarella.com</code></li>
<li>Run the development server: <div class="fragment"><div class="line"><span class="preprocessor"># cd tz_dev_server</span></div>
<div class="line"><span class="preprocessor"># ./tz_dev_server_v2 ./db 9002</span></div>
</div><!-- fragment --></li>
</ol>
<dl class="section note"><dt>Note</dt><dd><ul>
<li>The folder <code>db</code> stores all approved developer accounts.</li>
<li>The first time the development server operates, the application asks the user to generate the private keys. Type <b>“y” + Enter</b> to run the server.</li>
</ul>
</dd></dl>
<h3><a class="anchor" id="run_dev_daemon"></a>
5.4.2 Running the Development Daemon</h3>
<p >Running the development daemon as a client requires an identity key and a public key from the server <code>server_pub_key.txt</code>. The administrator must distribute the server’s public key to developers, who can then compile the SDK using the secure boot feature. Follow the hints provided in <code>tz_dev_daemon</code> to generate an identity key.</p><ol type="1">
<li>Generate an RSA key pair. Remember to use a passphrase that is more secure than the one shown below: <div class="fragment"><div class="line"><span class="preprocessor"># openssl genpkey -algorithm RSA -out client_priv_key.pem -pkeyopt rsa_keygen_bits:2048 -pkeyopt rsa_keygen_pubexp:65537 -pass pass:1234 -aes-256-cbc </span></div>
</div><!-- fragment --></li>
<li>Run the development daemon with the IP, port, and local port of the remote server. This enables the compiler tools to make the request: <div class="fragment"><div class="line"><span class="preprocessor"># ./tz_dev_daemon 10.4.8.67 9002 9088 </span></div>
</div><!-- fragment --> The first time the daemon operates, the user will be asked to register a new account. Enter a unique name, then type <b>“y” + Enter</b> to proceed. The newly registered account must be approved by the administrator. On the server side, a prompt appears awaiting administrator approval. Administrators must type <b>“y” + Enter</b> to approve the registered user. After the new registration is complete, the daemon begins running. If the account is already registered, the daemon will begin running after login. <dl class="section note"><dt>Note</dt><dd>The mutual authentication of the server and the daemon are based on their key pairs.</dd></dl>
</li>
</ol>
<h2><a class="anchor" id="program_public_key_into_otp"></a>
5.5 Programming a Public Key into OTP</h2>
<p >If the public key is not programmed into OTP, the first two authentications will be skipped (Secure ROM -&gt; BST, BST -&gt; BL2). There are three public key slots in OTP. The manufacturer can revoke the first two public keys after some time. For example, it is possible to revoke the first key after a decade, the second key after the next decade, and keep the last key for the remaining years. However, the last key is irrevocable. To prevent an attacker from programming the last public key, Ambarella strongly recommends that the manufacturer programs all three keys in OTP at the factory.</p>
<p >Use the following steps to program the OTP with the RSA public key (with Arm TrustZone): </p><div class="fragment"><div class="line">BOARD# modprobe optee</div>
<div class="line">BOARD# tee-supplicant&amp;</div>
<div class="line">BOARD# test_program_otp --writepubkey 0 /sdcard/rot_public.bin</div>
<div class="line">BOARD# test_program_otp --readpubkey 0      <span class="comment">// Read it back from OTP</span></div>
</div><!-- fragment --><p >Use the following steps to program the OTP with the RSA public key (without Arm TrustZone): </p><div class="fragment"><div class="line">BOARD# modprobe amba_otp</div>
<div class="line">BOARD# test_otp --writepubkey 0 /sdcard/rot_public.bin</div>
<div class="line">BOARD# test_otp --readpubkey 0      <span class="comment">// Read it back from OTP</span></div>
</div><!-- fragment --><dl class="section note"><dt>Note</dt><dd>The <code>rot_public.bin</code> is located in a local folder or on the remote server. For more details, refer to <a class="el" href="../../db/dfb/key_management.html#pub_key_on_dev"><ol type="1">
<li>Public Keys on the Device</li>
</ol>
</a></dd></dl>
<h2><a class="anchor" id="enable_sec_boot"></a>
5.6 Enabling Secure Boot</h2>
<p >During the debugging process, Ambarella recommends that users enable secure boot with a power-on configuration (POC) pin, which is revocable. In the manufacturing stage, secure boot must be permanently enabled so that attackers cannot disable it on the real product. Force USB boot is automatically disabled when secure boot is enabled.</p>
<h3><a class="anchor" id="enable_sec_boot_with_poc_pin"></a>
5.6.1 Enabling Boot with a POC Pin</h3>
<p >POC[6] must be pulled high with a secure boot-enabled image; otherwise, the boot-up will fail. All 16 RoT keys must be locked explicitly first, then secure boot can take effect. Otherwise, the ROM checks BST, and the BST check of BL2 will be skipped.</p>
<h3><a class="anchor" id="permanently_set_se_boot"></a>
5.6.2 Permanently Setting Secure Boot</h3>
<p >Use the eFUSE bit to permanently set secure boot. If secure boot is permanently enabled, the POC pin cannot enable or disable secure boot. Because this process is irrevocable, use caution while performing this operation.</p>
<p >When the system is with Arm TrustZone: </p><div class="fragment"><div class="line">BOARD# modprobe optee</div>
<div class="line">BOARD# tee-supplicant&amp;</div>
<div class="line">BOARD# test_program_otp --permanentlyenablesecureboot</div>
</div><!-- fragment --><p >When the system is without Arm TrustZone: </p><div class="fragment"><div class="line">BOARD# modprobe amba_otp</div>
<div class="line">BOARD# test_otp --permanentlyenablesecureboot</div>
</div><!-- fragment --><p >Typically, this step is performed during the manufacturing process. On the CV5x / CV7x / CV3 EVK board, the compiler must additionally select "Force to enable secure boot" in menuconfig.</p>
<h2><a class="anchor" id="run_se_boot"></a>
5.7 Running Secure Boot</h2>
<p >If the public key is not programmed in OTP, or if secure boot is disabled, the first two authentications will be skipped. The console will print a <code>Skipping ROTPK verification</code> message, as shown below: </p><div class="fragment"><div class="line">NOTICE:  BL2: v1.5(release):v1.5-30-g70336698</div>
<div class="line">NOTICE:  BL2: Built : 11:46:57, Sep 29 2018</div>
<div class="line">NOTICE:  ROTPK is not deployed on platform. Skipping ROTPK verification.</div>
<div class="line">NOTICE:  BL2: Booting BL31</div>
<div class="line"> </div>
<div class="line">NOTICE:  BL31: Secure code at 0x100000</div>
<div class="line">NOTICE:  BL31: Non Secure code at 0x1000000</div>
<div class="line">NOTICE:  BL31: v1.5(release):v1.5-30-g70336698</div>
<div class="line">NOTICE:  BL31: Built : 11:47:12, Sep 29 2018</div>
<div class="line"> </div>
<div class="line">NOTICE:  Verify OK.</div>
<div class="line">Authenticate Kernel: pass.</div>
</div><!-- fragment --><p >If the public key is programmed in OTP and secure boot is enabled, the full chain of authentications will take effect. The console prints the message, as shown below: </p><div class="fragment"><div class="line">NOTICE:  BL2: v1.5(release):v1.5-30-g70336698</div>
<div class="line">NOTICE:  BL2: Built : 11:46:57, Sep 29 2018</div>
<div class="line">NOTICE:  BL2: Booting BL31</div>
<div class="line"> </div>
<div class="line">NOTICE:  BL31: Secure code at 0x100000</div>
<div class="line">NOTICE:  BL31: Non Secure code at 0x1000000</div>
<div class="line">NOTICE:  BL31: v1.5(release):v1.5-30-g70336698</div>
<div class="line">NOTICE:  BL31: Built : 11:47:12, Sep 29 2018</div>
<div class="line"> </div>
<div class="line">NOTICE:  Verify OK.</div>
<div class="line">Authenticate Kernel: pass.</div>
</div><!-- fragment --><h2><a class="anchor" id="rot_revoke"></a>
5.8 RoT Key Revocation</h2>
<p >For APIs that can revoke the first two public keys, use the command below (with Arm TrustZone): </p><div class="fragment"><div class="line">BOARD# modprobe optee</div>
<div class="line">BOARD# tee-supplicant&amp;</div>
<div class="line">BOARD# test_program_otp --revokekey %%d</div>
</div><!-- fragment --><p >For APIs that can revoke the first two public keys, use the command below (without Arm TrustZone): </p><div class="fragment"><div class="line">BOARD# modprobe amba_otp</div>
<div class="line">BOARD# test_otp --revokekey %%d</div>
</div><!-- fragment --> </div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="../../doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.3 </li>
  </ul>
</div>
</body>
</html>
