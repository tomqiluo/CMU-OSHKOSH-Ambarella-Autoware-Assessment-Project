<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.3"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Driver: test_mempart.c</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript" src="../../navtreedata.js"></script>
<script type="text/javascript" src="../../navtree.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/search.js"></script>
<link rel="search" href="../../search_opensearch.php?v=opensearch.xml" type="application/opensearchdescription+xml" title="Driver"/>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
<link href="../../doxygen-awesome.css" rel="stylesheet" type="text/css"/>
<link href="../../doxygen-awesome-sidebar-only.css" rel="stylesheet" type="text/css"/>
<link href="../../doxygen-ambarella.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="../../Ambarella.png"/></td>
  <td id="projectalign">
   <div id="projectname">Driver<span id="projectnumber">&#160;Cooper_1.6.0 (CV72 &amp; CV3) @ 2024.07.10 14:12:44</span>
   </div>
   <div id="projectbrief">placeholder</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.3 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "../../search",'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('../../',true,true,'search.html','Search');
  $(document).ready(function() {
    if ($('.searchresults').length > 0) { searchBox.DOMSearchField().focus(); }
  });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('da/d81/test_mempart_8c-example.html','../../'); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<div class="header">
  <div class="headertitle"><div class="title">test_mempart.c</div></div>
</div><!--header-->
<div class="contents">
<p >@This is a example file to show how to configure memory.</p>
<div class="fragment"><div class="line"><span class="comment">/*******************************************************************************</span></div>
<div class="line"><span class="comment"> * test_mempart.c</span></div>
<div class="line"><span class="comment"> *</span></div>
<div class="line"><span class="comment"> * History:</span></div>
<div class="line"><span class="comment"> *  2018/03/21 - [Ming Wen] created file</span></div>
<div class="line"><span class="comment"> *</span></div>
<div class="line"><span class="comment"> * Copyright (c) 2018 Ambarella International LP</span></div>
<div class="line"><span class="comment"> *</span></div>
<div class="line"><span class="comment"> * This file and its contents ( &quot;Software&quot; ) are protected by intellectual</span></div>
<div class="line"><span class="comment"> * property rights including, without limitation, U.S. and/or foreign</span></div>
<div class="line"><span class="comment"> * copyrights. This Software is also the confidential and proprietary</span></div>
<div class="line"><span class="comment"> * information of Ambarella International LP and its licensors. You may not use, reproduce,</span></div>
<div class="line"><span class="comment"> * disclose, distribute, modify, or otherwise prepare derivative works of this</span></div>
<div class="line"><span class="comment"> * Software or any portion thereof except pursuant to a signed license agreement</span></div>
<div class="line"><span class="comment"> * or nondisclosure agreement with Ambarella International LP or its authorized affiliates.</span></div>
<div class="line"><span class="comment"> * In the absence of such an agreement, you agree to promptly notify and return</span></div>
<div class="line"><span class="comment"> * this Software to Ambarella International LP.</span></div>
<div class="line"><span class="comment"> *</span></div>
<div class="line"><span class="comment"> * This file includes sample code and is only for internal testing and evaluation.  If you</span></div>
<div class="line"><span class="comment"> * distribute this sample code (whether in source, object, or binary code form), it will be</span></div>
<div class="line"><span class="comment"> * without any warranty or indemnity protection from Ambarella International LP or its affiliates.</span></div>
<div class="line"><span class="comment"> *</span></div>
<div class="line"><span class="comment"> * THIS SOFTWARE IS PROVIDED &quot;AS IS&quot; AND ANY EXPRESS OR IMPLIED WARRANTIES,</span></div>
<div class="line"><span class="comment"> * INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF NON-INFRINGEMENT,</span></div>
<div class="line"><span class="comment"> * MERCHANTABILITY, AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED.</span></div>
<div class="line"><span class="comment"> * IN NO EVENT SHALL AMBARELLA INTERNATIONAL LP OR ITS AFFILIATES BE LIABLE FOR ANY DIRECT,</span></div>
<div class="line"><span class="comment"> * INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES</span></div>
<div class="line"><span class="comment"> * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;</span></div>
<div class="line"><span class="comment"> * LOSS OF USE, DATA, OR PROFITS; COMPUTER FAILURE OR MALFUNCTION; OR BUSINESS</span></div>
<div class="line"><span class="comment"> * INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN</span></div>
<div class="line"><span class="comment"> * CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)</span></div>
<div class="line"><span class="comment"> * ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE</span></div>
<div class="line"><span class="comment"> * POSSIBILITY OF SUCH DAMAGE.</span></div>
<div class="line"><span class="comment"> *</span></div>
<div class="line"><span class="comment">******************************************************************************/</span></div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#include &lt;unistd.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;fcntl.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;stdio.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;stdlib.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;string.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;ctype.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;errno.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;getopt.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;sched.h&gt;</span></div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#include &lt;sys/stat.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;sys/ioctl.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;sys/mman.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;sys/time.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;sys/wait.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;time.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;assert.h&gt;</span></div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#include &lt;<a class="code" href="../../de/ddc/basetypes_8h.html">basetypes.h</a>&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;iav_ioctl.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;signal.h&gt;</span></div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#ifndef AM_IOCTL</span></div>
<div class="line"><span class="preprocessor">#define AM_IOCTL(_filp, _cmd, _arg) \</span></div>
<div class="line"><span class="preprocessor">        do {                        \</span></div>
<div class="line"><span class="preprocessor">            if (ioctl(_filp, _cmd, _arg) &lt; 0) { \</span></div>
<div class="line"><span class="preprocessor">                perror(#_cmd);      \</span></div>
<div class="line"><span class="preprocessor">                return -1;          \</span></div>
<div class="line"><span class="preprocessor">            }                       \</span></div>
<div class="line"><span class="preprocessor">        } while (0)</span></div>
<div class="line"><span class="preprocessor">#endif</span></div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#define ANONYMOUS_MMB_TAG           (0xFF)</span></div>
<div class="line"><span class="preprocessor">#define is_anon_mmb(id)             ((id &amp; 0xFF) == ANONYMOUS_MMB_TAG)</span></div>
<div class="line"><span class="preprocessor">#define is_custom_mmb(id)           ((id &gt;= IAV_PART_USR_CUSTOM_ID_FIRST) &amp;&amp; (id &lt; IAV_PART_USR_CUSTOM_ID_LAST))</span></div>
<div class="line"> </div>
<div class="line"><span class="keyword">typedef</span> <span class="keyword">enum</span> {</div>
<div class="line">    FP_MAP_ANON_PART = 1 &lt;&lt; 0,</div>
<div class="line">    FP_NOT_QUIT = 1 &lt;&lt; 1,</div>
<div class="line">    FP_CREATE_FD = 1 &lt;&lt; 2,</div>
<div class="line">    CP_MAP_ANON_PART = 1 &lt;&lt; 4,</div>
<div class="line">    CP_NOT_QUIT = 1 &lt;&lt; 5,</div>
<div class="line">    CP_CREATE_FD = 1 &lt;&lt; 6,</div>
<div class="line">} anon_test_mode;</div>
<div class="line"> </div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">int</span> <a id="a0" name="a0"></a><a class="code hl_variableRef" target="_blank" href="../../../video/d4/daa/vin__init_8c.html#a5294002f7dca0cd9bcc0009a27895ef7">fd_iav</a>;</div>
<div class="line"><span class="keyword">static</span> <a class="code hl_typedefRef" target="_blank" href="../../../library/d2/d47/asf__structure_8h.html#afaa62991928fb9fb18ff0db62a040aba">u32</a> test_mode_map = 0;</div>
<div class="line"><span class="keyword">static</span> <a class="code hl_typedefRef" target="_blank" href="../../../library/d2/d47/asf__structure_8h.html#afaa62991928fb9fb18ff0db62a040aba">u32</a> mem_part_id = 0xFFFFFFFF;</div>
<div class="line"><span class="keyword">static</span> <a class="code hl_typedefRef" target="_blank" href="../../../library/d2/d47/asf__structure_8h.html#a92c50087ca0e64fa93fc59402c55f8ca">u8</a> alloc_anon_mem_part_flag = 0;</div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> mem_part_size = 0;</div>
<div class="line"><span class="keyword">static</span> <a class="code hl_typedefRef" target="_blank" href="../../../library/d2/d47/asf__structure_8h.html#a92c50087ca0e64fa93fc59402c55f8ca">u8</a> free_mem = 0;</div>
<div class="line"><span class="keyword">static</span> <a class="code hl_typedefRef" target="_blank" href="../../../library/d2/d47/asf__structure_8h.html#a92c50087ca0e64fa93fc59402c55f8ca">u8</a> cached = 0;</div>
<div class="line"><span class="keyword">static</span> <a class="code hl_typedefRef" target="_blank" href="../../../library/d2/d47/asf__structure_8h.html#a92c50087ca0e64fa93fc59402c55f8ca">u8</a> shared = 0;</div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#define NO_ARG      0</span></div>
<div class="line"><span class="preprocessor">#define HAS_ARG     1</span></div>
<div class="line"> </div>
<div class="line"><span class="keyword">struct </span><a id="_a1" name="_a1"></a><a class="code hl_structRef" target="_blank" href="../../../video/d2/d4b/structhint__s.html">hint_s</a> {</div>
<div class="line">    <span class="keyword">const</span> <span class="keywordtype">char</span> *<a id="a2" name="a2"></a><a class="code hl_variableRef" target="_blank" href="../../../video/d2/d4b/structhint__s.html#aa56a50443afd9d2f7cf738fb7ffba168">arg</a>;</div>
<div class="line">    <span class="keyword">const</span> <span class="keywordtype">char</span> *<a id="a3" name="a3"></a><a class="code hl_variableRef" target="_blank" href="../../../video/d2/d4b/structhint__s.html#a2799cca21c05a4f99f4c8b3b178d0133">str</a>;</div>
<div class="line">};</div>
<div class="line"> </div>
<div class="line"><span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">char</span> *<a id="a4" name="a4"></a>short_options = <span class="stringliteral">&quot;acfm:Ss:t:&quot;</span>;</div>
<div class="line"> </div>
<div class="line"><span class="keyword">static</span> <span class="keyword">struct </span>option <a id="a5" name="a5"></a>long_options[] = {</div>
<div class="line">    {<span class="stringliteral">&quot;alloc_anon_mem_part&quot;</span>,     <a id="a6" name="a6"></a><a class="code hl_defineRef" target="_blank" href="../../../video/d3/d6c/test__fb_8h.html#a2d0022791143e08a64621257f48d9739">NO_ARG</a>, 0, <span class="charliteral">&#39;a&#39;</span>},</div>
<div class="line">    {<span class="stringliteral">&quot;mem_part_id&quot;</span>,             <a id="a7" name="a7"></a><a class="code hl_defineRef" target="_blank" href="../../../video/d3/d6c/test__fb_8h.html#affec572f11fcba59ce0cd49cbcd0110f">HAS_ARG</a>, 0, <span class="charliteral">&#39;m&#39;</span>},</div>
<div class="line">    {<span class="stringliteral">&quot;mem_part_size&quot;</span>,           <a class="code hl_defineRef" target="_blank" href="../../../video/d3/d6c/test__fb_8h.html#affec572f11fcba59ce0cd49cbcd0110f">HAS_ARG</a>, 0, <span class="charliteral">&#39;s&#39;</span>},</div>
<div class="line">    {<span class="stringliteral">&quot;cached&quot;</span>,                  <a class="code hl_defineRef" target="_blank" href="../../../video/d3/d6c/test__fb_8h.html#a2d0022791143e08a64621257f48d9739">NO_ARG</a>, 0, <span class="charliteral">&#39;c&#39;</span>},</div>
<div class="line">    {<span class="stringliteral">&quot;shared&quot;</span>,                  <a class="code hl_defineRef" target="_blank" href="../../../video/d3/d6c/test__fb_8h.html#a2d0022791143e08a64621257f48d9739">NO_ARG</a>, 0, <span class="charliteral">&#39;S&#39;</span>},</div>
<div class="line">    {<span class="stringliteral">&quot;free&quot;</span>,                    <a class="code hl_defineRef" target="_blank" href="../../../video/d3/d6c/test__fb_8h.html#a2d0022791143e08a64621257f48d9739">NO_ARG</a>, 0, <span class="charliteral">&#39;f&#39;</span>},</div>
<div class="line">    {<span class="stringliteral">&quot;test_mode&quot;</span>,                   <a class="code hl_defineRef" target="_blank" href="../../../video/d3/d6c/test__fb_8h.html#affec572f11fcba59ce0cd49cbcd0110f">HAS_ARG</a>, 0, <span class="charliteral">&#39;t&#39;</span>},</div>
<div class="line">    {0, 0, 0, 0}</div>
<div class="line">};</div>
<div class="line"> </div>
<div class="line"><span class="keyword">static</span> <span class="keyword">const</span> <span class="keyword">struct </span><a class="code hl_structRef" target="_blank" href="../../../video/d2/d4b/structhint__s.html">hint_s</a> <a id="a8" name="a8"></a>hint[] = {</div>
<div class="line">    {<span class="stringliteral">&quot;&quot;</span>,    <span class="stringliteral">&quot;allocate anonymous memory part&quot;</span>},</div>
<div class="line">    {<span class="stringliteral">&quot;&quot;</span>, <span class="stringliteral">&quot;\tmemory part id\n&quot;</span></div>
<div class="line">            <span class="stringliteral">&quot;\t\t\t\tPrivate:\n&quot;</span></div>
<div class="line">            <span class="stringliteral">&quot;\t\t\t\t\tDSP:0\tBSB:1\tUSR:2\tMV:3\tQPMATRIX:5\tWARP:6\tQUANT:7\tIMG:8\tMASK:9\n&quot;</span></div>
<div class="line">            <span class="stringliteral">&quot;\t\t\t\t\tFB_DATA:10\tFB_AUDIO:11\tINTRA_PB:12\tSTAT:13\tBSH:14\tDSP_DEF_CMD:15\tDSP_UCODE:16\n&quot;</span></div>
<div class="line">            <span class="stringliteral">&quot;\t\t\t\t\tDSP_LOG:17\tDSP_FIFO:18\tDSP_RSV:19\tIAV_RSV:20\tPREALLOC:21\tPREALLOC2:22\n&quot;</span></div>
<div class="line">            <span class="stringliteral">&quot;\t\t\t\t\tQPMATRIX_RAW:24\tINT_BSB:26\tEXTRA_RAW:27\tHEVC_SCALELIST:29\tBLUR:30\n&quot;</span></div>
<div class="line">            <span class="stringliteral">&quot;\t\t\t\t\tARB_BLUR:31\tBLEND_ALPHA:32\tMULTI_COLOR_MASK:33\tTFC:34\tAISP:38\tDEC_BSB:39\n&quot;</span></div>
<div class="line">            <span class="stringliteral">&quot;\t\t\t\t\tIMG_STATIS:41\tBLEND_WARP:42\n&quot;</span></div>
<div class="line">            <span class="stringliteral">&quot;\t\t\t\tShared(--shared):\n&quot;</span></div>
<div class="line">            <span class="stringliteral">&quot;\t\t\t\t\tOVERLAY:4\tPYRAMID_POOL:23\tCANVAS_POOL:25\tRAW_POOL:28\tVOUT0_FB:35\n&quot;</span></div>
<div class="line">            <span class="stringliteral">&quot;\t\t\t\t\tVOUT1_FB:36\tVOUT2_FB:37\tDSP_CV:40\tIMG_NN:43\n&quot;</span>},</div>
<div class="line">    {<span class="stringliteral">&quot;&quot;</span>,    <span class="stringliteral">&quot;\tmemory part size&quot;</span>},</div>
<div class="line">    {<span class="stringliteral">&quot;&quot;</span>,    <span class="stringliteral">&quot;\t\tenable cache&quot;</span>},</div>
<div class="line">    {<span class="stringliteral">&quot;&quot;</span>,    <span class="stringliteral">&quot;\t\tallocate from sharable mem&quot;</span>},</div>
<div class="line">    {<span class="stringliteral">&quot;&quot;</span>,    <span class="stringliteral">&quot;\t\tfree memory part&quot;</span>},</div>
<div class="line">    {<span class="stringliteral">&quot;&quot;</span>,    <span class="stringliteral">&quot;\t\tAnon MMB test mode. Bits: 0: parent process map anon mmb, 1: parent process not quit, &quot;</span></div>
<div class="line">        <span class="stringliteral">&quot;2: parent process create iav_fd. 4: fork child process and map anon mmb. &quot;</span></div>
<div class="line">        <span class="stringliteral">&quot;5: fork child process and keep it not quitting. 6: fork child process and create iav_fd for it&quot;</span>},</div>
<div class="line">    {<span class="stringliteral">&quot;&quot;</span>, <span class="stringliteral">&quot;\t\t\tPrint more information\n&quot;</span>},</div>
<div class="line">};</div>
<div class="line"> </div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">void</span> <a id="a9" name="a9"></a>usage(<span class="keywordtype">void</span>)</div>
<div class="line">{</div>
<div class="line">    <a class="code hl_typedefRef" target="_blank" href="../../../library/d2/d47/asf__structure_8h.html#afaa62991928fb9fb18ff0db62a040aba">u32</a> i;</div>
<div class="line">    <span class="keywordflow">for</span> (i = 0; i &lt; <span class="keyword">sizeof</span>(long_options) / <span class="keyword">sizeof</span>(long_options[0]) - 1; i++) {</div>
<div class="line">        <span class="keywordflow">if</span> (isalpha(long_options[i].val))</div>
<div class="line">            printf(<span class="stringliteral">&quot;-%c &quot;</span>, long_options[i].val);</div>
<div class="line">        <span class="keywordflow">else</span></div>
<div class="line">            printf(<span class="stringliteral">&quot;   &quot;</span>);</div>
<div class="line">        printf(<span class="stringliteral">&quot;--%s&quot;</span>, long_options[i].<a id="a10" name="a10"></a>name);</div>
<div class="line">        <span class="keywordflow">if</span> (hint[i].<a class="code hl_variableRef" target="_blank" href="../../../video/d2/d4b/structhint__s.html#aa56a50443afd9d2f7cf738fb7ffba168">arg</a>[0] != 0)</div>
<div class="line">            printf(<span class="stringliteral">&quot; [%s]&quot;</span>, hint[i].<a class="code hl_variableRef" target="_blank" href="../../../video/d2/d4b/structhint__s.html#aa56a50443afd9d2f7cf738fb7ffba168">arg</a>);</div>
<div class="line">        printf(<span class="stringliteral">&quot;\t%s\n&quot;</span>, hint[i].<a class="code hl_variableRef" target="_blank" href="../../../video/d2/d4b/structhint__s.html#a2799cca21c05a4f99f4c8b3b178d0133">str</a>);</div>
<div class="line">    }</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">int</span> init_param(<span class="keywordtype">int</span> argc, <span class="keywordtype">char</span> **argv)</div>
<div class="line">{</div>
<div class="line">    <span class="keywordtype">int</span> ch;</div>
<div class="line">    <a class="code hl_typedefRef" target="_blank" href="../../../library/d2/d47/asf__structure_8h.html#afaa62991928fb9fb18ff0db62a040aba">u32</a> value;</div>
<div class="line">    <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> value_l;</div>
<div class="line">    <span class="keywordtype">int</span> option_index = 0;</div>
<div class="line"> </div>
<div class="line">    opterr = 0;</div>
<div class="line">    <span class="keywordflow">while</span> ((ch = getopt_long(argc, argv, short_options, long_options, &amp;option_index)) != -1) {</div>
<div class="line">        <span class="keywordflow">switch</span> (ch) {</div>
<div class="line">        <span class="keywordflow">case</span> <span class="charliteral">&#39;a&#39;</span>:</div>
<div class="line">            alloc_anon_mem_part_flag = 1;</div>
<div class="line">            <span class="keywordflow">break</span>;</div>
<div class="line">        <span class="keywordflow">case</span> <span class="charliteral">&#39;m&#39;</span>:</div>
<div class="line">            value = atoi(optarg);</div>
<div class="line">            mem_part_id = value;</div>
<div class="line">            <span class="keywordflow">break</span>;</div>
<div class="line">        <span class="keywordflow">case</span> <span class="charliteral">&#39;s&#39;</span>:</div>
<div class="line">            value_l = strtol(optarg, NULL, 16);</div>
<div class="line">            <span class="keywordflow">if</span> (value_l &lt;= 0) {</div>
<div class="line">                printf(<span class="stringliteral">&quot;invalid memory part size: %ld\n&quot;</span>, value_l);</div>
<div class="line">                <span class="keywordflow">return</span> -1;</div>
<div class="line">            }</div>
<div class="line">            mem_part_size = value_l;</div>
<div class="line">            <span class="keywordflow">break</span>;</div>
<div class="line">        <span class="keywordflow">case</span> <span class="charliteral">&#39;f&#39;</span>:</div>
<div class="line">            free_mem = 1;</div>
<div class="line">            <span class="keywordflow">break</span>;</div>
<div class="line">        <span class="keywordflow">case</span> <span class="charliteral">&#39;c&#39;</span>:</div>
<div class="line">            cached = 1;</div>
<div class="line">            <span class="keywordflow">break</span>;</div>
<div class="line">        <span class="keywordflow">case</span> <span class="charliteral">&#39;S&#39;</span>:</div>
<div class="line">            shared = 1;</div>
<div class="line">            <span class="keywordflow">break</span>;</div>
<div class="line">        <span class="keywordflow">case</span> <span class="charliteral">&#39;t&#39;</span>:</div>
<div class="line">            test_mode_map = strtol(optarg, NULL, 16);</div>
<div class="line">            printf(<span class="stringliteral">&quot;Anonymous MMB test mode map: 0x%x.\n&quot;</span>, test_mode_map);</div>
<div class="line">            <span class="keywordflow">break</span>;</div>
<div class="line">        <span class="keywordflow">default</span>:</div>
<div class="line">            printf(<span class="stringliteral">&quot;unknown option found: %c\n&quot;</span>, ch);</div>
<div class="line">            <span class="keywordflow">return</span> -1;</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">return</span> 0;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keyword">struct </span>mem_part_info {</div>
<div class="line">    <span class="keywordtype">char</span> <a class="code hl_variableRef" target="_blank" href="../../../library/d1/d82/cJSON_8h.html#a25d22ecc7e656d2c59332072684e8766">name</a>[16];</div>
<div class="line">};</div>
<div class="line"> </div>
<div class="line"><span class="comment">/* When a new iav_part_id is added, following table should be updated correspondingly. */</span></div>
<div class="line"><span class="keyword">static</span> <span class="keyword">const</span> <span class="keyword">struct </span>mem_part_info G_mem_part_infos[<a id="a11" name="a11"></a><a class="code hl_variableRef" target="_blank" href="../../../library/de/d89/iav__ioctl_8h.html#a6e160acba2472e919b41321d8fbe72faae8bf4bdd1a6189a4288871c67ed008eb">IAV_PART_NUM</a>] = {</div>
<div class="line">    [<a id="a12" name="a12"></a><a class="code hl_variableRef" target="_blank" href="../../../library/de/d89/iav__ioctl_8h.html#a6e160acba2472e919b41321d8fbe72faa233f816c90d5a9175965d509dc2a3faa">IAV_PART_DSP</a>] = { <span class="stringliteral">&quot;DSP&quot;</span> },</div>
<div class="line">    [<a id="a13" name="a13"></a><a class="code hl_variableRef" target="_blank" href="../../../library/de/d89/iav__ioctl_8h.html#a6e160acba2472e919b41321d8fbe72faa22e9916a6a5e924edea92851e6c77b45">IAV_PART_INT_BSB</a>] = { <span class="stringliteral">&quot;INTERNAL BSB&quot;</span> },</div>
<div class="line">    [<a id="a14" name="a14"></a><a class="code hl_variableRef" target="_blank" href="../../../library/de/d89/iav__ioctl_8h.html#a6e160acba2472e919b41321d8fbe72faa09de9a53727022c18429db179a1d1ead">IAV_PART_BSB</a>] = { <span class="stringliteral">&quot;BSB&quot;</span> },</div>
<div class="line">    [<a id="a15" name="a15"></a><a class="code hl_variableRef" target="_blank" href="../../../library/de/d89/iav__ioctl_8h.html#a6e160acba2472e919b41321d8fbe72faa9c6871121818aa47f659dea5f7b93f1a">IAV_PART_USR</a>] = { <span class="stringliteral">&quot;USR&quot;</span> },</div>
<div class="line">    [<a id="a16" name="a16"></a><a class="code hl_variableRef" target="_blank" href="../../../library/de/d89/iav__ioctl_8h.html#a6e160acba2472e919b41321d8fbe72faaa03c2766b8cbf48de71f8f1c59529561">IAV_PART_EXTRA_RAW</a>] = { <span class="stringliteral">&quot;EXTRA RAW&quot;</span> },</div>
<div class="line">    [<a id="a17" name="a17"></a><a class="code hl_variableRef" target="_blank" href="../../../library/de/d89/iav__ioctl_8h.html#a6e160acba2472e919b41321d8fbe72faaf2d7fb4e593ac07b0b446e594627d884">IAV_PART_MV</a>] = { <span class="stringliteral">&quot;MV&quot;</span> },</div>
<div class="line">    [<a id="a18" name="a18"></a><a class="code hl_variableRef" target="_blank" href="../../../library/de/d89/iav__ioctl_8h.html#a6e160acba2472e919b41321d8fbe72faa315de3f1ad692322b81caff751c23f30">IAV_PART_OVERLAY</a>] = { <span class="stringliteral">&quot;OVERLAY&quot;</span> },</div>
<div class="line">    [<a id="a19" name="a19"></a><a class="code hl_variableRef" target="_blank" href="../../../library/de/d89/iav__ioctl_8h.html#a6e160acba2472e919b41321d8fbe72faa621880ecce8c6a4ad2fffc44f069f51e">IAV_PART_QPMATRIX</a>] = { <span class="stringliteral">&quot;QPMATRIX&quot;</span> },</div>
<div class="line">    [<a id="a20" name="a20"></a><a class="code hl_variableRef" target="_blank" href="../../../library/de/d89/iav__ioctl_8h.html#a6e160acba2472e919b41321d8fbe72faa1fe3b6a4302777ead0b2987cfd9efced">IAV_PART_WARP</a>] = { <span class="stringliteral">&quot;WARP&quot;</span> },</div>
<div class="line">    [<a id="a21" name="a21"></a><a class="code hl_variableRef" target="_blank" href="../../../library/de/d89/iav__ioctl_8h.html#a6e160acba2472e919b41321d8fbe72faabfd60e72472e0c594136aba83cb451ce">IAV_PART_QUANT</a>] = { <span class="stringliteral">&quot;QUANT&quot;</span> },</div>
<div class="line">    [<a id="a22" name="a22"></a><a class="code hl_variableRef" target="_blank" href="../../../library/de/d89/iav__ioctl_8h.html#a6e160acba2472e919b41321d8fbe72faa0c32372b38a2c1fb1f59cff7384a598a">IAV_PART_IMG</a>] = { <span class="stringliteral">&quot;IMG&quot;</span> },</div>
<div class="line">    [<a id="a23" name="a23"></a><a class="code hl_variableRef" target="_blank" href="../../../library/de/d89/iav__ioctl_8h.html#a6e160acba2472e919b41321d8fbe72faa2819f76d7d531f88060b844ede1f5c48">IAV_PART_MASK</a>] = { <span class="stringliteral">&quot;MASK&quot;</span> },</div>
<div class="line">    [<a id="a24" name="a24"></a><a class="code hl_variableRef" target="_blank" href="../../../library/de/d89/iav__ioctl_8h.html#a6e160acba2472e919b41321d8fbe72faae402ae21455f584313ee15048a93c162">IAV_PART_FB_DATA</a>] = { <span class="stringliteral">&quot;FB_ DATA&quot;</span> },</div>
<div class="line">    [<a id="a25" name="a25"></a><a class="code hl_variableRef" target="_blank" href="../../../library/de/d89/iav__ioctl_8h.html#a6e160acba2472e919b41321d8fbe72faa74b9451b28ac6f65fd8b6253a713140f">IAV_PART_FB_AUDIO</a>] = { <span class="stringliteral">&quot;FB_AUDIO&quot;</span> },</div>
<div class="line">    [<a id="a26" name="a26"></a><a class="code hl_variableRef" target="_blank" href="../../../library/de/d89/iav__ioctl_8h.html#a6e160acba2472e919b41321d8fbe72faa942d032c5723c753dcd3e665059068e9">IAV_PART_INTRA_PB</a>] = { <span class="stringliteral">&quot;INTRA_PB&quot;</span> },</div>
<div class="line">    [<a id="a27" name="a27"></a><a class="code hl_variableRef" target="_blank" href="../../../library/de/d89/iav__ioctl_8h.html#a6e160acba2472e919b41321d8fbe72faa3c297ffd69c8a1786e483623ccfefc13">IAV_PART_STAT</a>] = { <span class="stringliteral">&quot;STAT&quot;</span> },</div>
<div class="line">    [<a id="a28" name="a28"></a><a class="code hl_variableRef" target="_blank" href="../../../library/de/d89/iav__ioctl_8h.html#a6e160acba2472e919b41321d8fbe72faaa2e888adefc507c223787873c528a326">IAV_PART_BSH</a>] = { <span class="stringliteral">&quot;BSH&quot;</span> },</div>
<div class="line">    [<a id="a29" name="a29"></a><a class="code hl_variableRef" target="_blank" href="../../../library/de/d89/iav__ioctl_8h.html#a6e160acba2472e919b41321d8fbe72faa7454b29b233125c90592c1d0e1d508ee">IAV_PART_DSP_DEF_CMD</a>] = { <span class="stringliteral">&quot;DSP_DEF_CMD&quot;</span> },</div>
<div class="line">    [<a id="a30" name="a30"></a><a class="code hl_variableRef" target="_blank" href="../../../library/de/d89/iav__ioctl_8h.html#a6e160acba2472e919b41321d8fbe72faa26d57125544ec601deb6db6d9365c68c">IAV_PART_DSP_UCODE</a>] = { <span class="stringliteral">&quot;DSP_UCODE&quot;</span> },</div>
<div class="line">    [<a id="a31" name="a31"></a><a class="code hl_variableRef" target="_blank" href="../../../library/de/d89/iav__ioctl_8h.html#a6e160acba2472e919b41321d8fbe72faac9f20e386be9ea25538d81e6da6bb787">IAV_PART_DSP_LOG</a>] = { <span class="stringliteral">&quot;DSP_LOG&quot;</span> },</div>
<div class="line">    [<a id="a32" name="a32"></a><a class="code hl_variableRef" target="_blank" href="../../../library/de/d89/iav__ioctl_8h.html#a6e160acba2472e919b41321d8fbe72faac92415d3bb4fcd94f2ff84541ac70af4">IAV_PART_DSP_FIFO</a>] = { <span class="stringliteral">&quot;DSP_FIFO&quot;</span> },</div>
<div class="line">    [<a id="a33" name="a33"></a><a class="code hl_variableRef" target="_blank" href="../../../library/de/d89/iav__ioctl_8h.html#a6e160acba2472e919b41321d8fbe72faafee8e1abf6153e9e99ffce0efd2625ab">IAV_PART_DSP_RSV</a>] = { <span class="stringliteral">&quot;DSP_RSV&quot;</span> },</div>
<div class="line">    [<a id="a34" name="a34"></a><a class="code hl_variableRef" target="_blank" href="../../../library/de/d89/iav__ioctl_8h.html#a6e160acba2472e919b41321d8fbe72faafe26704ff591e9b222689adc2795f0cb">IAV_PART_IAV_RSV</a>] = { <span class="stringliteral">&quot;IAV_RSV&quot;</span> },</div>
<div class="line">    [<a id="a35" name="a35"></a><a class="code hl_variableRef" target="_blank" href="../../../library/de/d89/iav__ioctl_8h.html#a6e160acba2472e919b41321d8fbe72faa2e84b8119830cf9cf2a333d77624ac4e">IAV_PART_PREALLOC</a>] = { <span class="stringliteral">&quot;PREALLOC&quot;</span> },</div>
<div class="line">    [<a id="a36" name="a36"></a><a class="code hl_variableRef" target="_blank" href="../../../library/de/d89/iav__ioctl_8h.html#a6e160acba2472e919b41321d8fbe72faa6c57984d6d77666bdd4c13782bc74537">IAV_PART_PREALLOC2</a>] = { <span class="stringliteral">&quot;PREALLOC2&quot;</span> },</div>
<div class="line">    [<a id="a37" name="a37"></a><a class="code hl_variableRef" target="_blank" href="../../../library/de/d89/iav__ioctl_8h.html#a6e160acba2472e919b41321d8fbe72faaad5750dccb3683fae8e59730b169f0d2">IAV_PART_PYRAMID_POOL</a>] = { <span class="stringliteral">&quot;PYRAMID_POOL&quot;</span> },</div>
<div class="line">    [<a id="a38" name="a38"></a><a class="code hl_variableRef" target="_blank" href="../../../library/de/d89/iav__ioctl_8h.html#a6e160acba2472e919b41321d8fbe72faac613f0c56c29d369d34ec5ef0b7e1137">IAV_PART_QPMATRIX_RAW</a>] = { <span class="stringliteral">&quot;QPMATRIX_RAW&quot;</span> },</div>
<div class="line">    [<a id="a39" name="a39"></a><a class="code hl_variableRef" target="_blank" href="../../../library/de/d89/iav__ioctl_8h.html#a6e160acba2472e919b41321d8fbe72faaad312de47a183da5f2167b10c8c1e528">IAV_PART_CANVAS_POOL</a>] = { <span class="stringliteral">&quot;CANVAS_POOL&quot;</span> },</div>
<div class="line">    [<a id="a40" name="a40"></a><a class="code hl_variableRef" target="_blank" href="../../../library/de/d89/iav__ioctl_8h.html#a6e160acba2472e919b41321d8fbe72faa3a7c67c8501dec6873b2d59fc7f147aa">IAV_PART_RAW_POOL</a>] = { <span class="stringliteral">&quot;RAW_POOL&quot;</span> },</div>
<div class="line">    [<a id="a41" name="a41"></a><a class="code hl_variableRef" target="_blank" href="../../../library/de/d89/iav__ioctl_8h.html#a6e160acba2472e919b41321d8fbe72faabac3f400694c9ab52d7954615e3d55fc">IAV_PART_H26X_SCALELIST</a>] = { <span class="stringliteral">&quot;H26X_SCALELIST&quot;</span> },</div>
<div class="line">    [<a id="a42" name="a42"></a><a class="code hl_variableRef" target="_blank" href="../../../library/de/d89/iav__ioctl_8h.html#a6e160acba2472e919b41321d8fbe72faa902ffde491d07bfcca4629ea183176e0">IAV_PART_BLUR</a>] = { <span class="stringliteral">&quot;BLUR&quot;</span> },</div>
<div class="line">    [<a id="a43" name="a43"></a><a class="code hl_variableRef" target="_blank" href="../../../library/de/d89/iav__ioctl_8h.html#a6e160acba2472e919b41321d8fbe72faa3f4aff5d8a407d603950e09d9fbe2a93">IAV_PART_ARB_BLUR</a>] = { <span class="stringliteral">&quot;ARB_BLUR&quot;</span> },</div>
<div class="line">    [<a id="a44" name="a44"></a><a class="code hl_variableRef" target="_blank" href="../../../library/de/d89/iav__ioctl_8h.html#a6e160acba2472e919b41321d8fbe72faa72a09b245ba600e41cfd5a64066abf87">IAV_PART_BLEND_ALPHA</a>] = { <span class="stringliteral">&quot;BLEND_ALPHA&quot;</span> },</div>
<div class="line">    [<a id="a45" name="a45"></a><a class="code hl_variableRef" target="_blank" href="../../../library/de/d89/iav__ioctl_8h.html#a6e160acba2472e919b41321d8fbe72faacc923273b59c36c7170ce5305d216e92">IAV_PART_MULTI_COLOR_MASK</a>] = { <span class="stringliteral">&quot;MULTI_COLOR_MASK&quot;</span> },</div>
<div class="line">    [<a id="a46" name="a46"></a><a class="code hl_variableRef" target="_blank" href="../../../library/de/d89/iav__ioctl_8h.html#a6e160acba2472e919b41321d8fbe72faa82ffd16e5cb663c68662304522537c86">IAV_PART_TFC</a>] = { <span class="stringliteral">&quot;TFC&quot;</span> },</div>
<div class="line">    [<a id="a47" name="a47"></a><a class="code hl_variableRef" target="_blank" href="../../../library/de/d89/iav__ioctl_8h.html#a6e160acba2472e919b41321d8fbe72faa2ebf9932f850939211ec959cd3019082">IAV_PART_VOUT0_FB</a>] = { <span class="stringliteral">&quot;VOUT0_FB&quot;</span> },</div>
<div class="line">    [<a id="a48" name="a48"></a><a class="code hl_variableRef" target="_blank" href="../../../library/de/d89/iav__ioctl_8h.html#a6e160acba2472e919b41321d8fbe72faa1bb1b706389305ada9a247e479f82144">IAV_PART_VOUT1_FB</a>] = { <span class="stringliteral">&quot;VOUT1_FB&quot;</span> },</div>
<div class="line">    [<a id="a49" name="a49"></a><a class="code hl_variableRef" target="_blank" href="../../../library/de/d89/iav__ioctl_8h.html#a6e160acba2472e919b41321d8fbe72faa0919acd85768e1b60d100a9dd9099c23">IAV_PART_VOUT2_FB</a>] = { <span class="stringliteral">&quot;VOUT2_FB&quot;</span> },</div>
<div class="line">    [<a id="a50" name="a50"></a><a class="code hl_variableRef" target="_blank" href="../../../library/de/d89/iav__ioctl_8h.html#a6e160acba2472e919b41321d8fbe72faaa572a56af5ca5ab6d2800a7956a1f98b">IAV_PART_AISP</a>] = { <span class="stringliteral">&quot;AISP&quot;</span> },</div>
<div class="line">    [<a id="a51" name="a51"></a><a class="code hl_variableRef" target="_blank" href="../../../library/de/d89/iav__ioctl_8h.html#a6e160acba2472e919b41321d8fbe72faaa293851e2a3e15874747ab53b2a260a6">IAV_PART_DSP_CV</a>] = { <span class="stringliteral">&quot;DSP_CV&quot;</span> },</div>
<div class="line">    [<a id="a52" name="a52"></a><a class="code hl_variableRef" target="_blank" href="../../../library/de/d89/iav__ioctl_8h.html#a6e160acba2472e919b41321d8fbe72faa4b0dad2693ec2555595ac0c55e863367">IAV_PART_BLEND_WARP</a>] = { <span class="stringliteral">&quot;BLEND_WARP&quot;</span> },</div>
<div class="line">    [<a id="a53" name="a53"></a><a class="code hl_variableRef" target="_blank" href="../../../library/de/d89/iav__ioctl_8h.html#a6e160acba2472e919b41321d8fbe72faa90fe4231819b679bc6512ef5a0b079c3">IAV_PART_IMG_NN</a>] = { <span class="stringliteral">&quot;IMG_NN&quot;</span> },</div>
<div class="line">};</div>
<div class="line"> </div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">int</span> show_mem_part_dram_layout(<a class="code hl_typedefRef" target="_blank" href="../../../library/d2/d47/asf__structure_8h.html#afaa62991928fb9fb18ff0db62a040aba">u32</a> mem_part_id)</div>
<div class="line">{</div>
<div class="line">    <span class="keyword">struct </span><a id="_a54" name="_a54"></a><a class="code hl_structRef" target="_blank" href="../../../library/de/dc3/structiav__querymem.html">iav_querymem</a> query_mem = {0};</div>
<div class="line">    <span class="keyword">struct </span><a id="_a55" name="_a55"></a><a class="code hl_structRef" target="_blank" href="../../../library/da/dae/structiav__mem__info.html">iav_mem_info</a> *mem_info = NULL;</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> ((mem_part_id &gt;= IAV_PART_NUM) &amp;&amp; !is_custom_mmb(mem_part_id)) {</div>
<div class="line">        <span class="keywordflow">return</span> -1;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    memset(&amp;query_mem, 0, <span class="keyword">sizeof</span>(query_mem));</div>
<div class="line">    query_mem.<a id="a56" name="a56"></a><a class="code hl_variableRef" target="_blank" href="../../../library/de/dc3/structiav__querymem.html#ae056de5bb92261e7a28350beeb5320f8">mid</a> = <a id="a57" name="a57"></a><a class="code hl_variableRef" target="_blank" href="../../../library/de/d89/iav__ioctl_8h.html#aa4ef4a9add627e30f58595a1e8a78225ad6cd45b3e12fec076b535370ba973524">IAV_MEM_PARTITION</a>;</div>
<div class="line">    query_mem.<a id="a58" name="a58"></a><a class="code hl_variableRef" target="_blank" href="../../../library/de/dc3/structiav__querymem.html#a5955e20d0c53be1145cf813759d92d67">arg</a>.<a id="a59" name="a59"></a><a class="code hl_variableRef" target="_blank" href="../../../library/de/dc3/structiav__querymem.html#a01d475486b14a28a0583e09be9e66982">partition</a>.<a id="a60" name="a60"></a><a class="code hl_variableRef" target="_blank" href="../../../library/d1/d73/structiav__mem__part__info.html#a189394c6bbc0d36422df8c5bc2ee1962">pid</a> = mem_part_id;</div>
<div class="line">    mem_info = &amp;query_mem.<a class="code hl_variableRef" target="_blank" href="../../../library/de/dc3/structiav__querymem.html#a5955e20d0c53be1145cf813759d92d67">arg</a>.<a class="code hl_variableRef" target="_blank" href="../../../library/de/dc3/structiav__querymem.html#a01d475486b14a28a0583e09be9e66982">partition</a>.<a id="a61" name="a61"></a><a class="code hl_variableRef" target="_blank" href="../../../library/d1/d73/structiav__mem__part__info.html#a3bc6cd5f612ef6d8254970d363348350">mem</a>;</div>
<div class="line">    <a id="a62" name="a62"></a><a class="code hl_defineRef" target="_blank" href="../../../video/de/ddf/vout__init__cfg_8c.html#a88a5b93883c34229851d6a7a93254850">AM_IOCTL</a>(fd_iav, <a id="a63" name="a63"></a>IAV_IOC_QUERY_MEMBLOCK, &amp;query_mem);</div>
<div class="line"> </div>
<div class="line">    printf(<span class="stringliteral">&quot;[%s %d] Base Address: [0x%08lX], Size [%8ld KB].\n&quot;</span>,</div>
<div class="line">        is_custom_mmb(mem_part_id) ? <span class="stringliteral">&quot;CUSTOM_MMB&quot;</span> : G_mem_part_infos[mem_part_id].name,</div>
<div class="line">        mem_part_id, mem_info-&gt;<a id="a64" name="a64"></a><a class="code hl_variableRef" target="_blank" href="../../../library/da/dae/structiav__mem__info.html#afde02ab53128286716345a7e3da30a7e">addr</a> + mem_info-&gt;<a id="a65" name="a65"></a><a class="code hl_variableRef" target="_blank" href="../../../library/da/dae/structiav__mem__info.html#ac1369a1f209735864674d22517edfa76">offset</a>, (mem_info-&gt;<a id="a66" name="a66"></a><a class="code hl_variableRef" target="_blank" href="../../../library/da/dae/structiav__mem__info.html#a9ee64c7b918513891b3834b93ad0e501">length</a> &gt;&gt; 10));</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">return</span> 0;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">int</span> alloc_mem_part(<a class="code hl_typedefRef" target="_blank" href="../../../library/d2/d47/asf__structure_8h.html#afaa62991928fb9fb18ff0db62a040aba">u32</a> mem_part_id, <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> mem_part_size, <a class="code hl_typedefRef" target="_blank" href="../../../library/d2/d47/asf__structure_8h.html#a92c50087ca0e64fa93fc59402c55f8ca">u8</a> cached, <a class="code hl_typedefRef" target="_blank" href="../../../library/d2/d47/asf__structure_8h.html#a92c50087ca0e64fa93fc59402c55f8ca">u8</a> shared)</div>
<div class="line">{</div>
<div class="line">    <span class="keyword">struct </span><a class="code hl_structRef" target="_blank" href="../../../library/de/dc3/structiav__querymem.html">iav_querymem</a> query_mem = {0};</div>
<div class="line">    <span class="keyword">struct </span><a id="_a67" name="_a67"></a><a class="code hl_structRef" target="_blank" href="../../../library/d8/d3d/structiav__alloc__mem__part.html">iav_alloc_mem_part</a> alloc_mem_part;</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> ((mem_part_id &gt;= IAV_PART_NUM) &amp;&amp; !is_custom_mmb(mem_part_id)) {</div>
<div class="line">        printf(<span class="stringliteral">&quot;invalid memory part id[%d]\n&quot;</span>, mem_part_id);</div>
<div class="line">        <span class="keywordflow">return</span> -1;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    memset(&amp;query_mem, 0, <span class="keyword">sizeof</span>(query_mem));</div>
<div class="line">    query_mem.<a class="code hl_variableRef" target="_blank" href="../../../library/de/dc3/structiav__querymem.html#ae056de5bb92261e7a28350beeb5320f8">mid</a> = <a class="code hl_variableRef" target="_blank" href="../../../library/de/d89/iav__ioctl_8h.html#aa4ef4a9add627e30f58595a1e8a78225ad6cd45b3e12fec076b535370ba973524">IAV_MEM_PARTITION</a>;</div>
<div class="line">    query_mem.<a class="code hl_variableRef" target="_blank" href="../../../library/de/dc3/structiav__querymem.html#a5955e20d0c53be1145cf813759d92d67">arg</a>.<a class="code hl_variableRef" target="_blank" href="../../../library/de/dc3/structiav__querymem.html#a01d475486b14a28a0583e09be9e66982">partition</a>.<a class="code hl_variableRef" target="_blank" href="../../../library/d1/d73/structiav__mem__part__info.html#a189394c6bbc0d36422df8c5bc2ee1962">pid</a> = mem_part_id;</div>
<div class="line">    <a class="code hl_defineRef" target="_blank" href="../../../video/de/ddf/vout__init__cfg_8c.html#a88a5b93883c34229851d6a7a93254850">AM_IOCTL</a>(fd_iav, IAV_IOC_QUERY_MEMBLOCK, &amp;query_mem);</div>
<div class="line">    <span class="keywordflow">if</span> (query_mem.<a class="code hl_variableRef" target="_blank" href="../../../library/de/dc3/structiav__querymem.html#a5955e20d0c53be1145cf813759d92d67">arg</a>.<a class="code hl_variableRef" target="_blank" href="../../../library/de/dc3/structiav__querymem.html#a01d475486b14a28a0583e09be9e66982">partition</a>.<a class="code hl_variableRef" target="_blank" href="../../../library/d1/d73/structiav__mem__part__info.html#a3bc6cd5f612ef6d8254970d363348350">mem</a>.<a class="code hl_variableRef" target="_blank" href="../../../library/da/dae/structiav__mem__info.html#a9ee64c7b918513891b3834b93ad0e501">length</a>) {</div>
<div class="line">        printf(<span class="stringliteral">&quot;[%s %d] has been allocated, pls free it first.\n&quot;</span>,</div>
<div class="line">            is_custom_mmb(mem_part_id) ? <span class="stringliteral">&quot;CUSTOM_MMB&quot;</span> : G_mem_part_infos[mem_part_id].name,</div>
<div class="line">            mem_part_id);</div>
<div class="line">        show_mem_part_dram_layout(mem_part_id);</div>
<div class="line">        <span class="keywordflow">return</span> -1;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    alloc_mem_part.pid = mem_part_id;</div>
<div class="line">    alloc_mem_part.length = mem_part_size;</div>
<div class="line">    alloc_mem_part.enable_cache = cached;</div>
<div class="line">    alloc_mem_part.from_private = !shared;</div>
<div class="line">    <a class="code hl_defineRef" target="_blank" href="../../../video/de/ddf/vout__init__cfg_8c.html#a88a5b93883c34229851d6a7a93254850">AM_IOCTL</a>(fd_iav, <a id="a68" name="a68"></a>IAV_IOC_ALLOC_MEM_PART, &amp;alloc_mem_part);</div>
<div class="line">    printf(<span class="stringliteral">&quot;[%s %d] has been allocated successfully.\n\tBase Address: [0x%08lX], Size [%8ld KB].\n&quot;</span>,</div>
<div class="line">        is_custom_mmb(mem_part_id) ? <span class="stringliteral">&quot;CUSTOM_MMB&quot;</span> : G_mem_part_infos[mem_part_id].name,</div>
<div class="line">        mem_part_id, alloc_mem_part.offset, (alloc_mem_part.length &gt;&gt; 10));</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">return</span> 0;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">int</span> map_anon_mem_part(<span class="keywordtype">int</span> iav_fd, <a class="code hl_typedefRef" target="_blank" href="../../../library/d2/d47/asf__structure_8h.html#afaa62991928fb9fb18ff0db62a040aba">u32</a> <span class="keywordtype">id</span>, <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> size)</div>
<div class="line">{</div>
<div class="line">    <span class="keyword">struct </span><a class="code hl_structRef" target="_blank" href="../../../library/de/dc3/structiav__querymem.html">iav_querymem</a> query_mem = {0};</div>
<div class="line">    <span class="keyword">struct </span><a id="_a69" name="_a69"></a><a class="code hl_structRef" target="_blank" href="../../../library/d1/d73/structiav__mem__part__info.html">iav_mem_part_info</a> *part_info = NULL;</div>
<div class="line">    <span class="keywordtype">int</span> ret = 0;</div>
<div class="line">    <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> buf_size;</div>
<div class="line">    <a class="code hl_typedefRef" target="_blank" href="../../../library/d2/d47/asf__structure_8h.html#a92c50087ca0e64fa93fc59402c55f8ca">u8</a> *addr;</div>
<div class="line"> </div>
<div class="line">    memset(&amp;query_mem, 0, <span class="keyword">sizeof</span>(query_mem));</div>
<div class="line">    query_mem.<a class="code hl_variableRef" target="_blank" href="../../../library/de/dc3/structiav__querymem.html#ae056de5bb92261e7a28350beeb5320f8">mid</a> = <a class="code hl_variableRef" target="_blank" href="../../../library/de/d89/iav__ioctl_8h.html#aa4ef4a9add627e30f58595a1e8a78225ad6cd45b3e12fec076b535370ba973524">IAV_MEM_PARTITION</a>;</div>
<div class="line">    part_info = &amp;query_mem.<a class="code hl_variableRef" target="_blank" href="../../../library/de/dc3/structiav__querymem.html#a5955e20d0c53be1145cf813759d92d67">arg</a>.<a class="code hl_variableRef" target="_blank" href="../../../library/de/dc3/structiav__querymem.html#a01d475486b14a28a0583e09be9e66982">partition</a>;</div>
<div class="line">    part_info-&gt;<a class="code hl_variableRef" target="_blank" href="../../../library/d1/d73/structiav__mem__part__info.html#a189394c6bbc0d36422df8c5bc2ee1962">pid</a> = id;</div>
<div class="line">    <span class="keywordflow">if</span> (ioctl(iav_fd, IAV_IOC_QUERY_MEMBLOCK, &amp;query_mem) &lt; 0) {</div>
<div class="line">        perror(<span class="stringliteral">&quot;IAV_IOC_QUERY_MEMBLOCK&quot;</span>);</div>
<div class="line">        ret = -1;</div>
<div class="line">        <span class="keywordflow">goto</span> MAP_ANON_MEM_PART_EXIT;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> (size == 0) {</div>
<div class="line">        printf(<span class="stringliteral">&quot;MMB[%d]:No map size specified, map total mmb. Size %ld.\n&quot;</span>, <span class="keywordtype">id</span>,</div>
<div class="line">            part_info-&gt;<a class="code hl_variableRef" target="_blank" href="../../../library/d1/d73/structiav__mem__part__info.html#a3bc6cd5f612ef6d8254970d363348350">mem</a>.<a class="code hl_variableRef" target="_blank" href="../../../library/da/dae/structiav__mem__info.html#a9ee64c7b918513891b3834b93ad0e501">length</a>);</div>
<div class="line">        buf_size = part_info-&gt;<a class="code hl_variableRef" target="_blank" href="../../../library/d1/d73/structiav__mem__part__info.html#a3bc6cd5f612ef6d8254970d363348350">mem</a>.<a class="code hl_variableRef" target="_blank" href="../../../library/da/dae/structiav__mem__info.html#a9ee64c7b918513891b3834b93ad0e501">length</a>;</div>
<div class="line">    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (size &gt; part_info-&gt;<a class="code hl_variableRef" target="_blank" href="../../../library/d1/d73/structiav__mem__part__info.html#a3bc6cd5f612ef6d8254970d363348350">mem</a>.<a class="code hl_variableRef" target="_blank" href="../../../library/da/dae/structiav__mem__info.html#a9ee64c7b918513891b3834b93ad0e501">length</a>) {</div>
<div class="line">        printf(<span class="stringliteral">&quot;MMB[%d]:Map size %ld is bigger than the mmb size %ld, map total mmb. Size %ld\n&quot;</span>,</div>
<div class="line">            <span class="keywordtype">id</span>, size, part_info-&gt;<a class="code hl_variableRef" target="_blank" href="../../../library/d1/d73/structiav__mem__part__info.html#a3bc6cd5f612ef6d8254970d363348350">mem</a>.<a class="code hl_variableRef" target="_blank" href="../../../library/da/dae/structiav__mem__info.html#a9ee64c7b918513891b3834b93ad0e501">length</a>, part_info-&gt;<a class="code hl_variableRef" target="_blank" href="../../../library/d1/d73/structiav__mem__part__info.html#a3bc6cd5f612ef6d8254970d363348350">mem</a>.<a class="code hl_variableRef" target="_blank" href="../../../library/da/dae/structiav__mem__info.html#a9ee64c7b918513891b3834b93ad0e501">length</a>);</div>
<div class="line">        buf_size = part_info-&gt;<a class="code hl_variableRef" target="_blank" href="../../../library/d1/d73/structiav__mem__part__info.html#a3bc6cd5f612ef6d8254970d363348350">mem</a>.<a class="code hl_variableRef" target="_blank" href="../../../library/da/dae/structiav__mem__info.html#a9ee64c7b918513891b3834b93ad0e501">length</a>;</div>
<div class="line">    } <span class="keywordflow">else</span> {</div>
<div class="line">        buf_size = size;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    addr = mmap(NULL, buf_size, PROT_READ | PROT_WRITE, MAP_SHARED, iav_fd,</div>
<div class="line">        part_info-&gt;<a class="code hl_variableRef" target="_blank" href="../../../library/d1/d73/structiav__mem__part__info.html#a3bc6cd5f612ef6d8254970d363348350">mem</a>.<a class="code hl_variableRef" target="_blank" href="../../../library/da/dae/structiav__mem__info.html#afde02ab53128286716345a7e3da30a7e">addr</a>);</div>
<div class="line">    <span class="keywordflow">if</span> (addr == MAP_FAILED) {</div>
<div class="line">        perror(<span class="stringliteral">&quot;mmap buffer failed\n&quot;</span>);</div>
<div class="line">        ret = -1;</div>
<div class="line">        <span class="keywordflow">goto</span> MAP_ANON_MEM_PART_EXIT;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    printf(<span class="stringliteral">&quot;MMB[%d]: Got virtual addr 0x%lx, size %ld\n&quot;</span>, <span class="keywordtype">id</span>, part_info-&gt;<a class="code hl_variableRef" target="_blank" href="../../../library/d1/d73/structiav__mem__part__info.html#a3bc6cd5f612ef6d8254970d363348350">mem</a>.<a class="code hl_variableRef" target="_blank" href="../../../library/da/dae/structiav__mem__info.html#afde02ab53128286716345a7e3da30a7e">addr</a>,</div>
<div class="line">        buf_size);</div>
<div class="line"> </div>
<div class="line">MAP_ANON_MEM_PART_EXIT:</div>
<div class="line">    <span class="keywordflow">return</span> ret;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">int</span> alloc_anon_mem_part(<span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> mem_part_size, <a class="code hl_typedefRef" target="_blank" href="../../../library/d2/d47/asf__structure_8h.html#a92c50087ca0e64fa93fc59402c55f8ca">u8</a> cached, <a class="code hl_typedefRef" target="_blank" href="../../../library/d2/d47/asf__structure_8h.html#a92c50087ca0e64fa93fc59402c55f8ca">u8</a> shared)</div>
<div class="line">{</div>
<div class="line">    <span class="keyword">struct </span><a class="code hl_structRef" target="_blank" href="../../../library/d8/d3d/structiav__alloc__mem__part.html">iav_alloc_mem_part</a> alloc_mem_part;</div>
<div class="line"> </div>
<div class="line">    alloc_mem_part.<a id="a70" name="a70"></a><a class="code hl_variableRef" target="_blank" href="../../../library/d8/d3d/structiav__alloc__mem__part.html#a9ee64c7b918513891b3834b93ad0e501">length</a> = mem_part_size;</div>
<div class="line">    alloc_mem_part.enable_cache = cached;</div>
<div class="line">    alloc_mem_part.from_private = !shared;</div>
<div class="line">    <a class="code hl_defineRef" target="_blank" href="../../../video/de/ddf/vout__init__cfg_8c.html#a88a5b93883c34229851d6a7a93254850">AM_IOCTL</a>(fd_iav, <a id="a71" name="a71"></a>IAV_IOC_ALLOC_ANON_MEM_PART, &amp;alloc_mem_part);</div>
<div class="line">    printf(<span class="stringliteral">&quot;anonymous mem_part[%d] has been allocated successfully.\n\tBase Address: [0x%08lX], Size [%8ld KB].\n&quot;</span>,</div>
<div class="line">        alloc_mem_part.pid, alloc_mem_part.offset, (alloc_mem_part.length &gt;&gt; 10));</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">return</span> alloc_mem_part.pid;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">int</span> free_mem_part(<a class="code hl_typedefRef" target="_blank" href="../../../library/d2/d47/asf__structure_8h.html#afaa62991928fb9fb18ff0db62a040aba">u32</a> mem_part_id)</div>
<div class="line">{</div>
<div class="line">    <span class="keyword">struct </span><a id="_a72" name="_a72"></a><a class="code hl_structRef" target="_blank" href="../../../library/dd/d36/structiav__free__mem__part.html">iav_free_mem_part</a> free_mem_part;</div>
<div class="line"> </div>
<div class="line">    free_mem_part.<a id="a73" name="a73"></a><a class="code hl_variableRef" target="_blank" href="../../../library/dd/d36/structiav__free__mem__part.html#a189394c6bbc0d36422df8c5bc2ee1962">pid</a> = mem_part_id;</div>
<div class="line">    <a class="code hl_defineRef" target="_blank" href="../../../video/de/ddf/vout__init__cfg_8c.html#a88a5b93883c34229851d6a7a93254850">AM_IOCTL</a>(fd_iav, <a id="a74" name="a74"></a>IAV_IOC_FREE_MEM_PART, &amp;free_mem_part);</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">return</span> 0;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">int</span> anon_mmb_test()</div>
<div class="line">{</div>
<div class="line">    pid_t fpid = -1;</div>
<div class="line">    <span class="keywordtype">int</span> local_iav_fd = 0, new_iav_fd = 0;</div>
<div class="line">    <span class="keywordtype">int</span> <span class="keywordtype">id</span> = 0, ret = 0;</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> (!<a id="a75" name="a75"></a><a class="code hl_define" href="../../df/db8/ambcma__api_8h.html#a3f619c7d382a8f80cf0ad50926a2dc54">is_anon_mmb</a>(mem_part_id) &amp;&amp; !alloc_anon_mem_part_flag) {</div>
<div class="line">        printf(<span class="stringliteral">&quot;Test mode is only for anon mmb\n&quot;</span>);</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">if</span> (alloc_anon_mem_part_flag) {</div>
<div class="line">        <span class="keywordtype">id</span> = alloc_anon_mem_part(mem_part_size, cached, shared);</div>
<div class="line">    } <span class="keywordflow">else</span> {</div>
<div class="line">        <span class="keywordtype">id</span> = mem_part_id;</div>
<div class="line">    }</div>
<div class="line">    printf(<span class="stringliteral">&quot;global iav fd %d\n&quot;</span>, fd_iav);</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> (test_mode_map &amp; 0xf0) {</div>
<div class="line">        printf(<span class="stringliteral">&quot;start to fork child process\n&quot;</span>);</div>
<div class="line">        fpid = fork();</div>
<div class="line">        <span class="keywordflow">if</span> (fpid &lt; 0) {</div>
<div class="line">            printf(<span class="stringliteral">&quot;fork child process failed\n&quot;</span>);</div>
<div class="line">            ret = -1;</div>
<div class="line">            <span class="keywordflow">goto</span> ANON_MMB_TEST_EXIT;</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> (fpid == 0) {</div>
<div class="line">        signal(SIGINT, SIG_IGN);</div>
<div class="line">        <span class="keywordflow">if</span> (test_mode_map &amp; CP_CREATE_FD) {</div>
<div class="line">            <span class="keywordflow">if</span> ((new_iav_fd = open(<span class="stringliteral">&quot;/dev/iav&quot;</span>, O_RDWR, 0)) &lt; 0) {</div>
<div class="line">                perror(<span class="stringliteral">&quot;/dev/iav&quot;</span>);</div>
<div class="line">                ret = -1;</div>
<div class="line">                <span class="keywordflow">goto</span> ANON_MMB_TEST_EXIT;</div>
<div class="line">            }</div>
<div class="line">            printf(<span class="stringliteral">&quot;Child process create fd %d\n&quot;</span>, new_iav_fd);</div>
<div class="line">        }</div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">if</span> (test_mode_map &amp; CP_MAP_ANON_PART) {</div>
<div class="line">            local_iav_fd = new_iav_fd ? new_iav_fd : <a class="code hl_variableRef" target="_blank" href="../../../video/d4/daa/vin__init_8c.html#a5294002f7dca0cd9bcc0009a27895ef7">fd_iav</a>;</div>
<div class="line">            <span class="keywordflow">if</span> (map_anon_mem_part(local_iav_fd, <span class="keywordtype">id</span>, mem_part_size) &lt; 0) {</div>
<div class="line">                printf(<span class="stringliteral">&quot;Child process map buf[%d] failed with fd %d\n&quot;</span>,</div>
<div class="line">                    <span class="keywordtype">id</span>, local_iav_fd);</div>
<div class="line">                ret = -1;</div>
<div class="line">                <span class="keywordflow">goto</span> ANON_MMB_TEST_EXIT;</div>
<div class="line">            }</div>
<div class="line">        }</div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">if</span> (test_mode_map &amp; CP_NOT_QUIT) {</div>
<div class="line">            printf(<span class="stringliteral">&quot;Child process not quit\n&quot;</span>);</div>
<div class="line">            <span class="keywordflow">while</span>(1) {</div>
<div class="line">                sleep(2);</div>
<div class="line">            }</div>
<div class="line">        }</div>
<div class="line">    } <span class="keywordflow">else</span> {</div>
<div class="line">        <span class="keywordflow">if</span> (test_mode_map &amp; FP_CREATE_FD) {</div>
<div class="line">            <span class="keywordflow">if</span> ((new_iav_fd = open(<span class="stringliteral">&quot;/dev/iav&quot;</span>, O_RDWR, 0)) &lt; 0) {</div>
<div class="line">                perror(<span class="stringliteral">&quot;/dev/iav&quot;</span>);</div>
<div class="line">                ret = -1;</div>
<div class="line">                <span class="keywordflow">goto</span> ANON_MMB_TEST_EXIT;</div>
<div class="line">            }</div>
<div class="line">            printf(<span class="stringliteral">&quot;Main process create fd %d\n&quot;</span>, new_iav_fd);</div>
<div class="line">        }</div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">if</span> (test_mode_map &amp; FP_MAP_ANON_PART) {</div>
<div class="line">            local_iav_fd = new_iav_fd ? new_iav_fd : <a class="code hl_variableRef" target="_blank" href="../../../video/d4/daa/vin__init_8c.html#a5294002f7dca0cd9bcc0009a27895ef7">fd_iav</a>;</div>
<div class="line">            <span class="keywordflow">if</span> (map_anon_mem_part(local_iav_fd, <span class="keywordtype">id</span>, mem_part_size) &lt; 0) {</div>
<div class="line">                printf(<span class="stringliteral">&quot;Main process map buf[%d] failed with fd %d\n&quot;</span>,</div>
<div class="line">                    <span class="keywordtype">id</span>, local_iav_fd);</div>
<div class="line">                ret = -1;</div>
<div class="line">                <span class="keywordflow">goto</span> ANON_MMB_TEST_EXIT;</div>
<div class="line">            }</div>
<div class="line">        }</div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">if</span> (test_mode_map &amp; FP_NOT_QUIT) {</div>
<div class="line">            printf(<span class="stringliteral">&quot;Main process not quit\n&quot;</span>);</div>
<div class="line">            <span class="keywordflow">while</span>(1) {</div>
<div class="line">                sleep(2);</div>
<div class="line">            }</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">ANON_MMB_TEST_EXIT:</div>
<div class="line">    <span class="keywordflow">return</span> ret;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">int</span> <a id="a76" name="a76"></a><a class="code hl_functionRef" target="_blank" href="../../../video/db/d1a/test__vout__cfg_8c.html#a3c04138a5bfe5d72780bb7e82a18e627">main</a>(<span class="keywordtype">int</span> argc, <span class="keywordtype">char</span> **argv)</div>
<div class="line">{</div>
<div class="line">    <span class="keywordtype">int</span> ret = 0;</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> (argc &lt; 2) {</div>
<div class="line">        usage();</div>
<div class="line">        ret = -1;</div>
<div class="line">        <span class="keywordflow">goto</span> MAIN_EXIT;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// open the device</span></div>
<div class="line">    <span class="keywordflow">if</span> ((fd_iav = open(<span class="stringliteral">&quot;/dev/iav&quot;</span>, O_RDWR, 0)) &lt; 0) {</div>
<div class="line">        perror(<span class="stringliteral">&quot;/dev/iav&quot;</span>);</div>
<div class="line">        ret = -1;</div>
<div class="line">        <span class="keywordflow">goto</span> MAIN_EXIT;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> (init_param(argc, argv) &lt; 0) {</div>
<div class="line">        usage();</div>
<div class="line">        ret = -1;</div>
<div class="line">        <span class="keywordflow">goto</span> MAIN_EXIT;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> (test_mode_map) {</div>
<div class="line">        <span class="keywordflow">if</span> (anon_mmb_test() &lt; 0) {</div>
<div class="line">            ret = -1;</div>
<div class="line">            <span class="keywordflow">goto</span> MAIN_EXIT;</div>
<div class="line">        }</div>
<div class="line">    } <span class="keywordflow">else</span> {</div>
<div class="line">        <span class="keywordflow">if</span> ((mem_part_size == 0) &amp;&amp; !free_mem) {</div>
<div class="line">            ret = show_mem_part_dram_layout(mem_part_id);</div>
<div class="line">            <span class="keywordflow">if</span> (ret &lt; 0) {</div>
<div class="line">                <span class="keywordflow">goto</span> MAIN_EXIT;</div>
<div class="line">            }</div>
<div class="line">        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (mem_part_size) {</div>
<div class="line">            <span class="keywordflow">if</span> (alloc_anon_mem_part_flag) {</div>
<div class="line">                ret = alloc_anon_mem_part(mem_part_size, cached, shared);</div>
<div class="line">                <span class="keywordflow">if</span> (ret &lt; 0) {</div>
<div class="line">                    <span class="keywordflow">goto</span> MAIN_EXIT;</div>
<div class="line">                }</div>
<div class="line">            } <span class="keywordflow">else</span> {</div>
<div class="line">                ret = alloc_mem_part(mem_part_id, mem_part_size, cached, shared);</div>
<div class="line">                <span class="keywordflow">if</span> (ret &lt; 0) {</div>
<div class="line">                    <span class="keywordflow">goto</span> MAIN_EXIT;</div>
<div class="line">                }</div>
<div class="line">            }</div>
<div class="line">        } <span class="keywordflow">else</span> {</div>
<div class="line">            ret = free_mem_part(mem_part_id);</div>
<div class="line">            <span class="keywordflow">if</span> (ret &lt; 0) {</div>
<div class="line">                <span class="keywordflow">goto</span> MAIN_EXIT;</div>
<div class="line">            }</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">MAIN_EXIT:</div>
<div class="line">    <span class="keywordflow">return</span> ret;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="ttc" id="aambcma__api_8h_html_a3f619c7d382a8f80cf0ad50926a2dc54"><div class="ttname"><a href="../../df/db8/ambcma__api_8h.html#a3f619c7d382a8f80cf0ad50926a2dc54">is_anon_mmb</a></div><div class="ttdeci">#define is_anon_mmb(buf_id)</div><div class="ttdef"><b>Definition:</b> ambcma_api.h:54</div></div>
<div class="ttc" id="aasf__structure_8h_html_a92c50087ca0e64fa93fc59402c55f8ca"><div class="ttname"><a href="../../../library/d2/d47/asf__structure_8h.html#a92c50087ca0e64fa93fc59402c55f8ca">u8</a></div><div class="ttdeci">uint8_t u8</div></div>
<div class="ttc" id="aasf__structure_8h_html_afaa62991928fb9fb18ff0db62a040aba"><div class="ttname"><a href="../../../library/d2/d47/asf__structure_8h.html#afaa62991928fb9fb18ff0db62a040aba">u32</a></div><div class="ttdeci">uint32_t u32</div></div>
<div class="ttc" id="abasetypes_8h_html"><div class="ttname"><a href="../../de/ddc/basetypes_8h.html">basetypes.h</a></div><div class="ttdoc">This file defines basic types used in all IAV driver and header files.</div></div>
<div class="ttc" id="acJSON_8h_html_a25d22ecc7e656d2c59332072684e8766"><div class="ttname"><a href="../../../library/d1/d82/cJSON_8h.html#a25d22ecc7e656d2c59332072684e8766">name</a></div><div class="ttdeci">const char *const name</div></div>
<div class="ttc" id="aiav__ioctl_8h_html_a6e160acba2472e919b41321d8fbe72faa0919acd85768e1b60d100a9dd9099c23"><div class="ttname"><a href="../../../library/de/d89/iav__ioctl_8h.html#a6e160acba2472e919b41321d8fbe72faa0919acd85768e1b60d100a9dd9099c23">IAV_PART_VOUT2_FB</a></div><div class="ttdeci">IAV_PART_VOUT2_FB</div></div>
<div class="ttc" id="aiav__ioctl_8h_html_a6e160acba2472e919b41321d8fbe72faa09de9a53727022c18429db179a1d1ead"><div class="ttname"><a href="../../../library/de/d89/iav__ioctl_8h.html#a6e160acba2472e919b41321d8fbe72faa09de9a53727022c18429db179a1d1ead">IAV_PART_BSB</a></div><div class="ttdeci">IAV_PART_BSB</div></div>
<div class="ttc" id="aiav__ioctl_8h_html_a6e160acba2472e919b41321d8fbe72faa0c32372b38a2c1fb1f59cff7384a598a"><div class="ttname"><a href="../../../library/de/d89/iav__ioctl_8h.html#a6e160acba2472e919b41321d8fbe72faa0c32372b38a2c1fb1f59cff7384a598a">IAV_PART_IMG</a></div><div class="ttdeci">IAV_PART_IMG</div></div>
<div class="ttc" id="aiav__ioctl_8h_html_a6e160acba2472e919b41321d8fbe72faa1bb1b706389305ada9a247e479f82144"><div class="ttname"><a href="../../../library/de/d89/iav__ioctl_8h.html#a6e160acba2472e919b41321d8fbe72faa1bb1b706389305ada9a247e479f82144">IAV_PART_VOUT1_FB</a></div><div class="ttdeci">IAV_PART_VOUT1_FB</div></div>
<div class="ttc" id="aiav__ioctl_8h_html_a6e160acba2472e919b41321d8fbe72faa1fe3b6a4302777ead0b2987cfd9efced"><div class="ttname"><a href="../../../library/de/d89/iav__ioctl_8h.html#a6e160acba2472e919b41321d8fbe72faa1fe3b6a4302777ead0b2987cfd9efced">IAV_PART_WARP</a></div><div class="ttdeci">IAV_PART_WARP</div></div>
<div class="ttc" id="aiav__ioctl_8h_html_a6e160acba2472e919b41321d8fbe72faa22e9916a6a5e924edea92851e6c77b45"><div class="ttname"><a href="../../../library/de/d89/iav__ioctl_8h.html#a6e160acba2472e919b41321d8fbe72faa22e9916a6a5e924edea92851e6c77b45">IAV_PART_INT_BSB</a></div><div class="ttdeci">IAV_PART_INT_BSB</div></div>
<div class="ttc" id="aiav__ioctl_8h_html_a6e160acba2472e919b41321d8fbe72faa233f816c90d5a9175965d509dc2a3faa"><div class="ttname"><a href="../../../library/de/d89/iav__ioctl_8h.html#a6e160acba2472e919b41321d8fbe72faa233f816c90d5a9175965d509dc2a3faa">IAV_PART_DSP</a></div><div class="ttdeci">IAV_PART_DSP</div></div>
<div class="ttc" id="aiav__ioctl_8h_html_a6e160acba2472e919b41321d8fbe72faa26d57125544ec601deb6db6d9365c68c"><div class="ttname"><a href="../../../library/de/d89/iav__ioctl_8h.html#a6e160acba2472e919b41321d8fbe72faa26d57125544ec601deb6db6d9365c68c">IAV_PART_DSP_UCODE</a></div><div class="ttdeci">IAV_PART_DSP_UCODE</div></div>
<div class="ttc" id="aiav__ioctl_8h_html_a6e160acba2472e919b41321d8fbe72faa2819f76d7d531f88060b844ede1f5c48"><div class="ttname"><a href="../../../library/de/d89/iav__ioctl_8h.html#a6e160acba2472e919b41321d8fbe72faa2819f76d7d531f88060b844ede1f5c48">IAV_PART_MASK</a></div><div class="ttdeci">IAV_PART_MASK</div></div>
<div class="ttc" id="aiav__ioctl_8h_html_a6e160acba2472e919b41321d8fbe72faa2e84b8119830cf9cf2a333d77624ac4e"><div class="ttname"><a href="../../../library/de/d89/iav__ioctl_8h.html#a6e160acba2472e919b41321d8fbe72faa2e84b8119830cf9cf2a333d77624ac4e">IAV_PART_PREALLOC</a></div><div class="ttdeci">IAV_PART_PREALLOC</div></div>
<div class="ttc" id="aiav__ioctl_8h_html_a6e160acba2472e919b41321d8fbe72faa2ebf9932f850939211ec959cd3019082"><div class="ttname"><a href="../../../library/de/d89/iav__ioctl_8h.html#a6e160acba2472e919b41321d8fbe72faa2ebf9932f850939211ec959cd3019082">IAV_PART_VOUT0_FB</a></div><div class="ttdeci">IAV_PART_VOUT0_FB</div></div>
<div class="ttc" id="aiav__ioctl_8h_html_a6e160acba2472e919b41321d8fbe72faa315de3f1ad692322b81caff751c23f30"><div class="ttname"><a href="../../../library/de/d89/iav__ioctl_8h.html#a6e160acba2472e919b41321d8fbe72faa315de3f1ad692322b81caff751c23f30">IAV_PART_OVERLAY</a></div><div class="ttdeci">IAV_PART_OVERLAY</div></div>
<div class="ttc" id="aiav__ioctl_8h_html_a6e160acba2472e919b41321d8fbe72faa3a7c67c8501dec6873b2d59fc7f147aa"><div class="ttname"><a href="../../../library/de/d89/iav__ioctl_8h.html#a6e160acba2472e919b41321d8fbe72faa3a7c67c8501dec6873b2d59fc7f147aa">IAV_PART_RAW_POOL</a></div><div class="ttdeci">IAV_PART_RAW_POOL</div></div>
<div class="ttc" id="aiav__ioctl_8h_html_a6e160acba2472e919b41321d8fbe72faa3c297ffd69c8a1786e483623ccfefc13"><div class="ttname"><a href="../../../library/de/d89/iav__ioctl_8h.html#a6e160acba2472e919b41321d8fbe72faa3c297ffd69c8a1786e483623ccfefc13">IAV_PART_STAT</a></div><div class="ttdeci">IAV_PART_STAT</div></div>
<div class="ttc" id="aiav__ioctl_8h_html_a6e160acba2472e919b41321d8fbe72faa3f4aff5d8a407d603950e09d9fbe2a93"><div class="ttname"><a href="../../../library/de/d89/iav__ioctl_8h.html#a6e160acba2472e919b41321d8fbe72faa3f4aff5d8a407d603950e09d9fbe2a93">IAV_PART_ARB_BLUR</a></div><div class="ttdeci">IAV_PART_ARB_BLUR</div></div>
<div class="ttc" id="aiav__ioctl_8h_html_a6e160acba2472e919b41321d8fbe72faa4b0dad2693ec2555595ac0c55e863367"><div class="ttname"><a href="../../../library/de/d89/iav__ioctl_8h.html#a6e160acba2472e919b41321d8fbe72faa4b0dad2693ec2555595ac0c55e863367">IAV_PART_BLEND_WARP</a></div><div class="ttdeci">IAV_PART_BLEND_WARP</div></div>
<div class="ttc" id="aiav__ioctl_8h_html_a6e160acba2472e919b41321d8fbe72faa621880ecce8c6a4ad2fffc44f069f51e"><div class="ttname"><a href="../../../library/de/d89/iav__ioctl_8h.html#a6e160acba2472e919b41321d8fbe72faa621880ecce8c6a4ad2fffc44f069f51e">IAV_PART_QPMATRIX</a></div><div class="ttdeci">IAV_PART_QPMATRIX</div></div>
<div class="ttc" id="aiav__ioctl_8h_html_a6e160acba2472e919b41321d8fbe72faa6c57984d6d77666bdd4c13782bc74537"><div class="ttname"><a href="../../../library/de/d89/iav__ioctl_8h.html#a6e160acba2472e919b41321d8fbe72faa6c57984d6d77666bdd4c13782bc74537">IAV_PART_PREALLOC2</a></div><div class="ttdeci">IAV_PART_PREALLOC2</div></div>
<div class="ttc" id="aiav__ioctl_8h_html_a6e160acba2472e919b41321d8fbe72faa72a09b245ba600e41cfd5a64066abf87"><div class="ttname"><a href="../../../library/de/d89/iav__ioctl_8h.html#a6e160acba2472e919b41321d8fbe72faa72a09b245ba600e41cfd5a64066abf87">IAV_PART_BLEND_ALPHA</a></div><div class="ttdeci">IAV_PART_BLEND_ALPHA</div></div>
<div class="ttc" id="aiav__ioctl_8h_html_a6e160acba2472e919b41321d8fbe72faa7454b29b233125c90592c1d0e1d508ee"><div class="ttname"><a href="../../../library/de/d89/iav__ioctl_8h.html#a6e160acba2472e919b41321d8fbe72faa7454b29b233125c90592c1d0e1d508ee">IAV_PART_DSP_DEF_CMD</a></div><div class="ttdeci">IAV_PART_DSP_DEF_CMD</div></div>
<div class="ttc" id="aiav__ioctl_8h_html_a6e160acba2472e919b41321d8fbe72faa74b9451b28ac6f65fd8b6253a713140f"><div class="ttname"><a href="../../../library/de/d89/iav__ioctl_8h.html#a6e160acba2472e919b41321d8fbe72faa74b9451b28ac6f65fd8b6253a713140f">IAV_PART_FB_AUDIO</a></div><div class="ttdeci">IAV_PART_FB_AUDIO</div></div>
<div class="ttc" id="aiav__ioctl_8h_html_a6e160acba2472e919b41321d8fbe72faa82ffd16e5cb663c68662304522537c86"><div class="ttname"><a href="../../../library/de/d89/iav__ioctl_8h.html#a6e160acba2472e919b41321d8fbe72faa82ffd16e5cb663c68662304522537c86">IAV_PART_TFC</a></div><div class="ttdeci">IAV_PART_TFC</div></div>
<div class="ttc" id="aiav__ioctl_8h_html_a6e160acba2472e919b41321d8fbe72faa902ffde491d07bfcca4629ea183176e0"><div class="ttname"><a href="../../../library/de/d89/iav__ioctl_8h.html#a6e160acba2472e919b41321d8fbe72faa902ffde491d07bfcca4629ea183176e0">IAV_PART_BLUR</a></div><div class="ttdeci">IAV_PART_BLUR</div></div>
<div class="ttc" id="aiav__ioctl_8h_html_a6e160acba2472e919b41321d8fbe72faa90fe4231819b679bc6512ef5a0b079c3"><div class="ttname"><a href="../../../library/de/d89/iav__ioctl_8h.html#a6e160acba2472e919b41321d8fbe72faa90fe4231819b679bc6512ef5a0b079c3">IAV_PART_IMG_NN</a></div><div class="ttdeci">IAV_PART_IMG_NN</div></div>
<div class="ttc" id="aiav__ioctl_8h_html_a6e160acba2472e919b41321d8fbe72faa942d032c5723c753dcd3e665059068e9"><div class="ttname"><a href="../../../library/de/d89/iav__ioctl_8h.html#a6e160acba2472e919b41321d8fbe72faa942d032c5723c753dcd3e665059068e9">IAV_PART_INTRA_PB</a></div><div class="ttdeci">IAV_PART_INTRA_PB</div></div>
<div class="ttc" id="aiav__ioctl_8h_html_a6e160acba2472e919b41321d8fbe72faa9c6871121818aa47f659dea5f7b93f1a"><div class="ttname"><a href="../../../library/de/d89/iav__ioctl_8h.html#a6e160acba2472e919b41321d8fbe72faa9c6871121818aa47f659dea5f7b93f1a">IAV_PART_USR</a></div><div class="ttdeci">IAV_PART_USR</div></div>
<div class="ttc" id="aiav__ioctl_8h_html_a6e160acba2472e919b41321d8fbe72faaa03c2766b8cbf48de71f8f1c59529561"><div class="ttname"><a href="../../../library/de/d89/iav__ioctl_8h.html#a6e160acba2472e919b41321d8fbe72faaa03c2766b8cbf48de71f8f1c59529561">IAV_PART_EXTRA_RAW</a></div><div class="ttdeci">IAV_PART_EXTRA_RAW</div></div>
<div class="ttc" id="aiav__ioctl_8h_html_a6e160acba2472e919b41321d8fbe72faaa293851e2a3e15874747ab53b2a260a6"><div class="ttname"><a href="../../../library/de/d89/iav__ioctl_8h.html#a6e160acba2472e919b41321d8fbe72faaa293851e2a3e15874747ab53b2a260a6">IAV_PART_DSP_CV</a></div><div class="ttdeci">IAV_PART_DSP_CV</div></div>
<div class="ttc" id="aiav__ioctl_8h_html_a6e160acba2472e919b41321d8fbe72faaa2e888adefc507c223787873c528a326"><div class="ttname"><a href="../../../library/de/d89/iav__ioctl_8h.html#a6e160acba2472e919b41321d8fbe72faaa2e888adefc507c223787873c528a326">IAV_PART_BSH</a></div><div class="ttdeci">IAV_PART_BSH</div></div>
<div class="ttc" id="aiav__ioctl_8h_html_a6e160acba2472e919b41321d8fbe72faaa572a56af5ca5ab6d2800a7956a1f98b"><div class="ttname"><a href="../../../library/de/d89/iav__ioctl_8h.html#a6e160acba2472e919b41321d8fbe72faaa572a56af5ca5ab6d2800a7956a1f98b">IAV_PART_AISP</a></div><div class="ttdeci">IAV_PART_AISP</div></div>
<div class="ttc" id="aiav__ioctl_8h_html_a6e160acba2472e919b41321d8fbe72faaad312de47a183da5f2167b10c8c1e528"><div class="ttname"><a href="../../../library/de/d89/iav__ioctl_8h.html#a6e160acba2472e919b41321d8fbe72faaad312de47a183da5f2167b10c8c1e528">IAV_PART_CANVAS_POOL</a></div><div class="ttdeci">IAV_PART_CANVAS_POOL</div></div>
<div class="ttc" id="aiav__ioctl_8h_html_a6e160acba2472e919b41321d8fbe72faaad5750dccb3683fae8e59730b169f0d2"><div class="ttname"><a href="../../../library/de/d89/iav__ioctl_8h.html#a6e160acba2472e919b41321d8fbe72faaad5750dccb3683fae8e59730b169f0d2">IAV_PART_PYRAMID_POOL</a></div><div class="ttdeci">IAV_PART_PYRAMID_POOL</div></div>
<div class="ttc" id="aiav__ioctl_8h_html_a6e160acba2472e919b41321d8fbe72faabac3f400694c9ab52d7954615e3d55fc"><div class="ttname"><a href="../../../library/de/d89/iav__ioctl_8h.html#a6e160acba2472e919b41321d8fbe72faabac3f400694c9ab52d7954615e3d55fc">IAV_PART_H26X_SCALELIST</a></div><div class="ttdeci">IAV_PART_H26X_SCALELIST</div></div>
<div class="ttc" id="aiav__ioctl_8h_html_a6e160acba2472e919b41321d8fbe72faabfd60e72472e0c594136aba83cb451ce"><div class="ttname"><a href="../../../library/de/d89/iav__ioctl_8h.html#a6e160acba2472e919b41321d8fbe72faabfd60e72472e0c594136aba83cb451ce">IAV_PART_QUANT</a></div><div class="ttdeci">IAV_PART_QUANT</div></div>
<div class="ttc" id="aiav__ioctl_8h_html_a6e160acba2472e919b41321d8fbe72faac613f0c56c29d369d34ec5ef0b7e1137"><div class="ttname"><a href="../../../library/de/d89/iav__ioctl_8h.html#a6e160acba2472e919b41321d8fbe72faac613f0c56c29d369d34ec5ef0b7e1137">IAV_PART_QPMATRIX_RAW</a></div><div class="ttdeci">IAV_PART_QPMATRIX_RAW</div></div>
<div class="ttc" id="aiav__ioctl_8h_html_a6e160acba2472e919b41321d8fbe72faac92415d3bb4fcd94f2ff84541ac70af4"><div class="ttname"><a href="../../../library/de/d89/iav__ioctl_8h.html#a6e160acba2472e919b41321d8fbe72faac92415d3bb4fcd94f2ff84541ac70af4">IAV_PART_DSP_FIFO</a></div><div class="ttdeci">IAV_PART_DSP_FIFO</div></div>
<div class="ttc" id="aiav__ioctl_8h_html_a6e160acba2472e919b41321d8fbe72faac9f20e386be9ea25538d81e6da6bb787"><div class="ttname"><a href="../../../library/de/d89/iav__ioctl_8h.html#a6e160acba2472e919b41321d8fbe72faac9f20e386be9ea25538d81e6da6bb787">IAV_PART_DSP_LOG</a></div><div class="ttdeci">IAV_PART_DSP_LOG</div></div>
<div class="ttc" id="aiav__ioctl_8h_html_a6e160acba2472e919b41321d8fbe72faacc923273b59c36c7170ce5305d216e92"><div class="ttname"><a href="../../../library/de/d89/iav__ioctl_8h.html#a6e160acba2472e919b41321d8fbe72faacc923273b59c36c7170ce5305d216e92">IAV_PART_MULTI_COLOR_MASK</a></div><div class="ttdeci">IAV_PART_MULTI_COLOR_MASK</div></div>
<div class="ttc" id="aiav__ioctl_8h_html_a6e160acba2472e919b41321d8fbe72faae402ae21455f584313ee15048a93c162"><div class="ttname"><a href="../../../library/de/d89/iav__ioctl_8h.html#a6e160acba2472e919b41321d8fbe72faae402ae21455f584313ee15048a93c162">IAV_PART_FB_DATA</a></div><div class="ttdeci">IAV_PART_FB_DATA</div></div>
<div class="ttc" id="aiav__ioctl_8h_html_a6e160acba2472e919b41321d8fbe72faae8bf4bdd1a6189a4288871c67ed008eb"><div class="ttname"><a href="../../../library/de/d89/iav__ioctl_8h.html#a6e160acba2472e919b41321d8fbe72faae8bf4bdd1a6189a4288871c67ed008eb">IAV_PART_NUM</a></div><div class="ttdeci">IAV_PART_NUM</div></div>
<div class="ttc" id="aiav__ioctl_8h_html_a6e160acba2472e919b41321d8fbe72faaf2d7fb4e593ac07b0b446e594627d884"><div class="ttname"><a href="../../../library/de/d89/iav__ioctl_8h.html#a6e160acba2472e919b41321d8fbe72faaf2d7fb4e593ac07b0b446e594627d884">IAV_PART_MV</a></div><div class="ttdeci">IAV_PART_MV</div></div>
<div class="ttc" id="aiav__ioctl_8h_html_a6e160acba2472e919b41321d8fbe72faafe26704ff591e9b222689adc2795f0cb"><div class="ttname"><a href="../../../library/de/d89/iav__ioctl_8h.html#a6e160acba2472e919b41321d8fbe72faafe26704ff591e9b222689adc2795f0cb">IAV_PART_IAV_RSV</a></div><div class="ttdeci">IAV_PART_IAV_RSV</div></div>
<div class="ttc" id="aiav__ioctl_8h_html_a6e160acba2472e919b41321d8fbe72faafee8e1abf6153e9e99ffce0efd2625ab"><div class="ttname"><a href="../../../library/de/d89/iav__ioctl_8h.html#a6e160acba2472e919b41321d8fbe72faafee8e1abf6153e9e99ffce0efd2625ab">IAV_PART_DSP_RSV</a></div><div class="ttdeci">IAV_PART_DSP_RSV</div></div>
<div class="ttc" id="aiav__ioctl_8h_html_aa4ef4a9add627e30f58595a1e8a78225ad6cd45b3e12fec076b535370ba973524"><div class="ttname"><a href="../../../library/de/d89/iav__ioctl_8h.html#aa4ef4a9add627e30f58595a1e8a78225ad6cd45b3e12fec076b535370ba973524">IAV_MEM_PARTITION</a></div><div class="ttdeci">IAV_MEM_PARTITION</div></div>
<div class="ttc" id="astructhint__s_html"><div class="ttname"><a href="../../../video/d2/d4b/structhint__s.html">hint_s</a></div></div>
<div class="ttc" id="astructhint__s_html_a2799cca21c05a4f99f4c8b3b178d0133"><div class="ttname"><a href="../../../video/d2/d4b/structhint__s.html#a2799cca21c05a4f99f4c8b3b178d0133">hint_s::str</a></div><div class="ttdeci">const char * str</div></div>
<div class="ttc" id="astructhint__s_html_aa56a50443afd9d2f7cf738fb7ffba168"><div class="ttname"><a href="../../../video/d2/d4b/structhint__s.html#aa56a50443afd9d2f7cf738fb7ffba168">hint_s::arg</a></div><div class="ttdeci">const char * arg</div></div>
<div class="ttc" id="astructiav__alloc__mem__part_html"><div class="ttname"><a href="../../../library/d8/d3d/structiav__alloc__mem__part.html">iav_alloc_mem_part</a></div></div>
<div class="ttc" id="astructiav__alloc__mem__part_html_a9ee64c7b918513891b3834b93ad0e501"><div class="ttname"><a href="../../../library/d8/d3d/structiav__alloc__mem__part.html#a9ee64c7b918513891b3834b93ad0e501">iav_alloc_mem_part::length</a></div><div class="ttdeci">unsigned long length</div><div class="ttdef"><b>Definition:</b> iav_ioctl.h:1858</div></div>
<div class="ttc" id="astructiav__free__mem__part_html"><div class="ttname"><a href="../../../library/dd/d36/structiav__free__mem__part.html">iav_free_mem_part</a></div></div>
<div class="ttc" id="astructiav__free__mem__part_html_a189394c6bbc0d36422df8c5bc2ee1962"><div class="ttname"><a href="../../../library/dd/d36/structiav__free__mem__part.html#a189394c6bbc0d36422df8c5bc2ee1962">iav_free_mem_part::pid</a></div><div class="ttdeci">u32 pid</div><div class="ttdef"><b>Definition:</b> iav_ioctl.h:1875</div></div>
<div class="ttc" id="astructiav__mem__info_html"><div class="ttname"><a href="../../../library/da/dae/structiav__mem__info.html">iav_mem_info</a></div></div>
<div class="ttc" id="astructiav__mem__info_html_a9ee64c7b918513891b3834b93ad0e501"><div class="ttname"><a href="../../../library/da/dae/structiav__mem__info.html#a9ee64c7b918513891b3834b93ad0e501">iav_mem_info::length</a></div><div class="ttdeci">unsigned long length</div><div class="ttdef"><b>Definition:</b> iav_ioctl.h:1842</div></div>
<div class="ttc" id="astructiav__mem__info_html_ac1369a1f209735864674d22517edfa76"><div class="ttname"><a href="../../../library/da/dae/structiav__mem__info.html#ac1369a1f209735864674d22517edfa76">iav_mem_info::offset</a></div><div class="ttdeci">unsigned long offset</div><div class="ttdef"><b>Definition:</b> iav_ioctl.h:1843</div></div>
<div class="ttc" id="astructiav__mem__info_html_afde02ab53128286716345a7e3da30a7e"><div class="ttname"><a href="../../../library/da/dae/structiav__mem__info.html#afde02ab53128286716345a7e3da30a7e">iav_mem_info::addr</a></div><div class="ttdeci">unsigned long addr</div><div class="ttdef"><b>Definition:</b> iav_ioctl.h:1841</div></div>
<div class="ttc" id="astructiav__mem__part__info_html"><div class="ttname"><a href="../../../library/d1/d73/structiav__mem__part__info.html">iav_mem_part_info</a></div></div>
<div class="ttc" id="astructiav__mem__part__info_html_a189394c6bbc0d36422df8c5bc2ee1962"><div class="ttname"><a href="../../../library/d1/d73/structiav__mem__part__info.html#a189394c6bbc0d36422df8c5bc2ee1962">iav_mem_part_info::pid</a></div><div class="ttdeci">u32 pid</div><div class="ttdef"><b>Definition:</b> iav_ioctl.h:1847</div></div>
<div class="ttc" id="astructiav__mem__part__info_html_a3bc6cd5f612ef6d8254970d363348350"><div class="ttname"><a href="../../../library/d1/d73/structiav__mem__part__info.html#a3bc6cd5f612ef6d8254970d363348350">iav_mem_part_info::mem</a></div><div class="ttdeci">struct iav_mem_info mem</div><div class="ttdef"><b>Definition:</b> iav_ioctl.h:1848</div></div>
<div class="ttc" id="astructiav__querymem_html"><div class="ttname"><a href="../../../library/de/dc3/structiav__querymem.html">iav_querymem</a></div></div>
<div class="ttc" id="astructiav__querymem_html_a01d475486b14a28a0583e09be9e66982"><div class="ttname"><a href="../../../library/de/dc3/structiav__querymem.html#a01d475486b14a28a0583e09be9e66982">iav_querymem::partition</a></div><div class="ttdeci">struct iav_mem_part_info partition</div><div class="ttdef"><b>Definition:</b> iav_ioctl.h:1925</div></div>
<div class="ttc" id="astructiav__querymem_html_a5955e20d0c53be1145cf813759d92d67"><div class="ttname"><a href="../../../library/de/dc3/structiav__querymem.html#a5955e20d0c53be1145cf813759d92d67">iav_querymem::arg</a></div><div class="ttdeci">union iav_querymem::@61 arg</div></div>
<div class="ttc" id="astructiav__querymem_html_ae056de5bb92261e7a28350beeb5320f8"><div class="ttname"><a href="../../../library/de/dc3/structiav__querymem.html#ae056de5bb92261e7a28350beeb5320f8">iav_querymem::mid</a></div><div class="ttdeci">enum iav_mem_id mid</div><div class="ttdef"><b>Definition:</b> iav_ioctl.h:1923</div></div>
<div class="ttc" id="atest__fb_8h_html_a2d0022791143e08a64621257f48d9739"><div class="ttname"><a href="../../../video/d3/d6c/test__fb_8h.html#a2d0022791143e08a64621257f48d9739">NO_ARG</a></div><div class="ttdeci">#define NO_ARG</div></div>
<div class="ttc" id="atest__fb_8h_html_affec572f11fcba59ce0cd49cbcd0110f"><div class="ttname"><a href="../../../video/d3/d6c/test__fb_8h.html#affec572f11fcba59ce0cd49cbcd0110f">HAS_ARG</a></div><div class="ttdeci">#define HAS_ARG</div></div>
<div class="ttc" id="atest__vout__cfg_8c_html_a3c04138a5bfe5d72780bb7e82a18e627"><div class="ttname"><a href="../../../video/db/d1a/test__vout__cfg_8c.html#a3c04138a5bfe5d72780bb7e82a18e627">main</a></div><div class="ttdeci">int main(int argc, char **argv)</div></div>
<div class="ttc" id="avin__init_8c_html_a5294002f7dca0cd9bcc0009a27895ef7"><div class="ttname"><a href="../../../video/d4/daa/vin__init_8c.html#a5294002f7dca0cd9bcc0009a27895ef7">fd_iav</a></div><div class="ttdeci">int fd_iav</div></div>
<div class="ttc" id="avout__init__cfg_8c_html_a88a5b93883c34229851d6a7a93254850"><div class="ttname"><a href="../../../video/de/ddf/vout__init__cfg_8c.html#a88a5b93883c34229851d6a7a93254850">AM_IOCTL</a></div><div class="ttdeci">#define AM_IOCTL(_filp, _cmd, _arg)</div></div>
</div><!-- fragment --> </div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="../../doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.3 </li>
  </ul>
</div>
</body>
</html>
