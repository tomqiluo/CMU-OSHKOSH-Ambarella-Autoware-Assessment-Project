<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.3"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Build System: Introduction</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript" src="../../navtreedata.js"></script>
<script type="text/javascript" src="../../navtree.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/search.js"></script>
<link rel="search" href="../../search_opensearch.php?v=opensearch.xml" type="application/opensearchdescription+xml" title="Build System"/>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
<link href="../../doxygen-awesome.css" rel="stylesheet" type="text/css"/>
<link href="../../doxygen-awesome-sidebar-only.css" rel="stylesheet" type="text/css"/>
<link href="../../doxygen-ambarella.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="../../Ambarella.png"/></td>
  <td id="projectalign">
   <div id="projectname">Build System<span id="projectnumber">&#160;Cooper_1.6.0 (CV72 &amp; CV3) @ 2024.07.10 14:12:44</span>
   </div>
   <div id="projectbrief">placeholder</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.3 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "../../search",'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('../../',true,true,'search.html','Search');
  $(document).ready(function() {
    if ($('.searchresults').length > 0) { searchBox.DOMSearchField().focus(); }
  });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('da/dab/doc_amyoc_introduction.html','../../'); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<div><div class="header">
  <div class="headertitle"><div class="title">Introduction </div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p >The build system is developed by Ambarella to support both Amba build and Yocto build.</p>
<h1><a class="anchor" id="doc_amyoc_guide_feature"></a>
1 Main Features</h1>
<ul>
<li>Supports both Amba build and Yocto build with unified Makefile on Linux host.<ul>
<li>Also supports wrapping the existing <code>Makefile / CMake / Autotools / Meson</code> into Makefile for the open source packages</li>
</ul>
</li>
<li>Supports both cross-compilation and native-compilation; supports automatic analysis of header files as compilation dependencies</li>
<li>Provides template for compiling static libraries, shared libraries, and executables (inc.app.mk)<ul>
<li>Supports mixed compilation of C (<code>*.c</code>) C++ (<code>*.cc</code> <code>*.cp</code> <code>*.cxx</code> <code>*.cpp</code> <code>*.CPP</code> <code>*.c++</code> <code>*.C</code>) and assembly (<code>*.S</code> <code>*.s</code> <code>*.asm</code>)</li>
</ul>
</li>
<li>Provides template for compiling external kernel modules (inc.mod.mk)<ul>
<li>Supports mixed compilation of C (<code>*.c</code>) and assembly (<code>*.S</code>)</li>
</ul>
</li>
<li>Provides template for configuring parameters using Kconfig (<code>inc.conf.mk</code> / <code>kconfig.bbclass</code>)</li>
<li>Provides script to automatically generate compilation chain (Kconfig / <code>auto.mk</code>) (<code>gen_build_chain.py</code>)<ul>
<li>Supports checking the compilation time (time_statistics) of each package</li>
</ul>
</li>
<li>Provides script for configuring Yocto build (Kconfig / <code>ipcam-image.inc</code> / <code>prepare-patch.inc</code>) automatically (<code>gen_build_chain.py</code>)</li>
<li>Supports real package rule (<code>amba.mk</code>) and virtual package rule (<code>amba.vdeps</code>); virtual package rule can be used to control a set of real package rules<ul>
<li>Supports automatically generating normal structure (config), hierarchy (menuconfig), selection structure (choice)...</li>
<li>Supports automatically generating strong dependencies (depends on), weak dependencies (if... endif), strong selections (select), weak selections (imply)...</li>
<li>Supports prebuild strategy to speed up repeated compilation without building again from source code</li>
</ul>
</li>
<li>Enhances patching methods; users can choose whether or not to apply the patch (<code>exec_patch.sh</code> / <code>externalpatch.bbclass</code>)</li>
<li>Supports generating the dependency graph (<code>gen_depends_image.sh</code>)</li>
<li>Supports downloading packages from internet or mirror server for Amba build (<code>fetch_package.sh</code>)<ul>
<li>Supports http / git / svn methods</li>
<li>Supports URL attributes: md5 for tar / zip, branch / rev / tag for git, rev for svn</li>
</ul>
</li>
<li>Supports build cache for Amba build; it can fetch the cached files from local path or mirror server directly without re-compilation (<code>inc.cache.mk process_cache.sh</code>)</li>
<li>Supports generating cross-compiler toolchain for Amba build (<code>toolchain/Makefile process_machine.sh</code>)</li>
</ul>
<hr  />
<h1><a class="anchor" id="doc_amyoc_guide_arch"></a>
2 Architecture</h1>
<ul>
<li>Amba build composition:<ul>
<li>The application and driver are Makefile + DEPS-statement</li>
<li>The packages are assembled through the dependencies defined by DEPS-statement (package name-level dependencies)</li>
</ul>
</li>
<li>Yocto build composition:<ul>
<li>The application and driver are Makefile + Recipe</li>
<li>The packages are assembled through the dependencies defined by the Recipe (package name-level dependencies)</li>
</ul>
</li>
<li>DEPS-statement / Recipe are required only to define dependencies. Compilation is performed entirely by the Makefile Users can enter the package path and click <code>make</code> to compile it</li>
<li>Implementation style:<ul>
<li>Makefile / Recipe can be freely implemented by developers according to the Make / Yocto rules</li>
<li>Makefile only requires the three targets <code>all</code>, <code>clean</code>, and <code>install</code> to be defined, and provide templates to simplify the preparation for the Makefile.</li>
<li>Makefile can also be used to wrap the existing <code>Makefile / CMake / Autotools / Meson</code> implementations of the packages</li>
<li>DEPS-statement follows the assembly method of the <code>gen_build_chain.py</code> convention</li>
</ul>
</li>
<li>Separate from Amba build, the source code, compiled scripts, and configuration are all independent:<ul>
<li><code>gen_build_chain.py</code> analyses DEPS-statement and generates the compilation chain file automatically; all packages are compiled one by one</li>
<li>Kconfig must be placed in the same directory as the DEPS-statement file; users are not required to specify the parent-child inclusion relationship manually Instead, it is automatically analyzed and assembled by the script</li>
<li>Each package is supported to manage its own Kconfig</li>
</ul>
</li>
<li><code>Convenience</code> of Yocto build:<ul>
<li>Users can modify the configuration through <code>make menuconfig</code> (select or unselect packages, modify configuration, and more)</li>
<li>Build system wraps bitbake commands as make. It makes the build flow similar to Amba build for better user experience</li>
</ul>
</li>
</ul>
<hr  />
<h1><a class="anchor" id="doc_amyoc_guide_diff"></a>
3 Differences Between Two Methods</h1>
<a class="anchor" id="yocto_difff_two_methods"></a>
<table class="doxtable">
<caption>Table 3-1. Differences Between Two Methods.</caption>
<tr>
<th>Topic </th><th>Amba-build </th><th>Yocto-build </th></tr>
<tr>
<td>Build assembly rules </td><td>Amba build is assembled by DEPS-statement </td><td>Yocto build is assembled the Recipe <code>DEPENDS / EXTRADEPS</code> </td></tr>
<tr>
<td>Package the root file system </td><td>Amba build uses shell commands to package the root file system (rootfs) manually </td><td>Yocto build uses the bbclass to package rootfs automatically </td></tr>
<tr>
<td>Open oss package </td><td>Amba build uses a prebuilt-oss compiled by Ambarella </td><td>Yocto build may download open source packages and compile them by itself (such as by using the busybox systemd) </td></tr>
<tr>
<td>Top-level output directory </td><td>The top-level output directory of all packages in Amba build is fixed and the compilation, output, installation, and other directories are fixed </td><td>Each package in Yocto Build has its own top-level output directory and the compilation, output, installation, and other directories are located in this top-level output directory </td></tr>
<tr>
<td>Dependencies </td><td>Amba build searches for dependencies in a fixed directory </td><td>The Poky system is responsible for copying dependencies to the working directory of the current package. <code>ENV_INS_ROOT</code> and <code>ENV_DEP_ROOT</code> are not the same directory </td></tr>
<tr>
<td>Environment variables </td><td>Amba build can export environment variables using the shell </td><td>The compilation environment of each package of Yocto build is independent from Host shell. Environment variables must be exported by recipe, which cannot be exported by host shell </td></tr>
<tr>
<td>Compilation tool </td><td>Amba build uses the host-installed compilation tool </td><td>Yocto build has its own compilation tool chain; Yocto build may be required to specify the host depends (DEPENDS += "&lt; package_name &gt; -native") </td></tr>
</table>
<hr  />
<h1><a class="anchor" id="doc_amyoc_guide_system_structure_compilation"></a>
4 Directory Structure</h1>
<dl class="section user"><dt>SDK directory structure (for Amba build)</dt><dd></dd></dl>
<div class="image">
<img src="../../amba-build-structure.png" alt=""/>
<div class="caption">
Figure 4-1. SDK Directory Structure (for Amba Build).</div></div>
<dl class="section user"><dt>SDK directory structure (for Yocto build)</dt><dd></dd></dl>
<div class="image">
<img src="../../yocto-build-structure.png" alt=""/>
<div class="caption">
Figure 4-2. SDK Directory Structure (for Yocto Build).</div></div>
<dl class="section user"><dt>Compilation project directory</dt><dd></dd></dl>
<div class="fragment"><div class="line">ambarella/build</div>
<div class="line">├── core                         <span class="comment">// Template of Makefile</span></div>
<div class="line">│   ├── inc.env.mk               <span class="comment">// Export template of compiling tool chain</span></div>
<div class="line">│   ├── inc.ins.mk               <span class="comment">// Template for installation</span></div>
<div class="line">│   ├── inc.app.mk               <span class="comment">// Template for compiling application</span></div>
<div class="line">│   ├── inc.mod.mk               <span class="comment">// Template for compiling external kernel module</span></div>
<div class="line">│   ├── inc.cache.mk             <span class="comment">// Template for compilation cache of Amba Build</span></div>
<div class="line">│   └── inc.conf.mk              <span class="comment">// Template of Kconfig</span></div>
<div class="line">│</div>
<div class="line">├── bin</div>
<div class="line">│   ├── common</div>
<div class="line">│   │   ├── regex_deps.svg       <span class="comment">// Picture of displaying DEPS-statement of Amba Build</span></div>
<div class="line">│   │   ├── regex_incdeps.svg    <span class="comment">// Picture of displaying INCDEPS-statement of Amba Build</span></div>
<div class="line">│   │   ├── regex_vdeps.svg      <span class="comment">// Picture of displaying VDEPS-statement</span></div>
<div class="line">│   │   ├── gen_build_chain.py   <span class="comment">// Script for generating compile chain</span></div>
<div class="line">│   │   └── update_mks.py        <span class="comment">// Tool for updating template of Makefile</span></div>
<div class="line">│   ├── amba</div>
<div class="line">│   │   ├── inc-amba-build.mk    <span class="comment">// Top Makefile for Amba Build</span></div>
<div class="line">│   │   ├── gen_depends_image.sh <span class="comment">// Tool for generating the dependency graph</span></div>
<div class="line">│   │   ├── exec_patch.sh        <span class="comment">// Tool for patching or unpatching</span></div>
<div class="line">│   │   ├── fetch_package.sh     <span class="comment">// Tool for fetching package from internet or mirror server</span></div>
<div class="line">│   │   ├── process_cache.sh     <span class="comment">// Tool for supporting compilation cache</span></div>
<div class="line">│   │   ├── process_machine.sh   <span class="comment">// Tool for getting various machine-related informations</span></div>
<div class="line">│   │   └── meson_cross.sh       <span class="comment">// Tool for generating default config of meson cross-compilation</span></div>
<div class="line">│   └── yocto</div>
<div class="line">│       ├── inc-yocto-build.mk   <span class="comment">// Top Makefile of Yocto Build</span></div>
<div class="line">│       ├── gen_depends_image.sh <span class="comment">// Tool for generating the dependency graph</span></div>
<div class="line">│       └── run_user_task.sh     <span class="comment">// Script to run tasks defined by user</span></div>
<div class="line">│</div>
<div class="line">├── env</div>
<div class="line">│   ├── amba-build.env           <span class="comment">// Top environment script of Amba Build</span></div>
<div class="line">│   ├── amba-build.mk            <span class="comment">// Makefile to set environment when user compiles system in ambarella/boards/$board_name with Amba Build</span></div>
<div class="line">│   ├── yocto-build.env          <span class="comment">// Top environment script of Yocto Build</span></div>
<div class="line">│   ├── yocto-ros2-build.env     <span class="comment">// Top environment script of ROS2 Yocto Build</span></div>
<div class="line">│   ├── common</div>
<div class="line">│   │   ├── inc-get-boardinfo.sh <span class="comment">// Script to get environment variables related to board</span></div>
<div class="line">│   │   ├── inc-get-boardname.env<span class="comment">// Script to get board name</span></div>
<div class="line">│   │   ├── inc-amba-board.env   <span class="comment">// Script to set environment variables related to board</span></div>
<div class="line">│   │   └── inc-unset-env.env    <span class="comment">// Script to clean environment exported by system</span></div>
<div class="line">│   ├── amba</div>
<div class="line">│   │   ├── inc-amba-build.env   <span class="comment">// Script to set environment variables, such as directory, in Amba Build</span></div>
<div class="line">│   │   ├── inc-check-host.sh    <span class="comment">// Script to check environment of host and set thead count for compiling in Amba Build</span></div>
<div class="line">│   │   └── inc-get-toolchain.sh <span class="comment">// Script to get cross-compile toolchain in Amba Build</span></div>
<div class="line">│   └── yocto</div>
<div class="line">│       ├── inc-yocto-build.env  <span class="comment">// Script to set environment variables, such as directory, in Yocto Build</span></div>
<div class="line">│       ├── inc-prepare-ros.sh   <span class="comment">// Script to set ROS2 metas</span></div>
<div class="line">│       ├── inc-layer-ctrl.env   <span class="comment">// Script to add and delete meta in Yocto Build</span></div>
<div class="line">│       ├── inc-apply-patch.sh   <span class="comment">// Script to add patch for Poky in Yocto Build</span></div>
<div class="line">│       └── patch</div>
<div class="line">│           ├── 0001-Disable-nfs-check-<span class="keywordflow">for</span>-TMPDIR-file-system.patch <span class="comment">// Yocto Build does not support compiling under NFS file system by default. This patch disables NFS check</span></div>
<div class="line">│           └── 0001-Support-loading-kernel-config-in-the-external-path.patch <span class="comment">// Yocto Build can support to load kernel config from external path</span></div>
<div class="line">│</div>
<div class="line">├── kconfig                      <span class="comment">// Kconfig, transplant from linux-5.18, and add the support of specifying path of &quot;config/&quot;, &quot;.config&quot; and &quot;config.h&quot;</span></div>
<div class="line">│</div>
<div class="line">└── poky                         <span class="comment">// Official Project of Yocto</span></div>
</div><!-- fragment --><dl class="section user"><dt>Amba build compiling output directory</dt><dd></dd></dl>
<div class="fragment"><div class="line">ambarella/out/mirror-cache</div>
<div class="line">├── downloads                    <span class="comment">// Folder for storing downloaded source codes</span></div>
<div class="line">└── build-cache                  <span class="comment">// Folder for storing compilation caches</span></div>
<div class="line"> </div>
<div class="line">ambarella/out/amba_out/cv22_walnut <span class="comment">// Top directory of compiling output for Amba Build</span></div>
<div class="line">├── config</div>
<div class="line">│   ├── autoconfig</div>
<div class="line">│   ├── .config                  <span class="comment">// Compiling configuration file for system</span></div>
<div class="line">│   ├── config.h                 <span class="comment">// Header file of compiling configuration for system</span></div>
<div class="line">│   ├── Kconfig                  <span class="comment">// Kconfig generated by gen_build_chain.py automatically</span></div>
<div class="line">│   ├── <span class="keyword">auto</span>.mk                  <span class="comment">// Makefile generated by gen_build_chain.py automatically</span></div>
<div class="line">│   ├── DEPS                     <span class="comment">// All package&#39;s dependencies parsed by gen_build_chain.py</span></div>
<div class="line">│   ├── Target                   <span class="comment">// All package&#39;s name and source path parsed by gen_build_chain.py</span></div>
<div class="line">│   ├── depends                  <span class="comment">// Folder for storing dependency images</span></div>
<div class="line">│   └── time_statistics          <span class="comment">// Statistic file of compiling time for each package</span></div>
<div class="line">│</div>
<div class="line">├── objects                      <span class="comment">// Top directory for cross-compilation output $(ENV_OUT_ROOT)</span></div>
<div class="line">│   └── boards</div>
<div class="line">│</div>
<div class="line">├── sysroot                      <span class="comment">// Top directory for cross-compilation installation and dependency $(ENV_INS_ROOT), $(ENV_DEP_ROOT)</span></div>
<div class="line">│   └── usr</div>
<div class="line">│       ├── include</div>
<div class="line">│       │   ├── ammem</div>
<div class="line">│       │   │   └── memory.h</div>
<div class="line">│       │   └── board            <span class="comment">// Installation directory of each package&#39;s header file is $(ENV_INS_ROOT)/usr/include/$package_name</span></div>
<div class="line">│       │       ├── board_config <span class="comment">// System compiling configuration, copied from .config</span></div>
<div class="line">│       │       ├── board_config.h <span class="comment">// header file for system compiling configuration, copied from config.h</span></div>
<div class="line">│       │       └── bsp.h</div>
<div class="line">│       └── share</div>
<div class="line">│           └── bsp</div>
<div class="line">├── objects-native               <span class="comment">// Top directory for native-compilation output $(ENV_OUT_HOST)</span></div>
<div class="line">│</div>
<div class="line">├── sysroot-native               <span class="comment">// Top directory for native-compilation installation and dependency $(ENV_INS_HOST), $(ENV_DEP_HOST)</span></div>
<div class="line">│</div>
<div class="line">├── fakeroot                     <span class="comment">// contents from rootfs</span></div>
<div class="line">│</div>
<div class="line">└── images                       <span class="comment">// output directory for all images</span></div>
</div><!-- fragment --><dl class="section user"><dt>Yocto build compiling output directory</dt><dd></dd></dl>
<div class="fragment"><div class="line">ambarella/out/mirror-cache</div>
<div class="line">├── downloads                    <span class="comment">// Folder for storing downloaded source codes</span></div>
<div class="line">└── sstate-cache                 <span class="comment">// Folder for storing compilation caches</span></div>
<div class="line"> </div>
<div class="line">ambarella/out/yocto_out/cv22_walnut <span class="comment">// Top directory of compiling output for Amba Build</span></div>
<div class="line">├── conf</div>
<div class="line">│   ├── local.conf               <span class="comment">// Local configuration for Yocto Build, environment variable can be defined here</span></div>
<div class="line">│   └── bblayers.conf            <span class="comment">// Layer configuration for Yocto Build</span></div>
<div class="line">│</div>
<div class="line">├── config</div>
<div class="line">│   ├── autoconfig</div>
<div class="line">│   ├── .config                  <span class="comment">// Compile configuration file of system</span></div>
<div class="line">│   ├── config.h                 <span class="comment">// Header file for system compile configuration</span></div>
<div class="line">│   ├── Kconfig                  <span class="comment">// Kconfig generated by gen_build_chain.py automatically</span></div>
<div class="line">│   ├── Target                   <span class="comment">// All package&#39;s name and source path parsed by gen_build_chain.py</span></div>
<div class="line">│   ├── prepare-patch.inc        <span class="comment">// Package list of patch/unpatch and they are generated by gen_build_chain.py</span></div>
<div class="line">│   ├── ipcam-image.inc          <span class="comment">// Installation list of rootfs package and they are generated by gen_build_chain.py</span></div>
<div class="line">│   └── depends                  <span class="comment">// Folder for storing dependency images</span></div>
<div class="line">│</div>
<div class="line">├── tmp</div>
<div class="line">│ └── work</div>
<div class="line">│     ├── cortexa53-crypto-poky-linux <span class="comment">// Work directory of compiling for application and others</span></div>
<div class="line">│     │   └── board              <span class="comment">// Package name</span></div>
<div class="line">│     │       └── 1.0-r0         <span class="comment">// Version</span></div>
<div class="line">│     │           ├── build      <span class="comment">// Output directory of compiling $(OUT_PATH)</span></div>
<div class="line">│     │           ├── image      <span class="comment">// Top directory for installation $(ENV_INS_ROOT)</span></div>
<div class="line">│     │           ├── recipe-sysroot <span class="comment">// Top directory for dependency $(ENV_DEP_ROOT)</span></div>
<div class="line">│     │           ├── recipe-sysroot-native <span class="comment">// Top directory for corresponding tools of host</span></div>
<div class="line">│     │           └── temp       <span class="comment">// Storage directory for log file</span></div>
<div class="line">│     │</div>
<div class="line">│     ├── cv2x-poky-linux        <span class="comment">// Compiling work directory for external core modules and rootfs</span></div>
<div class="line">│     │   ├── kernel-module-ambvideo <span class="comment">// Driver package name</span></div>
<div class="line">│     │   └── ipcam-image        <span class="comment">// Rootfs package name</span></div>
<div class="line">│     │       └── 1.0-r0         <span class="comment">// Version</span></div>
<div class="line">│     │           └── rootfs     <span class="comment">// Rootfs, similar to fakeroot of Amba Build</span></div>
<div class="line">│     └── x86_64-linux           <span class="comment">// Compiling work directory of host&#39;s tools</span></div>
<div class="line">│</div>
<div class="line">└── images                       <span class="comment">// Output directory for all images</span></div>
</div><!-- fragment --><dl class="section user"><dt>Yocto build directory of compiling scripts</dt><dd></dd></dl>
<div class="fragment"><div class="line">ambarella/metadata</div>
<div class="line">├── meta-ambabsp                 <span class="comment">// Kernel, image, driver, core tools and libraries</span></div>
<div class="line">│   │</div>
<div class="line">│   ├── classes                  <span class="comment">// Directory of class layers</span></div>
<div class="line">│   │   ├── ambaenv.bbclass      <span class="comment">// Ambarella environment class, environment variables are exported here</span></div>
<div class="line">│   │   ├── kconfig.bbclass      <span class="comment">// Kconfig class of build system</span></div>
<div class="line">│   │   ├── externalpatch.bbclass<span class="comment">// External patch class, decides whether patches need to be applied or redo</span></div>
<div class="line">│   │   ├── extrasrc.bbclass     <span class="comment">// Class to append source files or directories to make task verification</span></div>
<div class="line">│   │   └── weakdep.bbclass      <span class="comment">// Weak output class for build system extension</span></div>
<div class="line">│   │</div>
<div class="line">│   ├── conf                     <span class="comment">// Configuration directory for layers</span></div>
<div class="line">│   │   ├── layout.conf          <span class="comment">// Configuration file for layers, define how to search recipes</span></div>
<div class="line">│   │   └── machine              <span class="comment">// Configuration directory for machine</span></div>
<div class="line">│   │       ├── cv2x.conf        <span class="comment">// Configuration file for machine</span></div>
<div class="line">│   │       └── include</div>
<div class="line">│   │           ├── ambarella-common.inc <span class="comment">// Common sub-configurations for machine</span></div>
<div class="line">│   │           └── rootfs-type.inc <span class="comment">// Configure rootfs type dynamically</span></div>
<div class="line">│   │</div>
<div class="line">│   ├── ...</div>
<div class="line">│   ├── recipes-bsp              <span class="comment">// Package directory of bsp&#39;s core</span></div>
<div class="line">│   │   ├── boot</div>
<div class="line">│   │   │   ├── boot.bb</div>
<div class="line">│   │   │   └── boot.bbappend</div>
<div class="line">│   │   └── ...</div>
<div class="line">│   │</div>
<div class="line">│   ├── recipes-core             <span class="comment">// Package&#39;s directory of core</span></div>
<div class="line">│   │   ├── images</div>
<div class="line">│   │   │   └── ipcam-image.bb   <span class="comment">// Image package to generate rootfs</span></div>
<div class="line">│   │   └── prepare-patch</div>
<div class="line">│   │       └── prepare-patch.bb <span class="comment">// Prepare patch / unpatch</span></div>
<div class="line">│   │</div>
<div class="line">│   ├── recipes-devtools         <span class="comment">// Package directory of host tools</span></div>
<div class="line">│   │   └── kconfig-native</div>
<div class="line">│   │       ├── kconfig-native.bb<span class="comment">// Script of kconfig to compile build system</span></div>
<div class="line">│   │       └── kconfig-native.bbappend <span class="comment">// Specify source path and directory of compiling</span></div>
<div class="line">│   │</div>
<div class="line">│   ├── recipes-kernel</div>
<div class="line">│   │   ├── linux-patch          <span class="comment">// Linux decides to apply patch or not by checking config</span></div>
<div class="line">│   │   └── linux</div>
<div class="line">│   │       ├── linux-ambarella</div>
<div class="line">│   │       │   ├── 001-linux-version-tweak.patch <span class="comment">// kernel patch</span></div>
<div class="line">│   │       │   ├── feature.scc  <span class="comment">// kernel patch configuration</span></div>
<div class="line">│   │       │   └── smp.cfg      <span class="comment">// slice of kernel configuration</span></div>
<div class="line">│   │       ├── linux-ambarella.bb <span class="comment">// script to compile kernel</span></div>
<div class="line">│   │       └── linux-ambarella.bbappend <span class="comment">// set kernel&#39;s parameters, such as version, configuration file, and so on</span></div>
<div class="line">│   │</div>
<div class="line">│   ├── recipes-oss</div>
<div class="line">│   │   ├── base-files</div>
<div class="line">│   │   │   └── base-files_%.bbappend <span class="comment">// Modification to system configuration file of rootfs</span></div>
<div class="line">│   │   ├── busybox</div>
<div class="line">│   │   │   └── busybox_%.bbappend <span class="comment">// Modification to configuration of busybox</span></div>
<div class="line">│   │   └── systemd</div>
<div class="line">│   │       └── systemd_%.bbappend <span class="comment">// Modification to configuration of systemd</span></div>
<div class="line">│   │</div>
<div class="line">│   ├── recipes-sensor</div>
<div class="line">│   │   ├── kernel-module-os08a10</div>
<div class="line">│   │   │   ├── kernel-module-os08a10.bb</div>
<div class="line">│   │   │   └── kernel-module-os08a10.bbappend</div>
<div class="line">│   │   └── ...</div>
<div class="line">│   │</div>
<div class="line">│   └── recipes-video</div>
<div class="line">│       ├── kernel-module-ambvideo</div>
<div class="line">│       │   ├── kernel-module-ambvideo.bb</div>
<div class="line">│       │   └── kernel-module-ambvideo.bbappend</div>
<div class="line">│       └── ...</div>
<div class="line">│</div>
<div class="line">├── meta-ambalib                 <span class="comment">// General library</span></div>
<div class="line">├── meta-ambaapp                 <span class="comment">// Application and unit tests</span></div>
<div class="line">└── meta-thirdparty              <span class="comment">// Third-party open source libraries and tools</span></div>
<div class="line">    ├── recipes-prebuild         <span class="comment">// Ambarella prebuild OSS packages</span></div>
<div class="line">    └── recipes-oss              <span class="comment">// Public OSS packages</span></div>
</div><!-- fragment --><hr  />
 </div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="../../doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.3 </li>
  </ul>
</div>
</body>
</html>
