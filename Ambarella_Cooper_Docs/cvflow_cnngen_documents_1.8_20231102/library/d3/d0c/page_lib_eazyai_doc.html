<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Library: EazyAI Library API</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript" src="../../navtreedata.js"></script>
<script type="text/javascript" src="../../navtree.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/search.js"></script>
<link rel="search" href="../../search_opensearch.php?v=opensearch.xml" type="application/opensearchdescription+xml" title="Library"/>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="../../../library/mathjax/MathJax.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
<link href="../../doxygen-awesome.css" rel="stylesheet" type="text/css"/>
<link href="../../doxygen-awesome-sidebar-only.css" rel="stylesheet" type="text/css"/>
<link href="../../doxygen-ambarella.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="../../Ambarella.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Library
   </div>
   <div id="projectbrief">CVflow_1.8 @ 2023.11.02</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "../../search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('../../',true,true,'search.html','Search');
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
  $(document).ready(function() {
    if ($('.searchresults').length > 0) { searchBox.DOMSearchField().focus(); }
  });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('d3/d0c/page_lib_eazyai_doc.html','../../'); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">EazyAI Library API </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h1><a class="anchor" id="eazyai_history"></a>
0 Revision History</h1>
<a class="anchor" id="lib_eazyai_rev_history"></a>
<table class="doxtable">
<caption></caption>
<tr align="middle">
<th>Library Version </th><th>Updated Date </th><th>Modification </th></tr>
<tr align="middle">
<td>0.1.1 </td><td>20200827 </td><td align="left">Initial Version </td></tr>
<tr align="middle">
<td>0.1.2 </td><td>20210528 </td><td align="left">Added ea_queue for multi-thread support </td></tr>
<tr align="middle">
<td>0.1.3 </td><td>20210922 </td><td align="left">Added ea_display_stream_areas and ea_warp_* </td></tr>
<tr align="middle">
<td>0.1.4 </td><td>20211203 </td><td align="left">Modified ea_net, ea_tensor, let stream area buffer align to 128 </td></tr>
<tr align="middle">
<td>0.1.5 </td><td>20211228 </td><td align="left">Added canvas manual feed, and ext memory support </td></tr>
<tr align="middle">
<td>0.1.6 </td><td>20220516 </td><td align="left">Added automatically generation for image color table on stream overlay </td></tr>
<tr align="middle">
<td>0.1.7 </td><td>20220722 </td><td align="left">Added drawing DSP blur and overlay on the same stream </td></tr>
<tr align="middle">
<td rowspan="5">0.2.0 </td><td rowspan="5">20220824 </td></tr>
<tr>
<td align="left">Refine all the document to support x86 simulator and Unit Test </td></tr>
<tr>
<td align="left">Added support for x86 simulator in <a class="el" href="../../d3/d0c/page_lib_eazyai_doc.html#eazyai_simulator">3 EazyAI Simulator</a> </td></tr>
<tr>
<td align="left">Added support for EazyAI Arm postprocess in <a class="el" href="../../d3/d0c/page_lib_eazyai_doc.html#eazyai_arm_postprocess">4 EazyAI Arm Postprocess</a> </td></tr>
<tr>
<td align="left">Added EazyaAI unit test in <a class="el" href="../../d3/d0c/page_lib_eazyai_doc.html#eazyai_unit_test_cvflow">5 EazyAI Unit Test</a> and <a class="el" href="../../d3/d0c/page_lib_eazyai_doc.html#eazyai_unit_test_simulator">6 EazyAI Simulator Unit Test</a> </td></tr>
<tr align="middle">
<td rowspan="5">0.5.0 </td><td rowspan="5">20221230 </td></tr>
<tr>
<td align="left">Separate EazyAI library to Core, Utils, Communication, and Simulator, and declare Core library to MP level, <a class="el" href="../../d3/d0c/page_lib_eazyai_doc.html#eazyai_introduction">1 Introduction</a> </td></tr>
<tr>
<td align="left">Add EazyAI OSD modules in Core library which for OSD display in VOUT and Stream, <a class="el" href="../../d3/d0c/page_lib_eazyai_doc.html#eazyai_cvflow_core_osd">2.2.6 Core Library - ea_osd</a> </td></tr>
<tr>
<td align="left">Add some new APIs in <a class="el" href="../../d3/d0c/page_lib_eazyai_doc.html#eazyai_introduction_api_new">1.8 API Updates</a> </td></tr>
<tr>
<td align="left">Add compatibility violation declaration in <a class="el" href="../../d3/d0c/page_lib_eazyai_doc.html#eazyai_introduction_api_break">1.9 API Compatibility Violation</a> </td></tr>
<tr align="middle">
<td rowspan="13">0.5.1 </td><td rowspan="13">20230518 </td></tr>
<tr>
<td align="left">Add support for CV72 and Declare module licenses in <a class="el" href="../../d3/d0c/page_lib_eazyai_doc.html#eazyai_introduction">1 Introduction</a> </td></tr>
<tr>
<td align="left">Use OpenCV 4.5.1 for Utils library in <a class="el" href="../../d3/d0c/page_lib_eazyai_doc.html#eazyai_cvflow_utils">2.3 Utils Library</a> </td></tr>
<tr>
<td align="left">Add API Core test in <a class="el" href="../../d3/d0c/page_lib_eazyai_doc.html#eazyai_core_api_test">8 EazyAI Core API Test</a> </td></tr>
<tr>
<td align="left">Add some new APIs in <a class="el" href="../../d3/d0c/page_lib_eazyai_doc.html#eazyai_introduction_api_new">1.8 API Updates</a> </td></tr>
<tr>
<td align="left">Add compatibility violation declaration in <a class="el" href="../../d3/d0c/page_lib_eazyai_doc.html#eazyai_introduction_api_break">1.9 API Compatibility Violation</a> </td></tr>
<tr>
<td align="left">Refine command lines for <a class="el" href="../../d3/d0c/page_lib_eazyai_doc.html#eazyai_unit_test_cvflow_usage">5.2 Unit Test Usage</a> </td></tr>
<tr>
<td align="left">Refine command lines for <a class="el" href="../../d3/d0c/page_lib_eazyai_doc.html#eazyai_arm_postprocess">4 EazyAI Arm Postprocess</a> </td></tr>
<tr>
<td align="left">Add support for Soft-NMS in <a class="el" href="../../d3/d0c/page_lib_eazyai_doc.html#eazyai_cvflow_sub_utils">2.3.2 Utils Library - ea_utils</a>. </td></tr>
<tr>
<td align="left">Delete the option <code>class_num</code> of <code>test_eazyai</code> in <a class="el" href="../../d3/d0c/page_lib_eazyai_doc.html#eazyai_unit_test_cvflow_usage">5.2 Unit Test Usage</a> </td></tr>
<tr>
<td align="left">Use default OpenCV version in system for PC Simulator in <a class="el" href="../../d3/d0c/page_lib_eazyai_doc.html#eazyai_simulator_build_compile">3.1.2 Compile</a> </td></tr>
<tr>
<td align="left">Update <code>test_eazyai</code> usage in <a class="el" href="../../d3/d0c/page_lib_eazyai_doc.html#eazyai_unit_test_cvflow_usage">5.2 Unit Test Usage</a> </td></tr>
<tr>
<td align="left">Add EazyAI display unit test in <a class="el" href="../../d3/d0c/page_lib_eazyai_doc.html#eazyai_display_unit_test_cvflow">9 EazyAI Display Unit Test</a> </td></tr>
<tr align="middle">
<td rowspan="3">0.5.2 </td><td rowspan="3">20230728 </td></tr>
<tr>
<td align="left">Updated simulator in <a class="el" href="../../d3/d0c/page_lib_eazyai_doc.html#eazyai_simulator_build_compile">3.1.2 Compile</a> </td></tr>
<tr>
<td align="left">Updated simulator unit test in <a class="el" href="../../d3/d0c/page_lib_eazyai_doc.html#eazyai_unit_test_simulator_usage">6.2 Usage</a> </td></tr>
<tr align="middle">
<td rowspan="3">0.5.4 </td><td rowspan="3">20230928 </td></tr>
<tr>
<td align="left">Update <code>test_eazyai</code> usage in <a class="el" href="../../d3/d0c/page_lib_eazyai_doc.html#eazyai_unit_test_cvflow_usage">5.2 Unit Test Usage</a> </td></tr>
<tr>
<td align="left">Update <a class="el" href="../../d3/d0c/page_lib_eazyai_doc.html#eazyai_introduction_api_break">1.9 API Compatibility Violation</a> </td></tr>
</table>
<hr  />
<h1><a class="anchor" id="eazyai_introduction"></a>
1 Introduction</h1>
<p>EazyAI is an easy framework for network debugging and deployment, simulations, file mode tests, and live demos.</p>
<p>Since version 0.5.0, EazyAI has been extended to the following different libraries.</p>
<a class="anchor" id="eazyai_modules_introduction"></a>
<table class="doxtable">
<caption></caption>
<tr align="middle">
<th>EazyAI Module Name </th><th>Library SO Name </th><th>Library Version </th><th>Ambarella License </th><th>Features </th></tr>
<tr align="middle">
<td rowspan="7">Core </td><td rowspan="7">libeazyai.so </td><td rowspan="7">v0.5.1 </td><td rowspan="7"><b>MP</b> Level License </td><td align="left"><a class="el" href="../../d3/d0c/page_lib_eazyai_doc.html#eazyai_cvflow_core_env">2.2.1 Core Library - ea_env</a> functions initialize the necessary device environment </td></tr>
<tr>
<td align="left"><a class="el" href="../../d3/d0c/page_lib_eazyai_doc.html#eazyai_cvflow_core_tensor">2.2.2 Core Library - ea_tensor</a> functions provide interfaces for the tensor, which carries data in the data flow of a CV program </td></tr>
<tr>
<td align="left"><a class="el" href="../../d3/d0c/page_lib_eazyai_doc.html#eazyai_cvflow_core_img_resource">2.2.3 Core Library - ea_img_resource</a> functions load image type data from RAW binary, JPEG / PNG, DSP Canvas Buffer, Pyramid Buffer, and so on </td></tr>
<tr>
<td align="left"><a class="el" href="../../d3/d0c/page_lib_eazyai_doc.html#eazyai_cvflow_core_preprocess">2.2.4 Core Library - ea_preprocess</a> functions provide functions to perform image conversion, such as format conversion, resize, crop, and so on </td></tr>
<tr>
<td align="left"><a class="el" href="../../d3/d0c/page_lib_eazyai_doc.html#eazyai_cvflow_core_net">2.2.5 Core Library - ea_net</a> functions provide functions to forward a network on the CVflow </td></tr>
<tr>
<td align="left"><a class="el" href="../../d3/d0c/page_lib_eazyai_doc.html#eazyai_cvflow_core_osd">2.2.6 Core Library - ea_osd</a> functions provide functions to configure the OSD (VOUT-Display / Stream-Display) buffer </td></tr>
<tr>
<td align="left"><a class="el" href="../../d3/d0c/page_lib_eazyai_doc.html#eazyai_cvflow_core_log">2.2.7 Core Library - ea_log</a> macros, enumerations and structures provides macros to control the output of log messages of each individual source code file </td></tr>
<tr align="middle">
<td rowspan="2">Utils </td><td rowspan="2">libeazyai_utils.so </td><td rowspan="2">v0.5.1 </td><td rowspan="2"><b>Reference</b> Level License </td><td align="left"><a class="el" href="../../d3/d0c/page_lib_eazyai_doc.html#eazyai_cvflow_utils_display">2.3.1 Utils Library - ea_display</a> functions provide functions to draw detection results on the display media </td></tr>
<tr>
<td align="left"><a class="el" href="../../d3/d0c/page_lib_eazyai_doc.html#eazyai_cvflow_sub_utils">2.3.2 Utils Library - ea_utils</a> functions provide utilities such as NMS calculation and frames per second (fps) statistics </td></tr>
<tr align="middle">
<td rowspan="1">Communication </td><td rowspan="1">libeazyai_comm.so </td><td rowspan="1">v0.5.1 </td><td rowspan="1"><b>Reference</b> Level License </td><td align="left"><a class="el" href="../../d3/d0c/page_lib_eazyai_doc.html#eazyai_cvflow_comm">2.4 Communication Library</a> functions provide functions to transfer data in multi-threads. </td></tr>
<tr align="middle">
<td rowspan="1">PC Simulator </td><td rowspan="1">libeazyai.so </td><td rowspan="1">v0.5.1 </td><td rowspan="1"><b>Reference</b> Level License </td><td align="left"><a class="el" href="../../d3/d0c/page_lib_eazyai_doc.html#eazyai_simulator">3 EazyAI Simulator</a> has similar APIs with above chip modules to allow users to run simulation inference in PC build server. </td></tr>
<tr align="middle">
<td rowspan="1">NN PostProcess </td><td rowspan="1">libeazyai_arm_postprocess.so </td><td rowspan="1">v0.1.1 </td><td rowspan="1"><b>Reference</b> Level License </td><td align="left"><a class="el" href="../../d3/d0c/page_lib_eazyai_doc.html#eazyai_arm_postprocess">4 EazyAI Arm Postprocess</a> functions assembles public network post processing realization on Arm, such as SSD, YOLOV5, and so on. </td></tr>
</table>
<p>Currently, EazyAI has supported below chips.</p><ul>
<li><b>CV2x</b> which includes CV2, CV22, CV25, and CV28.</li>
<li><b>CV5x</b> which includes CV5 and CV52.</li>
<li><b>CV7x</b> which includes CV72.</li>
</ul>
<h2><a class="anchor" id="eazyai_introduction_overview"></a>
1.1 Overview</h2>
<p>The following is the detailed structure and introduction for EazyAI.</p>
<div class="image">
<img src="../../eazyai_library_framework.jpg" alt=""/>
<div class="caption">
Figure 1-1. EazyAI Library Framework.</div></div>
<ul>
<li><b>EazyAI Deployment</b>, which provides the same application programming interfaces (APIs) to support real CVflow chip deployment.<ul>
<li><b>Core</b>, which includes the <b>MP level</b> APIs for image resource query, image preprocess, inference, and the low level OSD visualize.</li>
<li><b>Communication</b>, which includes the <b>Reference level</b> APIs for Queue support of multi-threads, and so on.</li>
<li><b>Utils</b>, which includes the <b>Reference level</b> APIs for some high level smart OSD display APIs which will call the low level OSD visualize in <b>Core</b> library, and some basic tools, such as fps statistics, 8 bit color table generation of images, basic NMS, OpenCV related (Call OpenCV library), and so on.</li>
</ul>
</li>
<li><b>EazyAI Simulator</b>, which includes the <b>Reference level</b> APIs for PC accuracy debug with Ades and Acinference in CNNGen toolchain, actually it includes the whole same APIs in <b>NN Deployment</b>. That means users can use the same APIs for both debugging on the x86 platform and network deployment on chips.</li>
<li><b>EazyAI ArmÂ® Postprocess</b>, which includes public network postprocess codes such as SSD, Yolov5, and more, enabling users to easily add customized post-processing code into the library, and some custom draw functions which will call the <b>NN Deployment</b> libraries on Chips, or <b>NN Simulator</b> library on PC.</li>
<li><b>EazyAI Unit Test</b>, which provides a unified demo to run on different networks on Chips or PC.</li>
<li><b>EazyAI Applications</b>, which is not showed in figure and includes lots of complex live demo examples with EazyAI APIs, such as multi-networks, and so on. It only can work on chips.</li>
<li><b>EazyAI Core API Test</b>, which provides simple usage for every API in Core library, user can use it for test and code reference.</li>
</ul>
<dl class="section note"><dt>Note</dt><dd>The x86 simulator can support only file mode. The EazyAI library can be found in the following two packages:<ul>
<li><code>ambarella/packages/eazyai</code> in the Linux software development kit (SDK) package.</li>
<li><code>cnngen_sample_package/library/eazyai</code> in the CVflow CNNGen Sample Package.</li>
</ul>
</dd>
<dd>
The EazyAI library version may differ between the two packages.</dd></dl>
<h2><a class="anchor" id="eazyai_introduction_cvflow"></a>
1.2 NN Deployment</h2>
<p>EazyAI CVflow Deployment Libraries provides easy-to-use APIs for running neural networks (NNs) on Ambarella computer vision (CV) platforms. The library encapsulates low-level modules in the SDK package including the image audio video (IAV) driver, Cavalry_Mem, VPROC, and NNCtrl. Then, it arranges high-level functions with general conceptions in the CV ground, such as image query, preprocess, forward, and visualize. </p><div class="image">
<img src="../../eazyai_overview_cvflow.jpg" alt=""/>
<div class="caption">
Figure 1-2. EazyAI CVflow Overview. (contents in [...] are dependent upon OpenCV.)</div></div>
<dl class="section note"><dt>Note</dt><dd><ul>
<li>Only <b>Core</b> library is <b>MP level</b> which will not include image decode, postprocess, and smart display in <b>Utils</b>, <b>Comm</b>, and <b>ARM Postprocess</b> libraries.</li>
<li>New module <code>ea_osd</code> is more flexible than 'ea_display', but 'ea_display' is easy to use, and <b>Core</b> library only includes <code>ea_osd</code> support.</li>
</ul>
</dd></dl>
<h2><a class="anchor" id="eazyai_introduction_simulator"></a>
1.3 NN Simulator</h2>
<p>The EazyAI Simulator library share the same structures and APIs with EazyAI Deployment Libraries. The EazyAI Simulator encapsulates Ambarella directed acyclic graph (DAG) emulator system (ADES) APIs and Acinference APIs to perform forward inference simulations on the x86 Linux platform.</p><ul>
<li>While using the <b>ADES</b> API, the simulation inference will possess bit-perfect results with real CVflow chip output. However, the simulation may be slow.</li>
<li>While using the <b>Acinference</b> API, the simulation inference will perform quickly; however, and its result will not be bit perfect with the real CVflow chip, but very close to the CVflow output.</li>
</ul>
<div class="image">
<img src="../../eazyai_overview_simulator.jpg" alt=""/>
<div class="caption">
Figure 1-3. EazyAI Simulator Overview.</div></div>
<h2><a class="anchor" id="eazyai_introduction_arm_postprocess"></a>
1.4 NN Arm Postprocess</h2>
<p>The EazyAI Arm Postprocess library provides public model postprocess implementations. Users also can easily add customized postprocess to this library by implementing four functions, then register these functions to the EazyAI Arm Postprocess library. For more details, refer to <a class="el" href="../../d3/d0c/page_lib_eazyai_doc.html#eazyai_arm_postprocess_customize_postprocess">4.2 How to Add Customized Postprocess</a>.</p>
<h2><a class="anchor" id="eazyai_introduction_unit_test"></a>
1.5 Unit Test</h2>
<p>EazyAI's unit test is <code>test_eazyai</code>, which includes the three parts below:</p><ul>
<li>Input query and preprocess, which use the EazyAI Core API to query frames from digital signal processor (DSP) buffers or get frames from file input (RAW, JPEG, PNG). Then, the API converts the frames to the correct network format required by CVflow, DSP, or Arm.</li>
<li>Inference with <a class="el" href="../../d3/d0c/page_lib_eazyai_doc.html#eazyai_introduction_cvflow">1.2 NN Deployment</a> and <a class="el" href="../../d3/d0c/page_lib_eazyai_doc.html#eazyai_introduction_simulator">1.3 NN Simulator</a>.</li>
<li>Postprocess with <a class="el" href="../../d3/d0c/page_lib_eazyai_doc.html#eazyai_introduction_arm_postprocess">1.4 NN Arm Postprocess</a>, which implements the non-maximum suppression (NMS) code on Arm to get the final network result, then shows the final result on the video output (VOUT), stream, images, or print information.</li>
</ul>
<p><code>test_eazyai</code> is a convenient unit test for users to perform x86 simulations, performance tests with file mode, and final live deployments on CVflow chips. This unit test can support most of a single network, and includes three different modes below:</p><ul>
<li><b>Dummy mode</b>, which feeds fixed input data to the network and gets the inference time without postprocess. Dummy mode only supports CVflow.</li>
<li><b>File mode</b>, which gets input data from RAW binary files, JPEG files, or PNG files and performs preprocess with Arm or CVflow, then performs inference with or without postprocess. With postprocess, this mode shows the result on images and can support both CVflow and the simulator.</li>
<li><b>Live mode</b>, which queries frames from the DSP canvas or pyramid buffer, and performs CVflow preprocess and CVflow inference, then shows the result on VOUT or DSP stream.</li>
</ul>
<div class="image">
<img src="../../test_eazyai_overview.jpg" alt=""/>
<div class="caption">
Figure 1-5. test_eazyai Overview.</div></div>
<h2><a class="anchor" id="eazyai_introduction_apps"></a>
1.6 Application</h2>
<p>EazyAI applications include some complex demos, such as multiple network, doorbell, and more.</p>
<h2><a class="anchor" id="eazyai_introduction_folder_structure"></a>
1.7 Folder Structure</h2>
<div class="fragment"><div class="line">EazyAI</div>
<div class="line">  |------apps      <span class="comment">//source folder of EazyAI Applications</span></div>
<div class="line">  |------unit_test</div>
<div class="line">  |          |</div>
<div class="line">  |          |------test_eazyai.c  <span class="comment">// source of EazyAI Unit Test</span></div>
<div class="line">  |          |------nn_arm_task        <span class="comment">// source folder of EazyAI Arm Postprocess</span></div>
<div class="line">  |          |------eazyai_video       <span class="comment">// source of eazyai_video which is used to enable DSP in different platforms</span></div>
<div class="line">  |          |------cnngui         <span class="comment">// CNNGUI tool configuration file</span></div>
<div class="line">  |------src</div>
<div class="line">          |------core          <span class="comment">// source folder of EazyAI Core</span></div>
<div class="line">          |------simulator     <span class="comment">// source folder of EazyAI Simulator</span></div>
<div class="line">          |------utils         <span class="comment">// source folder of EazyAI Utility</span></div>
<div class="line">          |------comm          <span class="comment">// source folder of EazyAI Communication module</span></div>
</div><!-- fragment --><h2><a class="anchor" id="eazyai_introduction_api_new"></a>
1.8 API Updates</h2>
<a class="anchor" id="lib_eazyai_api_rev_history"></a>
<table class="doxtable">
<caption></caption>
<tr align="middle">
<th>Library Version </th><th>Library Name </th><th>Module Name </th><th><p class="starttd">API / Structure Name</p>
<p class="endtd"></p>
</th></tr>
<tr align="middle">
<td rowspan="25">0.5.0 </td><td rowspan="23">libeazyai.so </td><td rowspan="8"><a class="el" href="../../d3/d0c/page_lib_eazyai_doc.html#eazyai_cvflow_core_env">2.2.1 Core Library - ea_env</a> </td></tr>
<tr>
<td align="left">int <a class="el" href="../../dd/df6/group__eazyai-env-details.html#gad61eb5abc52a063fbaec3b06c23796e8">ea_env_enabled_features()</a> </td></tr>
<tr>
<td align="left">ea_env_arch_t <a class="el" href="../../dd/df6/group__eazyai-env-details.html#gacae3f1cc8febe2ba52a11ab9c45f8f5e">ea_env_arch()</a> </td></tr>
<tr>
<td align="left">const ea_env_properties_t *ea_env_properties() </td></tr>
<tr>
<td align="left">int <a class="el" href="../../dd/df6/group__eazyai-env-details.html#ga0f244b8a6c918815f1088a8c40f3fc39">ea_env_set_overlay_buffer_offset(unsigned long offset)</a> </td></tr>
<tr>
<td align="left">unsigned long <a class="el" href="../../dd/df6/group__eazyai-env-details.html#gaf6badc0e93c33b98133da6bb47e3a6b4">ea_env_dsp_blur_arbitrary_buffer_size()</a> </td></tr>
<tr>
<td align="left">int <a class="el" href="../../dd/df6/group__eazyai-env-details.html#gadd76e0c5afe09b54dec5dbbd6042b7df">ea_env_set_dsp_blur_arbitrary_buffer_offset(unsigned long offset)</a> </td></tr>
<tr>
<td align="left">int <a class="el" href="../../dd/df6/group__eazyai-env-details.html#gaa1c61d99f836bea3eba142602118896f">ea_env_set_callbacks(const ea_env_callbacks_t *callbacks)</a> </td></tr>
<tr align="middle">
<td rowspan="2"><a class="el" href="../../d3/d0c/page_lib_eazyai_doc.html#eazyai_cvflow_core_preprocess">2.2.4 Core Library - ea_preprocess</a> </td></tr>
<tr>
<td align="left">int <a class="el" href="../../d1/d67/group__eazyai-preprocess-details.html#ga7705d75320122bc00f897269d62a4849">ea_rotate_flip(ea_tensor_t *src, ea_tensor_t *dst, unsigned int flip_bitmap, ea_tensor_color_mode_t color_mode, ea_device_t device)</a> </td></tr>
<tr align="middle">
<td rowspan="11"><a class="el" href="../../d3/d0c/page_lib_eazyai_doc.html#eazyai_cvflow_core_tensor">2.2.2 Core Library - ea_tensor</a> </td></tr>
<tr>
<td align="left">enum ea_data_type_e </td></tr>
<tr>
<td align="left">ea_tensor_t *ea_tensor_new_from_vect_desc(ea_memory_t mem_type, const vect_desc_t *desc, void *virt) </td></tr>
<tr>
<td align="left">ea_tensor_t *ea_tensor_new_from_other_buffer(ea_memory_t mem_type, int iav_buf_pid, ea_data_type_t dtype, const size_t *shape, size_t pitch, void *virt, unsigned long phys) </td></tr>
<tr>
<td align="left">int <a class="el" href="../../da/db2/group__eazyai-tensor-details.html#gae35fd2c61f68dd5be27cf6adcf6c44ac">ea_tensor_vect_desc(const ea_tensor_t *tensor, vect_desc_t *desc)</a> </td></tr>
<tr>
<td align="left">void *ea_tensor_data_for_read(ea_tensor_t *tensor, ea_device_t device) </td></tr>
<tr>
<td align="left">void *ea_tensor_data_for_write(ea_tensor_t *tensor, ea_device_t device) </td></tr>
<tr>
<td align="left">unsigned long <a class="el" href="../../da/db2/group__eazyai-tensor-details.html#gac8704321317065cb7f3e719de09f22b7">ea_tensor_phys_for_read(ea_tensor_t *tensor, ea_device_t device)</a> </td></tr>
<tr>
<td align="left">unsigned long <a class="el" href="../../da/db2/group__eazyai-tensor-details.html#gafe8d0efac926ce9d147c95d4a3ee2d8d">ea_tensor_phys_for_write(ea_tensor_t *tensor, ea_device_t device)</a> </td></tr>
<tr>
<td align="left">ea_tensor_t *ea_tensor_new_from_image(const char *path) </td></tr>
<tr>
<td align="left">int <a class="el" href="../../da/db2/group__eazyai-tensor-details.html#gada2e0fb9e25e195bed9697fc96732bd0">ea_tensor_to_image(ea_tensor_t *tensor, ea_tensor_color_mode_t color_mode, const char *path)</a> </td></tr>
<tr align="middle">
<td rowspan="2"><a class="el" href="../../d3/d0c/page_lib_eazyai_doc.html#eazyai_cvflow_core_osd">2.2.6 Core Library - ea_osd</a> </td></tr>
<tr>
<td align="left">Add support for this module first time </td></tr>
<tr align="middle">
<td rowspan="2">libeazyai_utils.so </td><td rowspan="2"><a class="el" href="../../d3/d0c/page_lib_eazyai_doc.html#eazyai_cvflow_sub_utils">2.3.2 Utils Library - ea_utils</a> </td></tr>
<tr>
<td align="left"><p class="starttd">int <a class="el" href="../../db/d66/group__eazyai-utils-details.html#ga0a17a3b00407cd9dea9800279c4511e2">ea_utils_env_callbacks_register()</a></p>
<p class="endtd"></p>
</td></tr>
<tr align="middle">
<td rowspan="13">0.5.1 </td><td rowspan="11">libeazyai.so </td><td rowspan="2"><a class="el" href="../../d3/d0c/page_lib_eazyai_doc.html#eazyai_cvflow_core_tensor">2.2.2 Core Library - ea_tensor</a> </td></tr>
<tr>
<td align="left">ea_tensor_t *ea_tensor_new_from_other_roi() </td></tr>
<tr align="middle">
<td rowspan="2"><a class="el" href="../../d3/d0c/page_lib_eazyai_doc.html#eazyai_cvflow_core_img_resource">2.2.3 Core Library - ea_img_resource</a> </td></tr>
<tr>
<td align="left">Add support for custom data format of RAW binary input and NV12 input </td></tr>
<tr align="middle">
<td rowspan="2"><a class="el" href="../../d3/d0c/page_lib_eazyai_doc.html#eazyai_cvflow_core_preprocess">2.2.4 Core Library - ea_preprocess</a> </td></tr>
<tr>
<td align="left">Add support for small ROI crop from size&gt;4096 RGB/BGR/GRAYSCALE images. </td></tr>
<tr align="middle">
<td rowspan="2"><a class="el" href="../../d3/d0c/page_lib_eazyai_doc.html#eazyai_cvflow_core_net">2.2.5 Core Library - ea_net</a> </td></tr>
<tr>
<td align="left">Add support for updating (0,0,8,0) input for (0,0,0,0) tensor automatically with 256 scaling only </td></tr>
<tr align="middle">
<td rowspan="3"><a class="el" href="../../d3/d0c/page_lib_eazyai_doc.html#eazyai_cvflow_core_osd">2.2.6 Core Library - ea_osd</a> </td></tr>
<tr>
<td align="left">Add support for dynamic ROI of areas </td></tr>
<tr>
<td align="left">Add support for circular buffer size configuration. </td></tr>
<tr align="middle">
<td rowspan="2">libeazyai_utils.so </td><td rowspan="2"><a class="el" href="../../d3/d0c/page_lib_eazyai_doc.html#eazyai_cvflow_sub_utils">2.3.2 Utils Library - ea_utils</a> </td></tr>
<tr>
<td align="left">int <a class="el" href="../../db/d66/group__eazyai-utils-details.html#ga6773a669f94b50d055030d8a601b2c60">ea_soft_nms()</a> </td></tr>
</table>
<dl class="section note"><dt>Note</dt><dd><b>Deployment</b> libraries and <b>Simulator</b> library share the same API, also share the same API updates.</dd></dl>
<h2><a class="anchor" id="eazyai_introduction_api_break"></a>
1.9 API Compatibility Violation</h2>
<p>Since version <b>0.5.0</b>, EazyAI is separated to three libraries, and <b>Core</b> library is declared for MP level. Then there will be API compatibility violation as follows.</p>
<p><b>Core v0.5.0</b> Library</p><ul>
<li><code>EA_ENV_ENABLE_OSD_JPEG</code> is removed, users need to call <code><a class="el" href="../../db/d66/group__eazyai-utils-details.html#ga0a17a3b00407cd9dea9800279c4511e2">ea_utils_env_callbacks_register()</a></code> for JPEG file mode in the application.</li>
<li><code><a class="el" href="../../d9/d87/group__eazyai-net-details.html#gaf1bcd9b82854757c20483648d1479537">ea_net_show_nn_bin_version()</a></code> adds ea_net as a new input parameter.</li>
</ul>
<p><b>Utils v0.5.0</b> Library</p><ul>
<li><code>EA_DISPLAY_STREAM_DSP_BLUR</code> is removed, use <code>EA_DISPLAY_STREAM</code> instead.</li>
<li><code>EA_DISPLAY_STREAM_AREAS</code> is removed, use <code>EA_DISPLAY_STREAM</code> or use <code>ea_osd()</code> to implement directly.</li>
<li>Rotation is removed this time which will not rotate overlay content adapted to stream rotation.</li>
<li>Some parameters are being changed for <code>ea_display_obj_params_t</code> in <code><a class="el" href="../../d0/d71/ea__display_8h.html" title="The interface of EazyAI Display.">ea_display.h</a></code>.<ul>
<li>Deprecated Parameters<ol type="1">
<li><code>int transparent_color</code>, which does nothing with this parameter.</li>
<li><code>const char *char_set</code>, which is fixed with defined Macro in library.</li>
</ol>
</li>
<li>New Parameters<ol type="1">
<li><code>int draw_with_opencv</code>, which select OpenCV to draw shapes. Default is 0.</li>
</ol>
</li>
</ul>
</li>
<li>Some APIs are renamed in <code><a class="el" href="../../db/d1e/eazyai__utils_8h.html" title="The public interfaces of EazyAI utilities.">eazyai_utils.h</a></code>.<ol type="1">
<li>Rename <code>ea_display_efm_frame_t</code> to <code>ea_osd_refresh_efm_params_t</code> with same structure.</li>
<li><code>ea_color_table_image_t *ea_color_table_image_create(const char *path, int width, int height, int start_index, int color_num)</code></li>
<li><code>void <a class="el" href="../../db/d66/group__eazyai-utils-details.html#ga6be192ddf7231cddbebeb6685d45be67">ea_color_table_image_free(ea_color_table_image_t *color_table_image)</a></code></li>
<li><code>uint8_t *ea_color_table_image_rgb_color_table(ea_color_table_image_t *color_table_image)</code></li>
<li><code>uint8_t *ea_color_table_image_pixel_data(ea_color_table_image_t *color_table_image)</code></li>
<li><code>int <a class="el" href="../../db/d66/group__eazyai-utils-details.html#gaa81aa1743cc442870e3b25d7ae75aba0">ea_color_table_image_width(ea_color_table_image_t *color_table_image)</a></code></li>
<li><code>int <a class="el" href="../../db/d66/group__eazyai-utils-details.html#ga4fac6c4e67359d870498547f86c302bb">ea_color_table_image_height(ea_color_table_image_t *color_table_image)</a></code></li>
</ol>
</li>
</ul>
<p><b>Core v0.5.1</b> Library</p><ul>
<li>Move <a class="el" href="../../d3/d0c/page_lib_eazyai_doc.html#eazyai_cvflow_core_log">2.2.7 Core Library - ea_log</a> APIs to Core library.</li>
<li><code>ea_net_type_t</code> is removed as not used.</li>
<li>Rename <code>ea_osd_area_location_t</code> to <code>ea_osd_roi_t</code>.</li>
<li>Add ROI parameters in <code><a class="el" href="../../da/dc6/group__eazyai-osd-details.html#gadc6e372f53d7d766fea249d395d354ef">ea_osd_area_current_buffer()</a></code>.</li>
<li>Refine return value to int for <code><a class="el" href="../../d9/d87/group__eazyai-net-details.html#gaea0c0ae54f20344fc21b9ee5fdd59df0">ea_net_config_input()</a></code> and <code><a class="el" href="../../d9/d87/group__eazyai-net-details.html#gaf0631da862b369b7ab6cdbefee343d5b">ea_net_config_output()</a></code>. <b>Utils</b> Library</li>
<li><code>EA_DISPLAY_STREAM_DSP_BLUR</code> is removed, use <code>EA_DISPLAY_STREAM</code> instead.</li>
</ul>
<p><b>Core v0.5.4</b> Library</p><ul>
<li>Remove vproc_image_deformation() for Cavalry V3 in <a class="el" href="../../d1/d67/group__eazyai-preprocess-details.html#ga565556c72e67622ff43979ef7eb4d01f">ea_cvt_color_resize</a> APIs.</li>
</ul>
<dl class="section note"><dt>Note</dt><dd><b>Deployment</b> libraries and <b>Simulator</b> library share the same API, also share the same API compatibility violation.</dd></dl>
<hr  />
<h1><a class="anchor" id="eazyai_cvflow"></a>
2 EazyAI Deployment</h1>
<h2><a class="anchor" id="eazyai_cvflow_build"></a>
2.1 Build</h2>
<h3><a class="anchor" id="eazyai_cvflow_build_include"></a>
2.1.1 Include</h3>
<p>For each source file that uses the API in the EazyAI library, the following include file is required. </p><div class="fragment"><div class="line"><span class="preprocessor">#include &lt;<a class="code" href="../../dd/dbe/eazyai_8h.html">eazyai.h</a>&gt;</span></div>
</div><!-- fragment --> <h3><a class="anchor" id="eazyai_cvflow_build_makefile"></a>
2.1.2 Makefile</h3>
<p>There are two link targets on the EazyAI library: <code>libeazyai.so</code> and <code>libeazyai_utils.so</code>. The <code>libeazyai.so</code> is the library for core functions mainly including <b>IAV</b>, <b>NNCTRL</b>, <b>VPROC</b>. The <code>libeazyai_utils.so</code> is the library for utilities, including drawing various shapes on a given buffer, etc. It has dependency of the OpenCV library and of the <code>libeazyai.so</code>. For example, the <code>ea_display</code> module in the <code>libeazyai_utils.so</code> calls the <code>ea_osd</code> module in the the <code>libeazyai.so</code> to update the overlay buffer or frame buffer.</p>
<p>For the applications that do not use <code>ea_utils</code> or <code>ea_display</code> functions, the following content is used in the SDK makefile. </p><div class="fragment"><div class="line">LOCAL_CFLAGS   += -I$(AMB_TOPDIR)/packages/eazyai/inc</div>
<div class="line">LOCAL_LIBS     :=  libeazyai.so</div>
<div class="line">LOCAL_LDFLAGS  += -Wl,-rpath-link=$(FAKEROOT_DIR)/usr/lib</div>
</div><!-- fragment --><p>For the applications that use <code>ea_utils</code> or <code>ea_display</code> functions, the following content can be used in the SDK makefile. </p><div class="fragment"><div class="line">LOCAL_CFLAGS   += -I$(AMB_TOPDIR)/packages/eazyai/inc</div>
<div class="line">LOCAL_LIBS     :=  libeazyai.so</div>
<div class="line">LOCAL_LDFLAGS  += -Wl,-rpath-link=$(FAKEROOT_DIR)/usr/lib</div>
<div class="line">ifeq ($(BUILD_AMBARELLA_EAZYAI_UTILS_PACKAGE), y)</div>
<div class="line">LOCAL_LIBS     := libeazyai_utils.so</div>
<div class="line">LOCAL_LDFLAGS  +=  -Wl,-rpath-link=$(PREBUILD_OSS_DIR)/freetype/usr/lib</div>
<div class="line">   -Wl,-rpath-link=$(PREBUILD_OSS_DIR)/opencv/usr/lib \</div>
<div class="line">   -Wl,-rpath-link=$(PREBUILD_OSS_DIR)/libjpeg-turbo/usr/lib \</div>
<div class="line">   -Wl,-rpath-link=$(PREBUILD_OSS_DIR)/libpng/usr/lib \</div>
<div class="line">   -Wl,-rpath-link=$(PREBUILD_OSS_DIR)/zlib/usr/lib</div>
<div class="line">endif</div>
</div><!-- fragment --><h3><a class="anchor" id="eazyai_cvflow_build_configuration"></a>
2.1.3 Configuration</h3>
<p>To use the EazyAI library in the SDK, there are two ways to select the library in configuration.</p><ol type="1">
<li>Manually select EazyAI in <code>make menuconfig</code>. The OpenCV support will be selected if <code>BUILD_AMBARELLA_EAZYAI_UTILS_PACKAGE</code> is selected.</li>
</ol>
<ul>
<li>For CV2x SDK 3.0 Amba build: <div class="fragment"><div class="line">build $ make menuconfig</div>
<div class="line">    [*] Ambarella Package Configuration ---&gt;</div>
<div class="line">        [*] Build Ambarella EAZYAI library ---&gt;</div>
<div class="line">            [*] Build eazyai core library</div>
<div class="line">            [*] Build eazyai utilities library</div>
<div class="line">            [*] Build eazyai communication library</div>
</div><!-- fragment --></li>
<li>For Cooper Amba build: <div class="fragment"><div class="line">build $ make menuconfig</div>
<div class="line">    packages  ---&gt;</div>
<div class="line">        eazyai  ---&gt;</div>
<div class="line">             [*] libeazyai (packages/eazyai/lib_amba_mk)</div>
</div><!-- fragment --></li>
<li>For Cooper Yocto build: <div class="fragment"><div class="line">build $ make menuconfig</div>
<div class="line">    meta-ambalib  ---&gt;</div>
<div class="line">        recipes-eazyai  ---&gt;</div>
<div class="line">             [*] libeazyai (meta-ambalib/recipes-eazyai/libeazyai)</div>
</div><!-- fragment --></li>
</ul>
<ol type="1">
<li>Select in AmbaConfig file. <div class="fragment"><div class="line">select BUILD_AMBARELLA_EAZYAI_PACKAGE</div>
<div class="line">select BUILD_AMBARELLA_EAZYAI_CORE_PACKAGE</div>
<div class="line">select BUILD_AMBARELLA_EAZYAI_UTILS_PACKAGE</div>
<div class="line">select BUILD_AMBARELLA_EAZYAI_COMM_PACKAGE</div>
</div><!-- fragment --></li>
</ol>
<hr  />
<h2><a class="anchor" id="eazyai_cvflow_core"></a>
2.2 Core Library</h2>
<h3><a class="anchor" id="eazyai_cvflow_core_env"></a>
2.2.1 Core Library - ea_env</h3>
<p><a class="el" href="../../dd/df6/group__eazyai-env-details.html">ea_env functions</a> initialize the necessary environment to use the CV features. <a class="el" href="../../dd/df6/group__eazyai-env-details.html#ga7199b3b2090a7bec0ed9186f0dbede98">ea_env_open()</a> should be called before the other APIs in EazyAI are called. <a class="el" href="../../dd/df6/group__eazyai-env-details.html#ga8018036e672c4e0668d1f7391a44bba8">ea_env_close()</a> should be called after the other APIs in EazyAI are called. </p><div class="fragment"><div class="line"><span class="keywordtype">int</span> features;</div>
<div class="line">features = <a class="code" href="../../d5/d6a/group__eazyai-env-helper.html#gga6bfb42a512c69e1c2d8e316fba06f94aa4612f0c7ea29e1affc9fb7bf5444ba87">EA_ENV_ENABLE_IAV</a></div>
<div class="line">    | <a class="code" href="../../d5/d6a/group__eazyai-env-helper.html#gga6bfb42a512c69e1c2d8e316fba06f94aa19bed7f27d6c177249f7f1dc3b9e6b7e">EA_ENV_ENABLE_CAVALRY</a></div>
<div class="line">    | <a class="code" href="../../d5/d6a/group__eazyai-env-helper.html#gga6bfb42a512c69e1c2d8e316fba06f94aadcaae67ae37eb4dfcce8062bffb3e35f">EA_ENV_ENABLE_VPROC</a></div>
<div class="line">    | <a class="code" href="../../d5/d6a/group__eazyai-env-helper.html#gga6bfb42a512c69e1c2d8e316fba06f94aa3286920e729de702b99293cff9d63581">EA_ENV_ENABLE_NNCTRL</a></div>
<div class="line">    | <a class="code" href="../../d5/d6a/group__eazyai-env-helper.html#gga6bfb42a512c69e1c2d8e316fba06f94aa00ecf31ea9702567f4323bbb06c0d36b">EA_ENV_ENABLE_OSD_STREAM</a>; <span class="comment">// EA_ENV_ENABLE_OSD_STREAM is for displaying on stream.</span></div>
<div class="line">                                <span class="comment">// It can be replaced with EA_ENV_ENABLE_OSD_VOUT.</span></div>
<div class="line">rval = <a class="code" href="../../dd/df6/group__eazyai-env-details.html#ga7199b3b2090a7bec0ed9186f0dbede98">ea_env_open</a>(features);</div>
<div class="line"><span class="comment">// ...</span></div>
<div class="line"><a class="code" href="../../dd/df6/group__eazyai-env-details.html#ga8018036e672c4e0668d1f7391a44bba8">ea_env_close</a>();</div>
</div><!-- fragment --><dl class="section note"><dt>Note</dt><dd><ul>
<li><code>EA_ENV_ENABLE_OSD_JPEG</code> is deleted in <code>ea_env()</code> as it is related with OpenCV in <b>Core</b> library since version 0.5.0, but users can enable it with calling <a class="el" href="../../db/d66/group__eazyai-utils-details.html#ga0a17a3b00407cd9dea9800279c4511e2">ea_utils_env_callbacks_register()</a> in <b>Utils</b> library which will enable OpenCV together.</li>
<li>Only when <a class="el" href="../../db/d66/group__eazyai-utils-details.html#ga0a17a3b00407cd9dea9800279c4511e2">ea_utils_env_callbacks_register()</a> is called, users can use <code>EA_JPEG_FOLDER</code> in Preprocessing modules.</li>
</ul>
</dd></dl>
<h3><a class="anchor" id="eazyai_cvflow_core_tensor"></a>
2.2.2 Core Library - ea_tensor</h3>
<p><a class="el" href="../../da/db2/group__eazyai-tensor-details.html">ea_tensor functions</a> provide interfaces for the tensor, which carries data in the data flow of a CV program. The tensor is a four-dimensional array with a shape in NxCxHxW order. When a tensor holds data shared between the CPU, vector processor (VP - CVflow), and DSP, it is necessary for the CVflow and DSP to know the physical address of the data. When creating a tensor, the memory is not allocated from a heap, but allocated by the interface provided by the Cavalry_Mem library or by the IAV driver.</p><ul>
<li><p class="startli"><a class="el" href="../../d9/d79/group__eazyai-tensor-helper.html#gga5955b4e1fe77a5bcecc29b8a8fc27e0ea7abef3bf8cd777d310cbddde7faf9788">EA_MEM_CAVALRY</a></p>
<p class="startli">This is the type of memory allocated with the Cavalry_Mem library for common use. The tensor created by <a class="el" href="../../da/db2/group__eazyai-tensor-details.html#gabf2b83ac2d5ccc5275b21cec58aad817">ea_tensor_new()</a> or <a class="el" href="../../da/db2/group__eazyai-tensor-details.html#ga4dd5b497857e359afee9c3279d468730">ea_tensor_new_from_file()</a> uses this type of memory.</p>
</li>
<li><p class="startli"><a class="el" href="../../d9/d79/group__eazyai-tensor-helper.html#gga5955b4e1fe77a5bcecc29b8a8fc27e0eaff8582fd970539e8b1ab96e836c1cfc3">EA_MEM_IAV_ANON</a></p>
<p class="startli">This is the type of memory allocated with the IAV driver in the IAV anonymous partition for special use with the IAV image scaler function. The tensor created by <a class="el" href="../../da/db2/group__eazyai-tensor-details.html#gae0d0718e5c2a88ea85072c1de627266e">ea_tensor_new_from_iav_anon_mem()</a> uses this type of memory. The created tensor will be used as the parameter of <a class="el" href="../../d1/d67/group__eazyai-preprocess-details.html#ga82e38bf6b45b39114c964a3f13a7f150">ea_crop_resize()</a> when <em>device</em> = <a class="el" href="../../d9/d79/group__eazyai-tensor-helper.html#gga2e3f04280863e7c873d05a7eb73a8a55ab4cde2d3c5c333c54951307e338434cf">EA_DSP</a>.</p>
</li>
<li><p class="startli"><a class="el" href="../../d9/d79/group__eazyai-tensor-helper.html#gga5955b4e1fe77a5bcecc29b8a8fc27e0eaba8edb59d72dee3f671da4d09a27e534">EA_MEM_IAV_DSP</a></p>
<p class="startli">This is the type of memory allocated with the IAV driver in the IAV DSP partition. The interface to create a tensor with this type of memory is not opened, but the tensor output by <a class="el" href="../../d9/d59/group__eazyai-img-resource-details.html#ga0f1539e9f7582c2b165dd066e17a4084">ea_img_resource_hold_data()</a> uses this type of memory when <em>ea_img_resource_t</em> is of type <a class="el" href="../../df/d83/group__eazyai-img-resource-helper.html#gga869eb0ce6a6d02cdc89a81980b1b5538aab94b9ef7be96257f86f10f43612e6d5">EA_CANVAS</a> or <a class="el" href="../../df/d83/group__eazyai-img-resource-helper.html#gga869eb0ce6a6d02cdc89a81980b1b5538a2d73361d2497fca1edff280fadfaf2bc">EA_PYRAMID</a>.</p>
</li>
<li><a class="el" href="../../d9/d79/group__eazyai-tensor-helper.html#gga5955b4e1fe77a5bcecc29b8a8fc27e0eaf78efc1138d367b76600806ff62f1145">EA_MEM_HEAP</a> This is the type of memory allocated with malloc for common use. The tensor created by <a class="el" href="../../da/db2/group__eazyai-tensor-details.html#gabf2b83ac2d5ccc5275b21cec58aad817">ea_tensor_new()</a> or <a class="el" href="../../da/db2/group__eazyai-tensor-details.html#ga4dd5b497857e359afee9c3279d468730">ea_tensor_new_from_file()</a> uses this type of memory.</li>
</ul>
<h3><a class="anchor" id="eazyai_cvflow_core_img_resource"></a>
2.2.3 Core Library - ea_img_resource</h3>
<p><a class="el" href="../../d9/d59/group__eazyai-img-resource-details.html">ea_img_resource functions</a> load image data in a format of <a class="el" href="../../d9/d79/group__eazyai-tensor-helper.html#ga3ba09b564d11c6625e68723113aae4b4">ea_tensor_color_mode_e</a> from cameras (<a class="el" href="../../df/d83/group__eazyai-img-resource-helper.html#gga869eb0ce6a6d02cdc89a81980b1b5538aab94b9ef7be96257f86f10f43612e6d5">EA_CANVAS</a> and <a class="el" href="../../df/d83/group__eazyai-img-resource-helper.html#gga869eb0ce6a6d02cdc89a81980b1b5538a2d73361d2497fca1edff280fadfaf2bc">EA_PYRAMID</a>), RAW binary files (<a class="el" href="../../df/d83/group__eazyai-img-resource-helper.html#gga869eb0ce6a6d02cdc89a81980b1b5538ad7c9ace25a3926fbae64690aa09240fa">EA_RAW_FILE</a> or <a class="el" href="../../df/d83/group__eazyai-img-resource-helper.html#gga869eb0ce6a6d02cdc89a81980b1b5538ad93386b1d035f6512933bd551833462f">EA_RAW_FILE_FOLDER</a>), or JPEG files (<a class="el" href="../../df/d83/group__eazyai-img-resource-helper.html#gga869eb0ce6a6d02cdc89a81980b1b5538a88382b9bca694ea58b0e342c6d938d77">EA_JPEG_FOLDER</a>). A new group of image data is loaded by every call of <a class="el" href="../../d9/d59/group__eazyai-img-resource-details.html#ga0f1539e9f7582c2b165dd066e17a4084">ea_img_resource_hold_data()</a>. <a class="el" href="../../d9/d59/group__eazyai-img-resource-details.html#ga02145c11afbfbf79731cb96d80a9395a">ea_img_resource_drop_data()</a> should be called the same number of times as <a class="el" href="../../d9/d59/group__eazyai-img-resource-details.html#ga0f1539e9f7582c2b165dd066e17a4084">ea_img_resource_hold_data()</a> to release the internal buffers. Usually, the image data from the camera (IAV driver) has the format of <a class="el" href="../../d9/d79/group__eazyai-tensor-helper.html#gga3ba09b564d11c6625e68723113aae4b4a2c504ada3e5bd7e9b1d2dbee64b5b40a">EA_TENSOR_COLOR_MODE_YUV_NV12</a>; the image data from a JPEG file has the format of <a class="el" href="../../d9/d79/group__eazyai-tensor-helper.html#gga3ba09b564d11c6625e68723113aae4b4ac059f5fa5e339debad4cfec9d9c69903">EA_TENSOR_COLOR_MODE_BGR</a>. If the YUV NV12 data is from the camera (IAV driver), the Y data and the UV data are stored discontiguously in the memory. Two tensors will be used to hold the image data. The Y data is stored in a tensor returned by <a class="el" href="../../d9/d59/group__eazyai-img-resource-details.html#ga0f1539e9f7582c2b165dd066e17a4084">ea_img_resource_hold_data()</a> and the UV data is stored in the tensor returned by <a class="el" href="../../da/db2/group__eazyai-tensor-details.html#gae4f62963248358bf70d26795c213ebb9" title="specially used for a tensor holding Y data, to which the related UV data has discontinuous address">ea_tensor_related()</a>.</p><ol type="1">
<li><p class="startli"><a class="el" href="../../df/d83/group__eazyai-img-resource-helper.html#gga869eb0ce6a6d02cdc89a81980b1b5538aab94b9ef7be96257f86f10f43612e6d5">EA_CANVAS</a></p>
<p class="startli">This type of image resource is created by a canvas ID. It outputs image data generated by the IAV driver in the canvas buffer. A frame of YUV data in the canvas buffer is updated once at a time by <a class="el" href="../../d9/d59/group__eazyai-img-resource-details.html#ga0f1539e9f7582c2b165dd066e17a4084">ea_img_resource_hold_data()</a>. The image data is stored in <a class="el" href="../../dc/d6d/structea__img__resource__data__s.html#adcfa3601ed268958d7fd15956da050b0">ea_img_resource_data_s::tensor_group</a>. There may be more than one YUV buffer in each frame, so the array of the tensor pointer is used and the number is returned by <a class="el" href="../../dc/d6d/structea__img__resource__data__s.html#a255a8efe56ddf2a314ead9cd8b875536">ea_img_resource_data_s::tensor_num</a>. <a class="el" href="../../dc/d6d/structea__img__resource__data__s.html#adcfa3601ed268958d7fd15956da050b0">ea_img_resource_data_s::tensor_group</a>[0] represents the YUV image in the canvas buffer. <a class="el" href="../../dc/d6d/structea__img__resource__data__s.html#adcfa3601ed268958d7fd15956da050b0">ea_img_resource_data_s::tensor_group</a>[1] represents the image data in the ME0 buffer. If the canvas is configured as prev type, it may be NULL. <a class="el" href="../../dc/d6d/structea__img__resource__data__s.html#adcfa3601ed268958d7fd15956da050b0">ea_img_resource_data_s::tensor_group</a>[2] represents the image data in the ME1 buffer. If the canvas is configured as prev type, it may be NULL. </p><div class="fragment"><div class="line"><a class="code" href="../../df/d83/group__eazyai-img-resource-helper.html#ga7a78f8fb1a7b1f5c417f07ffc4bc77b0">ea_img_resource_t</a> *img_resource;</div>
<div class="line"><span class="keywordtype">int</span> canvas_id = 0;</div>
<div class="line"><span class="comment">// ...</span></div>
<div class="line">img_resource = <a class="code" href="../../d9/d59/group__eazyai-img-resource-details.html#ga5d110e8094f21624809e17a6044970dc">ea_img_resource_new</a>(<a class="code" href="../../df/d83/group__eazyai-img-resource-helper.html#gga869eb0ce6a6d02cdc89a81980b1b5538aab94b9ef7be96257f86f10f43612e6d5">EA_CANVAS</a>, (<span class="keywordtype">void</span> *)(<span class="keywordtype">unsigned</span> <span class="keywordtype">long</span>)canvas_id);</div>
<div class="line"><span class="comment">// ...</span></div>
<div class="line"><a class="code" href="../../d9/d59/group__eazyai-img-resource-details.html#ga986d6685a477134cab7f0df4d4f47b20">ea_img_resource_free</a>(img_resource);</div>
</div><!-- fragment --> <div class="fragment"><div class="line">ea_img_resource_data_t data;</div>
<div class="line"><span class="comment">// ...</span></div>
<div class="line"><a class="code" href="../../d9/d59/group__eazyai-img-resource-details.html#ga0f1539e9f7582c2b165dd066e17a4084">ea_img_resource_hold_data</a>(img_resource, &amp;data);</div>
<div class="line"><span class="comment">// ...</span></div>
<div class="line"><a class="code" href="../../d9/d59/group__eazyai-img-resource-details.html#ga02145c11afbfbf79731cb96d80a9395a">ea_img_resource_drop_data</a>(img_resource, &amp;data);</div>
</div><!-- fragment --></li>
<li><p class="startli"><a class="el" href="../../df/d83/group__eazyai-img-resource-helper.html#gga869eb0ce6a6d02cdc89a81980b1b5538a2d73361d2497fca1edff280fadfaf2bc">EA_PYRAMID</a></p>
<p class="startli">This type of image resource is created by a channel ID. It outputs image data generated by the IAV driver into the pyramid buffer. The frames of YUV data in the channel pyramid buffer are updated once a time by <a class="el" href="../../d9/d59/group__eazyai-img-resource-details.html#ga0f1539e9f7582c2b165dd066e17a4084">ea_img_resource_hold_data()</a>. The image data is stored in <a class="el" href="../../dc/d6d/structea__img__resource__data__s.html#adcfa3601ed268958d7fd15956da050b0">ea_img_resource_data_s::tensor_group</a>. There are six layers in pyramid buffer, and each layer has a YUV buffer, meaning that there are six YUV buffers in each frame of the image data. The array of the tensor pointer is used and the fixed number 6 is returned by <a class="el" href="../../dc/d6d/structea__img__resource__data__s.html#a255a8efe56ddf2a314ead9cd8b875536">ea_img_resource_data_s::tensor_num</a>. <a class="el" href="../../dc/d6d/structea__img__resource__data__s.html#adcfa3601ed268958d7fd15956da050b0">ea_img_resource_data_s::tensor_group</a>[N] represents the YUV image on the Nth layer. It will be NULL if the layer is disabled. </p><div class="fragment"><div class="line"><a class="code" href="../../df/d83/group__eazyai-img-resource-helper.html#ga7a78f8fb1a7b1f5c417f07ffc4bc77b0">ea_img_resource_t</a> *img_resource;</div>
<div class="line"><span class="keywordtype">int</span> channel_id = 0;</div>
<div class="line"><span class="comment">// ...</span></div>
<div class="line">img_resource = <a class="code" href="../../d9/d59/group__eazyai-img-resource-details.html#ga5d110e8094f21624809e17a6044970dc">ea_img_resource_new</a>(<a class="code" href="../../df/d83/group__eazyai-img-resource-helper.html#gga869eb0ce6a6d02cdc89a81980b1b5538a2d73361d2497fca1edff280fadfaf2bc">EA_PYRAMID</a>, (<span class="keywordtype">void</span> *)(<span class="keywordtype">unsigned</span> <span class="keywordtype">long</span>)channel_id);</div>
<div class="line"><span class="comment">// ...</span></div>
<div class="line"><a class="code" href="../../d9/d59/group__eazyai-img-resource-details.html#ga986d6685a477134cab7f0df4d4f47b20">ea_img_resource_free</a>(img_resource);</div>
</div><!-- fragment --> <div class="fragment"><div class="line">ea_img_resource_data_t data;</div>
<div class="line"><span class="comment">// ...</span></div>
<div class="line"><a class="code" href="../../d9/d59/group__eazyai-img-resource-details.html#ga0f1539e9f7582c2b165dd066e17a4084">ea_img_resource_hold_data</a>(img_resource, &amp;data);</div>
<div class="line"><span class="comment">// ...</span></div>
<div class="line"><a class="code" href="../../d9/d59/group__eazyai-img-resource-details.html#ga02145c11afbfbf79731cb96d80a9395a">ea_img_resource_drop_data</a>(img_resource, &amp;data);</div>
</div><!-- fragment --></li>
<li><p class="startli"><a class="el" href="../../df/d83/group__eazyai-img-resource-helper.html#gga869eb0ce6a6d02cdc89a81980b1b5538ad7c9ace25a3926fbae64690aa09240fa">EA_RAW_FILE</a></p>
<p class="startli">This type of image resource is created by a file path for reading one RAW binary file with a name in the format [N]x[C]x[H]x[W]_*.bin; for example, <code>1x3x480x640_dog.bin</code>. </p><div class="fragment"><div class="line"><a class="code" href="../../df/d83/group__eazyai-img-resource-helper.html#ga7a78f8fb1a7b1f5c417f07ffc4bc77b0">ea_img_resource_t</a> *img_resource;</div>
<div class="line"><span class="keywordtype">char</span> *file_path = <span class="stringliteral">&quot;/sdcard/mtcnn/in/1x3x480x640_face01.bin&quot;</span>;</div>
<div class="line">img_resource = <a class="code" href="../../d9/d59/group__eazyai-img-resource-details.html#ga5d110e8094f21624809e17a6044970dc">ea_img_resource_new</a>(<a class="code" href="../../df/d83/group__eazyai-img-resource-helper.html#gga869eb0ce6a6d02cdc89a81980b1b5538ad7c9ace25a3926fbae64690aa09240fa">EA_RAW_FILE</a>, file_path);</div>
<div class="line"><span class="comment">// ...</span></div>
<div class="line"><a class="code" href="../../d9/d59/group__eazyai-img-resource-details.html#ga986d6685a477134cab7f0df4d4f47b20">ea_img_resource_free</a>(img_resource);</div>
</div><!-- fragment --> <div class="fragment"><div class="line">ea_img_resource_data_t data;</div>
<div class="line"><span class="comment">// ...</span></div>
<div class="line"><a class="code" href="../../d9/d59/group__eazyai-img-resource-details.html#ga0f1539e9f7582c2b165dd066e17a4084">ea_img_resource_hold_data</a>(img_resource, &amp;data);</div>
<div class="line"><span class="comment">// ...</span></div>
<div class="line"><a class="code" href="../../d9/d59/group__eazyai-img-resource-details.html#ga02145c11afbfbf79731cb96d80a9395a">ea_img_resource_drop_data</a>(img_resource, &amp;data);</div>
</div><!-- fragment --></li>
<li><p class="startli"><a class="el" href="../../df/d83/group__eazyai-img-resource-helper.html#gga869eb0ce6a6d02cdc89a81980b1b5538ad93386b1d035f6512933bd551833462f">EA_RAW_FILE_FOLDER</a></p>
<p class="startli">This type of image resource is created by a folder path for reading each RAW binary file under the folder with a name in the format [N]x[C]x[H]x[W]_*.bin; for example, <code>1x3x480x640_dog.bin</code>. The data in every file will be returned by each call of <a class="el" href="../../d9/d59/group__eazyai-img-resource-details.html#ga0f1539e9f7582c2b165dd066e17a4084">ea_img_resource_hold_data()</a>. The reading order is decided by the Linux API <em>readdir()</em>. </p><div class="fragment"><div class="line"><a class="code" href="../../df/d83/group__eazyai-img-resource-helper.html#ga7a78f8fb1a7b1f5c417f07ffc4bc77b0">ea_img_resource_t</a> *img_resource;</div>
<div class="line"><span class="keywordtype">char</span> *folder_path = <span class="stringliteral">&quot;/sdcard/mtcnn/in/&quot;</span>;</div>
<div class="line">img_resource = <a class="code" href="../../d9/d59/group__eazyai-img-resource-details.html#ga5d110e8094f21624809e17a6044970dc">ea_img_resource_new</a>(<a class="code" href="../../df/d83/group__eazyai-img-resource-helper.html#gga869eb0ce6a6d02cdc89a81980b1b5538ad93386b1d035f6512933bd551833462f">EA_RAW_FILE_FOLDER</a>, folder_path);</div>
<div class="line"><span class="comment">// ...</span></div>
<div class="line"><a class="code" href="../../d9/d59/group__eazyai-img-resource-details.html#ga986d6685a477134cab7f0df4d4f47b20">ea_img_resource_free</a>(img_resource);</div>
</div><!-- fragment --> <div class="fragment"><div class="line">ea_img_resource_data_t data;</div>
<div class="line"><span class="comment">// ...</span></div>
<div class="line"><a class="code" href="../../d9/d59/group__eazyai-img-resource-details.html#ga0f1539e9f7582c2b165dd066e17a4084">ea_img_resource_hold_data</a>(img_resource, &amp;data);</div>
<div class="line"><span class="comment">// ...</span></div>
<div class="line"><a class="code" href="../../d9/d59/group__eazyai-img-resource-details.html#ga02145c11afbfbf79731cb96d80a9395a">ea_img_resource_drop_data</a>(img_resource, &amp;data);</div>
</div><!-- fragment --></li>
<li><p class="startli"><a class="el" href="../../df/d83/group__eazyai-img-resource-helper.html#gga869eb0ce6a6d02cdc89a81980b1b5538a88382b9bca694ea58b0e342c6d938d77">EA_JPEG_FOLDER</a></p>
<p class="startli">This type of image resource is created by a folder path for reading each *.jpg file under the folder. The data in every file will be returned by each call of <a class="el" href="../../d9/d59/group__eazyai-img-resource-details.html#ga0f1539e9f7582c2b165dd066e17a4084">ea_img_resource_hold_data()</a>. The reading order is decided by the Linux API <em>readdir()</em>. </p><div class="fragment"><div class="line"><a class="code" href="../../df/d83/group__eazyai-img-resource-helper.html#ga7a78f8fb1a7b1f5c417f07ffc4bc77b0">ea_img_resource_t</a> *img_resource;</div>
<div class="line"><span class="keywordtype">char</span> *folder_path = <span class="stringliteral">&quot;/sdcard/mtcnn/in/&quot;</span>;</div>
<div class="line">img_resource = <a class="code" href="../../d9/d59/group__eazyai-img-resource-details.html#ga5d110e8094f21624809e17a6044970dc">ea_img_resource_new</a>(<a class="code" href="../../df/d83/group__eazyai-img-resource-helper.html#gga869eb0ce6a6d02cdc89a81980b1b5538a88382b9bca694ea58b0e342c6d938d77">EA_JPEG_FOLDER</a>, folder_path);</div>
<div class="line"><span class="comment">// ...</span></div>
<div class="line"><a class="code" href="../../d9/d59/group__eazyai-img-resource-details.html#ga986d6685a477134cab7f0df4d4f47b20">ea_img_resource_free</a>(img_resource);</div>
</div><!-- fragment --> <div class="fragment"><div class="line">ea_img_resource_data_t data;</div>
<div class="line"><span class="comment">// ...</span></div>
<div class="line"><a class="code" href="../../d9/d59/group__eazyai-img-resource-details.html#ga0f1539e9f7582c2b165dd066e17a4084">ea_img_resource_hold_data</a>(img_resource, &amp;data);</div>
<div class="line"><span class="comment">// ...</span></div>
<div class="line"><a class="code" href="../../d9/d59/group__eazyai-img-resource-details.html#ga02145c11afbfbf79731cb96d80a9395a">ea_img_resource_drop_data</a>(img_resource, &amp;data);</div>
</div><!-- fragment --></li>
</ol>
<h3><a class="anchor" id="eazyai_cvflow_core_preprocess"></a>
2.2.4 Core Library - ea_preprocess</h3>
<p><a class="el" href="../../d1/d67/group__eazyai-preprocess-details.html">ea_preprocess functions</a> provide functions to perform image color conversion, resize, and crop. The process can be performed by VP - CVflow, DSP, or CPU devices. There are limitations on each kind of device. Refer to <a class="el" href="../../d1/d67/group__eazyai-preprocess-details.html">ea_preprocess functions</a> for the limitations.</p><ol type="1">
<li><p class="startli">Color convert</p>
<p class="startli">Resize will be performed if the source size and the destination size are different.</p><ul>
<li>YUV NV12 to RGB or BGR <div class="fragment"><div class="line">ea_img_resource_data_t data;</div>
<div class="line"><span class="keywordtype">size_t</span> shape[] = {1, 3, 300, 300};</div>
<div class="line"><a class="code" href="../../d9/d79/group__eazyai-tensor-helper.html#ga2df9d3f13428a2486155ee1f330c1ed4">ea_tensor_t</a> *rgb_tensor = <a class="code" href="../../da/db2/group__eazyai-tensor-details.html#gabf2b83ac2d5ccc5275b21cec58aad817">ea_tensor_new</a>(<a class="code" href="../../d9/d79/group__eazyai-tensor-helper.html#ggae7f2cca4c1c06ac3685dbd6d93d8aaf2a134d76e333656b2d3a02e43b198df06a">EA_U8</a>, shape, 0);</div>
<div class="line"><a class="code" href="../../d9/d79/group__eazyai-tensor-helper.html#ga2df9d3f13428a2486155ee1f330c1ed4">ea_tensor_t</a> *bgr_tensor = <a class="code" href="../../da/db2/group__eazyai-tensor-details.html#gabf2b83ac2d5ccc5275b21cec58aad817">ea_tensor_new</a>(<a class="code" href="../../d9/d79/group__eazyai-tensor-helper.html#ggae7f2cca4c1c06ac3685dbd6d93d8aaf2a134d76e333656b2d3a02e43b198df06a">EA_U8</a>, shape, 0);</div>
<div class="line"><span class="comment">// ...</span></div>
<div class="line"><a class="code" href="../../d1/d67/group__eazyai-preprocess-details.html#ga565556c72e67622ff43979ef7eb4d01f">ea_cvt_color_resize</a>(data.tensor_group[0], rbg_tensor, <a class="code" href="../../d2/da6/group__eazyai-preprocess-helper.html#ggacf838ff025e07d2405d18f4d80494eb7a6e505ff310dfdc04463b8c03a9ee1429">EA_COLOR_YUV2RGB_NV12</a>, <a class="code" href="../../d9/d79/group__eazyai-tensor-helper.html#gga2e3f04280863e7c873d05a7eb73a8a55a54ee6b194dc5690fac2c2bdb3f3f5562">EA_VP</a>);</div>
<div class="line"><a class="code" href="../../d1/d67/group__eazyai-preprocess-details.html#ga565556c72e67622ff43979ef7eb4d01f">ea_cvt_color_resize</a>(data.tensor_group[0], bgr_tensor, <a class="code" href="../../d2/da6/group__eazyai-preprocess-helper.html#ggacf838ff025e07d2405d18f4d80494eb7a9587d53a90140ea1bba203e4b76c1f61">EA_COLOR_YUV2BGR_NV12</a>, <a class="code" href="../../d9/d79/group__eazyai-tensor-helper.html#gga2e3f04280863e7c873d05a7eb73a8a55a54ee6b194dc5690fac2c2bdb3f3f5562">EA_VP</a>);</div>
<div class="line"><span class="comment">// ...</span></div>
<div class="line"><a class="code" href="../../da/db2/group__eazyai-tensor-details.html#gaf483e043827cebdda5bbfab8264a58a8">ea_tensor_free</a>(rgb_tensor);</div>
<div class="line"><a class="code" href="../../da/db2/group__eazyai-tensor-details.html#gaf483e043827cebdda5bbfab8264a58a8">ea_tensor_free</a>(bgr_tensor);</div>
</div><!-- fragment --></li>
<li>RBG to BGR or BGR to RGB <div class="fragment"><div class="line"><a class="code" href="../../d1/d67/group__eazyai-preprocess-details.html#ga565556c72e67622ff43979ef7eb4d01f">ea_cvt_color_resize</a>(rbg_tensor, bgr_tensor, <a class="code" href="../../d2/da6/group__eazyai-preprocess-helper.html#ggacf838ff025e07d2405d18f4d80494eb7a69f74586433b54a930607a3ffef92dde">EA_COLOR_RGB2BGR</a>, <a class="code" href="../../d9/d79/group__eazyai-tensor-helper.html#gga2e3f04280863e7c873d05a7eb73a8a55a54ee6b194dc5690fac2c2bdb3f3f5562">EA_VP</a>);</div>
<div class="line"><a class="code" href="../../d1/d67/group__eazyai-preprocess-details.html#ga565556c72e67622ff43979ef7eb4d01f">ea_cvt_color_resize</a>(bgr_tensor, rbg_tensor, <a class="code" href="../../d2/da6/group__eazyai-preprocess-helper.html#ggacf838ff025e07d2405d18f4d80494eb7adec3c4aa38f4ff47ebd830a9f29b1d7c">EA_COLOR_BGR2RGB</a>, <a class="code" href="../../d9/d79/group__eazyai-tensor-helper.html#gga2e3f04280863e7c873d05a7eb73a8a55a54ee6b194dc5690fac2c2bdb3f3f5562">EA_VP</a>);</div>
</div><!-- fragment --></li>
<li><p class="startli">Transpose to / from OpenCV Mat format</p>
<p class="startli">A color image in an OpenCV Mat is stored in HxWx3 format. If padding is used, the format will be Hx(W*3+padding). </p><div class="fragment"><div class="line"><span class="keywordtype">size_t</span> shape[] = {1, 1, 300, 300 * 3};</div>
<div class="line"><a class="code" href="../../d9/d79/group__eazyai-tensor-helper.html#ga2df9d3f13428a2486155ee1f330c1ed4">ea_tensor_t</a> *mat_tensor = <a class="code" href="../../da/db2/group__eazyai-tensor-details.html#gabf2b83ac2d5ccc5275b21cec58aad817">ea_tensor_new</a>(<a class="code" href="../../d9/d79/group__eazyai-tensor-helper.html#ggae7f2cca4c1c06ac3685dbd6d93d8aaf2a134d76e333656b2d3a02e43b198df06a">EA_U8</a>, shape, 0);</div>
<div class="line"><span class="comment">// ...</span></div>
<div class="line"><a class="code" href="../../d1/d67/group__eazyai-preprocess-details.html#ga565556c72e67622ff43979ef7eb4d01f">ea_cvt_color_resize</a>(bgr_tensor, mat_tensor, <a class="code" href="../../d2/da6/group__eazyai-preprocess-helper.html#ggacf838ff025e07d2405d18f4d80494eb7afd14c83fb6c6fb65d1a231b8b1f6be79">EA_COLOR_TRANSPOSE</a>, <a class="code" href="../../d9/d79/group__eazyai-tensor-helper.html#gga2e3f04280863e7c873d05a7eb73a8a55a54ee6b194dc5690fac2c2bdb3f3f5562">EA_VP</a>);</div>
<div class="line"><a class="code" href="../../da/db2/group__eazyai-tensor-details.html#ga499b40d042214b20aadbaec126916cb6">ea_tensor_sync_cache</a>(mat_tensor, <a class="code" href="../../d9/d79/group__eazyai-tensor-helper.html#gga2e3f04280863e7c873d05a7eb73a8a55a54ee6b194dc5690fac2c2bdb3f3f5562">EA_VP</a>, <a class="code" href="../../d9/d79/group__eazyai-tensor-helper.html#gga2e3f04280863e7c873d05a7eb73a8a55a977de0245606a753c5511cff19c6287e">EA_CPU</a>);</div>
<div class="line">cv::Mat bgr(300, 300, CV_8UC3, <a class="code" href="../../da/db2/group__eazyai-tensor-details.html#gabb70502d92d6eddb96124b51c695c26f">ea_tensor_data</a>(mat_tensor, <a class="code" href="../../d9/d79/group__eazyai-tensor-helper.html#gga2e3f04280863e7c873d05a7eb73a8a55a977de0245606a753c5511cff19c6287e">EA_CPU</a>), <a class="code" href="../../da/db2/group__eazyai-tensor-details.html#ga11c5b3f9ee51ccbd9190bc9d6ac5a883">ea_tensor_pitch</a>(mat_tensor));</div>
<div class="line"><span class="comment">// ...</span></div>
<div class="line"><a class="code" href="../../da/db2/group__eazyai-tensor-details.html#gaf483e043827cebdda5bbfab8264a58a8">ea_tensor_free</a>(bgr_tensor);</div>
</div><!-- fragment --> <div class="fragment"><div class="line"><span class="keywordtype">size_t</span> shape_1[] = {1, 1, 300, 300 * 3};</div>
<div class="line"><a class="code" href="../../d9/d79/group__eazyai-tensor-helper.html#ga2df9d3f13428a2486155ee1f330c1ed4">ea_tensor_t</a> *mat_tensor = <a class="code" href="../../da/db2/group__eazyai-tensor-details.html#gabf2b83ac2d5ccc5275b21cec58aad817">ea_tensor_new</a>(<a class="code" href="../../d9/d79/group__eazyai-tensor-helper.html#ggae7f2cca4c1c06ac3685dbd6d93d8aaf2a134d76e333656b2d3a02e43b198df06a">EA_U8</a>, shape, 0);</div>
<div class="line">cv::Mat bgr(300, 300, CV_8UC3, <a class="code" href="../../da/db2/group__eazyai-tensor-details.html#gabb70502d92d6eddb96124b51c695c26f">ea_tensor_data</a>(mat_tensor), <a class="code" href="../../da/db2/group__eazyai-tensor-details.html#ga11c5b3f9ee51ccbd9190bc9d6ac5a883">ea_tensor_pitch</a>(mat_tensor));</div>
<div class="line"><span class="comment">// ...</span></div>
<div class="line"><span class="keywordtype">size_t</span> shape_2[] = {1, 3, 300, 300};</div>
<div class="line"><a class="code" href="../../d9/d79/group__eazyai-tensor-helper.html#ga2df9d3f13428a2486155ee1f330c1ed4">ea_tensor_t</a> *bgr_tensor = <a class="code" href="../../da/db2/group__eazyai-tensor-details.html#gabf2b83ac2d5ccc5275b21cec58aad817">ea_tensor_new</a>(<a class="code" href="../../d9/d79/group__eazyai-tensor-helper.html#ggae7f2cca4c1c06ac3685dbd6d93d8aaf2a134d76e333656b2d3a02e43b198df06a">EA_U8</a>, shape, 0);</div>
<div class="line"><span class="comment">// ...</span></div>
<div class="line"><a class="code" href="../../da/db2/group__eazyai-tensor-details.html#ga499b40d042214b20aadbaec126916cb6">ea_tensor_sync_cache</a>(mat_tensor, <a class="code" href="../../d9/d79/group__eazyai-tensor-helper.html#gga2e3f04280863e7c873d05a7eb73a8a55a977de0245606a753c5511cff19c6287e">EA_CPU</a>, <a class="code" href="../../d9/d79/group__eazyai-tensor-helper.html#gga2e3f04280863e7c873d05a7eb73a8a55a54ee6b194dc5690fac2c2bdb3f3f5562">EA_VP</a>);</div>
<div class="line"><a class="code" href="../../d1/d67/group__eazyai-preprocess-details.html#ga565556c72e67622ff43979ef7eb4d01f">ea_cvt_color_resize</a>(mat_tensor, bgr_tensor, <a class="code" href="../../d2/da6/group__eazyai-preprocess-helper.html#ggacf838ff025e07d2405d18f4d80494eb7afd14c83fb6c6fb65d1a231b8b1f6be79">EA_COLOR_TRANSPOSE</a>, <a class="code" href="../../d9/d79/group__eazyai-tensor-helper.html#gga2e3f04280863e7c873d05a7eb73a8a55a54ee6b194dc5690fac2c2bdb3f3f5562">EA_VP</a>);</div>
<div class="line"><span class="comment">// ...</span></div>
<div class="line"><a class="code" href="../../da/db2/group__eazyai-tensor-details.html#gaf483e043827cebdda5bbfab8264a58a8">ea_tensor_free</a>(mat_tensor);</div>
<div class="line"><a class="code" href="../../da/db2/group__eazyai-tensor-details.html#gaf483e043827cebdda5bbfab8264a58a8">ea_tensor_free</a>(bgr_tensor);</div>
</div><!-- fragment --></li>
</ul>
</li>
<li><p class="startli">Crop</p>
<p class="startli">Resize will be performed if the source size and the destination size are different.</p><ul>
<li><p class="startli">Crop YUV NV12 from the IAV driver</p>
<p class="startli">When <em>device</em> = <a class="el" href="../../d9/d79/group__eazyai-tensor-helper.html#gga2e3f04280863e7c873d05a7eb73a8a55ab4cde2d3c5c333c54951307e338434cf">EA_DSP</a> is used, only cropping YUV data from the IAV driver is supported. The destination tensor is created by <a class="el" href="../../da/db2/group__eazyai-tensor-details.html#gae0d0718e5c2a88ea85072c1de627266e">ea_tensor_new_from_iav_anon_mem()</a>. Otherwise, <a class="el" href="../../d9/d79/group__eazyai-tensor-helper.html#gga2e3f04280863e7c873d05a7eb73a8a55a54ee6b194dc5690fac2c2bdb3f3f5562">EA_VP</a> can be used. </p><div class="fragment"><div class="line"><span class="keywordtype">size_t</span> shape[] = {1, 1, 224, 224};</div>
<div class="line"><a class="code" href="../../d9/d79/group__eazyai-tensor-helper.html#ga2df9d3f13428a2486155ee1f330c1ed4">ea_tensor_t</a> *scale_tensor = <a class="code" href="../../da/db2/group__eazyai-tensor-details.html#gae0d0718e5c2a88ea85072c1de627266e">ea_tensor_new_from_iav_anon_mem</a>(shape);</div>
<div class="line"><a class="code" href="../../d1/d67/group__eazyai-preprocess-details.html#ga82e38bf6b45b39114c964a3f13a7f150">ea_crop_resize</a>(&amp;data.tensor_group[0], 1, &amp;scale_tensor, 1, NULL, <a class="code" href="../../d9/d79/group__eazyai-tensor-helper.html#gga3ba09b564d11c6625e68723113aae4b4a2c504ada3e5bd7e9b1d2dbee64b5b40a">EA_TENSOR_COLOR_MODE_YUV_NV12</a>, <a class="code" href="../../d9/d79/group__eazyai-tensor-helper.html#gga2e3f04280863e7c873d05a7eb73a8a55ab4cde2d3c5c333c54951307e338434cf">EA_DSP</a>);</div>
</div><!-- fragment --></li>
<li><p class="startli">Batch crop</p>
<p class="startli">The batch is decided by <em>dst</em> and <em>dst_num</em> in <a class="el" href="../../d1/d67/group__eazyai-preprocess-details.html#ga82e38bf6b45b39114c964a3f13a7f150">ea_crop_resize()</a>, which is the accumulation of N in the shape of each <em>dst</em> tensor. </p><div class="fragment"><div class="line"><a class="code" href="../../d9/d79/group__eazyai-tensor-helper.html#ga2df9d3f13428a2486155ee1f330c1ed4">ea_tensor_t</a> *src_tensor;</div>
<div class="line"><span class="keywordtype">int</span> batch_num;</div>
<div class="line"><span class="comment">// ...</span></div>
<div class="line">ea_roi_t *roi_group;</div>
<div class="line">roi_group = (ea_roi_t *)malloc(<span class="keyword">sizeof</span>(ea_roi_t) * batch_num);</div>
<div class="line">memset(roi_group, 0, <span class="keyword">sizeof</span>(ea_roi_t) * batch_num);</div>
<div class="line"> </div>
<div class="line"><span class="keywordflow">for</span> (i = 0; i &lt; batch_num; i++) {</div>
<div class="line">    roi_group[i].x = detections[i].x_start;</div>
<div class="line">    roi_group[i].y = detections[i].y_start;</div>
<div class="line">    roi_group[i].w = detections[i].x_end - detections[i].x_start;</div>
<div class="line">    roi_group[i].h = detections[i].y_end - detections[i].y_start;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">size_t</span> shape[4] = {1, 3, 112, 96};</div>
<div class="line">shape[0] = batch_num;</div>
<div class="line"><a class="code" href="../../d9/d79/group__eazyai-tensor-helper.html#ga2df9d3f13428a2486155ee1f330c1ed4">ea_tensor_t</a> *resize_dst = <a class="code" href="../../da/db2/group__eazyai-tensor-details.html#gabf2b83ac2d5ccc5275b21cec58aad817">ea_tensor_new</a>(<a class="code" href="../../d9/d79/group__eazyai-tensor-helper.html#ggae7f2cca4c1c06ac3685dbd6d93d8aaf2a134d76e333656b2d3a02e43b198df06a">EA_U8</a>, shape, 0);</div>
<div class="line"><a class="code" href="../../d1/d67/group__eazyai-preprocess-details.html#ga82e38bf6b45b39114c964a3f13a7f150">ea_crop_resize</a>(&amp;src_tensor, 1, &amp;resize_dst, 1, roi_group, <a class="code" href="../../d9/d79/group__eazyai-tensor-helper.html#gga2e3f04280863e7c873d05a7eb73a8a55a54ee6b194dc5690fac2c2bdb3f3f5562">EA_VP</a>);</div>
<div class="line"><span class="comment">// ...</span></div>
<div class="line">free(roi_group);</div>
<div class="line"><a class="code" href="../../da/db2/group__eazyai-tensor-details.html#gaf483e043827cebdda5bbfab8264a58a8">ea_tensor_free</a>(resize_dst);</div>
</div><!-- fragment --></li>
</ul>
</li>
</ol>
<h3><a class="anchor" id="eazyai_cvflow_core_net"></a>
2.2.5 Core Library - ea_net</h3>
<p><a class="el" href="../../d9/d87/group__eazyai-net-details.html">ea_net functions</a> provide functions to forward a network on the CVflow. The network model and pretrained weights are packaged in the cavalry binary format. It can be load from a file or from a dynamic random-access memory (DRAM) buffer. The tensors, which hold the network input / output buffers, can be fetched by <a class="el" href="../../d9/d87/group__eazyai-net-details.html#ga89291c3e32b3f08007deb053e6a68b38">ea_net_input()</a>/<a class="el" href="../../d9/d87/group__eazyai-net-details.html#ga8110e8c888c6a6acc0fdbe553b440de7">ea_net_output()</a>. The input tensors can be used to accept the input data, for example, as the <em>dst</em> in <a class="el" href="../../d1/d67/group__eazyai-preprocess-details.html#ga565556c72e67622ff43979ef7eb4d01f">ea_cvt_color_resize()</a>. The output tensors can be used to read the inference result. Before reading the inference result, the CPU cache should be invalidated by <a class="el" href="../../da/db2/group__eazyai-tensor-details.html#ga499b40d042214b20aadbaec126916cb6">ea_tensor_sync_cache()</a>.</p><ol type="1">
<li>Load the model from the file. <div class="fragment"><div class="line"><span class="keywordtype">char</span> *model_path = <span class="stringliteral">&quot;/sdcard/network_cavalry.bin&quot;</span></div>
<div class="line"><a class="code" href="../../de/d43/group__eazyai-net-helper.html#gaf7b37b09e0acd75f30eae4956cacb4b2">ea_net_t</a> *net = <a class="code" href="../../d9/d87/group__eazyai-net-details.html#ga6b5eaf1b3100e7356aa04dca2b736b7c">ea_net_new</a>(NULL);</div>
<div class="line"><a class="code" href="../../d9/d87/group__eazyai-net-details.html#gaea0c0ae54f20344fc21b9ee5fdd59df0">ea_net_config_input</a>(net, <span class="stringliteral">&quot;input&quot;</span>);</div>
<div class="line"><a class="code" href="../../d9/d87/group__eazyai-net-details.html#gaf0631da862b369b7ab6cdbefee343d5b">ea_net_config_output</a>(net, <span class="stringliteral">&quot;output&quot;</span>);</div>
<div class="line"><a class="code" href="../../d9/d87/group__eazyai-net-details.html#ga59a08912bda9753fba38f19d81f8d574">ea_net_load</a>(net, <a class="code" href="../../de/d43/group__eazyai-net-helper.html#gga101ce817045a507d2f99f05e6a410cb1a042d99460389b45492f889b4c4931c06">EA_NET_LOAD_FILE</a>, (<span class="keywordtype">void</span> *)model_path, 1);</div>
<div class="line">input_tensor = <a class="code" href="../../d9/d87/group__eazyai-net-details.html#ga89291c3e32b3f08007deb053e6a68b38">ea_net_input</a>(net, <span class="stringliteral">&quot;input&quot;</span>);</div>
<div class="line">output_tensor = <a class="code" href="../../d9/d87/group__eazyai-net-details.html#ga8110e8c888c6a6acc0fdbe553b440de7">ea_net_output</a>(net, <span class="stringliteral">&quot;output&quot;</span>);</div>
</div><!-- fragment --></li>
<li>Load the model from DRAM. <div class="fragment"><div class="line">uint8_t *model_buffer = (uint8_t *)malloc(MODEL_SIZE);</div>
<div class="line"><span class="comment">// ...</span></div>
<div class="line"><a class="code" href="../../de/d43/group__eazyai-net-helper.html#gaf7b37b09e0acd75f30eae4956cacb4b2">ea_net_t</a> *net = <a class="code" href="../../d9/d87/group__eazyai-net-details.html#ga6b5eaf1b3100e7356aa04dca2b736b7c">ea_net_new</a>(NULL);</div>
<div class="line"><a class="code" href="../../d9/d87/group__eazyai-net-details.html#gaea0c0ae54f20344fc21b9ee5fdd59df0">ea_net_config_input</a>(net, <span class="stringliteral">&quot;input&quot;</span>);</div>
<div class="line"><a class="code" href="../../d9/d87/group__eazyai-net-details.html#gaf0631da862b369b7ab6cdbefee343d5b">ea_net_config_output</a>(net, <span class="stringliteral">&quot;output&quot;</span>);</div>
<div class="line"><a class="code" href="../../d9/d87/group__eazyai-net-details.html#ga59a08912bda9753fba38f19d81f8d574">ea_net_load</a>(net, <a class="code" href="../../de/d43/group__eazyai-net-helper.html#gga101ce817045a507d2f99f05e6a410cb1a3440bcf5671d53b62401a13af5303faf">EA_NET_LOAD_DRAM</a>, (<span class="keywordtype">void</span> *)model_buffer, 1);</div>
<div class="line">input_tensor = <a class="code" href="../../d9/d87/group__eazyai-net-details.html#ga89291c3e32b3f08007deb053e6a68b38">ea_net_input</a>(net, <span class="stringliteral">&quot;input&quot;</span>);</div>
<div class="line">output_tensor = <a class="code" href="../../d9/d87/group__eazyai-net-details.html#ga8110e8c888c6a6acc0fdbe553b440de7">ea_net_output</a>(net, <span class="stringliteral">&quot;output&quot;</span>);</div>
</div><!-- fragment --></li>
<li>Forward. <div class="fragment"><div class="line"><a class="code" href="../../d1/d67/group__eazyai-preprocess-details.html#ga565556c72e67622ff43979ef7eb4d01f">ea_cvt_color_resize</a>(img_tensors[0], input_tensor, <a class="code" href="../../d2/da6/group__eazyai-preprocess-helper.html#ggacf838ff025e07d2405d18f4d80494eb7a6e505ff310dfdc04463b8c03a9ee1429">EA_COLOR_YUV2RGB_NV12</a>, <a class="code" href="../../d9/d79/group__eazyai-tensor-helper.html#gga2e3f04280863e7c873d05a7eb73a8a55a54ee6b194dc5690fac2c2bdb3f3f5562">EA_VP</a>);</div>
<div class="line"><span class="comment">// no need to sync cache, because data is updated by VP and will be read by VP too.</span></div>
<div class="line"><a class="code" href="../../d9/d87/group__eazyai-net-details.html#ga00c836da74a34494e7c859ed60d9875f">ea_net_forward</a>(net, 1);</div>
</div><!-- fragment --></li>
<li>Read the inference result. <div class="fragment"><div class="line"><a class="code" href="../../da/db2/group__eazyai-tensor-details.html#ga499b40d042214b20aadbaec126916cb6">ea_tensor_sync_cache</a>(output_tensor, <a class="code" href="../../d9/d79/group__eazyai-tensor-helper.html#gga2e3f04280863e7c873d05a7eb73a8a55a54ee6b194dc5690fac2c2bdb3f3f5562">EA_VP</a>, <a class="code" href="../../d9/d79/group__eazyai-tensor-helper.html#gga2e3f04280863e7c873d05a7eb73a8a55a977de0245606a753c5511cff19c6287e">EA_CPU</a>);</div>
<div class="line">bbox_addr = (<span class="keywordtype">float</span> *)<a class="code" href="../../da/db2/group__eazyai-tensor-details.html#gabb70502d92d6eddb96124b51c695c26f">ea_tensor_data</a>(output_tensor);</div>
</div><!-- fragment --></li>
</ol>
<h3><a class="anchor" id="eazyai_cvflow_core_osd"></a>
2.2.6 Core Library - ea_osd</h3>
<p><a class="el" href="../../da/dc6/group__eazyai-osd-details.html">ea_osd functions</a> provide functions to configure the OSD (VOUT-Display / Stream-Display) buffer.</p><ol type="1">
<li>Setup OSD<ul>
<li>For VOUT, users can use different frame_buffer_id to decide the device to show this OSD, including HDMI, CVBS, LCD, etc. <div class="fragment"><div class="line"><a class="code" href="../../d4/d73/group__eazyai-osd-helper.html#gae32098a9e8e9f7cb550a746e21271363">ea_osd_t</a> *osd = <a class="code" href="../../da/dc6/group__eazyai-osd-details.html#ga82a84f838f5512cfcc0bc915f1d7ad26">ea_osd_new</a>(<a class="code" href="../../d4/d73/group__eazyai-osd-helper.html#ggadf0ed00a8800a0cf01c6cae4fdeb3214a8eacb89d60c53fce19d2d19d25dc74cd">EA_OSD_VOUT</a>, frame_buffer_id, NULL);</div>
</div><!-- fragment --></li>
<li>For stream, it's different from the VOUT. It has a <code>stream_params</code> to describe the stream configuration, including the required overlay area numbers, the location of each overlay area, the required blur area numbers, etc. <div class="fragment"><div class="line"><a class="code" href="../../d4/d73/group__eazyai-osd-helper.html#gae32098a9e8e9f7cb550a746e21271363">ea_osd_t</a> *osd = <a class="code" href="../../da/dc6/group__eazyai-osd-details.html#ga82a84f838f5512cfcc0bc915f1d7ad26">ea_osd_new</a>(<a class="code" href="../../d4/d73/group__eazyai-osd-helper.html#ggadf0ed00a8800a0cf01c6cae4fdeb3214a402d677933516a13514a84a773c3007d">EA_OSD_STREAM</a>, stream_id, stream_params);</div>
</div><!-- fragment --></li>
</ul>
</li>
<li>Set CLUT (Color Look Up Table)<ul>
<li>Users can use the below APIs to set the CLUT for each area: <div class="fragment"><div class="line"><a class="code" href="../../da/dc6/group__eazyai-osd-details.html#ga0e6939336aea047b9ac94052083a4046">ea_osd_area_set_color_table_rgba</a>(osd, local_area_id, rgb_color_table, color_num)</div>
<div class="line"><a class="code" href="../../da/dc6/group__eazyai-osd-details.html#gabf7978c4fd33642a2ec81c8e632ef3d0">ea_osd_area_set_color_table_yuva</a>(osd, local_area_id, yuva_color_table, color_num)</div>
<div class="line"><a class="code" href="../../da/dc6/group__eazyai-osd-details.html#ga942af3078011f666816bdce17707f76b">ea_osd_area_set_default_16_color_table</a>(osd, local_area_id)</div>
</div><!-- fragment --></li>
</ul>
</li>
<li>Draw<ul>
<li>Get area buffer to write. Before drawing shapes on the OSD, users need to get the area buffer. The area buffer is mapped from the overlay buffer(for the stream case) or is mapped from the framebuffer(for the VOUT case). Users can add various OSD shapes by modifying this buffer. The <code>local_area_id</code> of an area need to be managed by users. If the local_area_id is smaller than the <code>overlay_area_number</code> specified in the calling of <code>ea_osd_new</code>, then the returned area buffer is an overlay area buffer. The arbitrary blur will be supported in the future release. The number of the arbitrary blur areas should be currently <b>zero</b>. <div class="fragment"><div class="line"><span class="keyword">const</span> ea_osd_area_buffer_t *area_buf =  <a class="code" href="../../da/dc6/group__eazyai-osd-details.html#gadc6e372f53d7d766fea249d395d354ef">ea_osd_area_current_buffer</a>(osd, local_area_id);</div>
</div><!-- fragment --></li>
<li>Draw DSP blur bounding box. It's not necessary to get area buffer to draw blur bounding box. The low level software layer takes care of the blur box drawing. <div class="fragment"><div class="line"><a class="code" href="../../da/dc6/group__eazyai-osd-details.html#gaed36ac8fec9ec49de2737bce8e539187">ea_osd_set_dsp_blur_box</a>(osd, local_area_id, blur_box_location)</div>
</div><!-- fragment --></li>
</ul>
</li>
<li>Refresh<ul>
<li>For VOUT, the <code>params</code> can be <code>NULL</code>. For stream, if the <code>dsp_pts</code> is given in the params, this function trys to use overlay frame-sync machanism to apply overlay to the corresponding frame number. Otherwise, the overlay is added to the current arbitrary frame. <div class="fragment"><div class="line"><a class="code" href="../../da/dc6/group__eazyai-osd-details.html#ga8e9c7a89673fc7a451721a73ffd06f57">ea_osd_refresh</a>(osd, params)</div>
</div><!-- fragment --></li>
</ul>
</li>
<li><p class="startli">Some information about the overlay mechanism</p>
<p class="startli">Ambarella CV series chips superimpose graphics and/or text information on video streams by overlay hardware. Only CLUT8 mode is supported, each look-up table is an array of 256 entries. The entry is defined for four individual channels: Y, U, V, and alpha (transparency). Alpha 0 is transparent and 255 is non-transparent.</p><ol type="a">
<li><p class="startli">Why do users need cycle buffers?</p>
<p class="startli">In reality, there is a delay for DSP apply the overlay to the frame, and the real-time delay in DSP is difficult to determine. Also it is difficult to describe it, the follow section used a picture (Figure 2-1) to describe how the cycle buffers are used when drawing the overlay.</p><ul>
<li>From the time line in below image, the time when DSP acquires each frame of data and starts encoding with overlay is called F1, F2, ..., and Fn.</li>
<li>The application starts to apply a new drawing on the overlay buffer block during [Fn, Fn+1] in the left time line, then this buffer content cannot be modified.</li>
<li>As the delay, DSP will start to handle the new drawing after (<b>4 + encode_dummy_latency</b>) frames in the right time line, which will finish at time T. Then this overlay buffer block can be released for other task.</li>
<li>Therefore, the number of cycle buffers used by the application is <b>the maximum number of plots</b> in the time span [Fn, T].</li>
<li>The yellow part is the number of frames that encode_dummy_elatency causes the DSP to delay for frame accurate overlay. <div class="image">
<img src="../../eazyai_overlay_mechanism_in_dsp.png" alt=""/>
<div class="caption">
Figure 2-1. Overlay Mechanism in DSP.</div></div>
</li>
</ul>
</li>
<li>How do users choose the correct circular buffer number?<ul>
<li>There are two cases for the application of overlay, which are ordinary overlay insertion and frame accurate overlay insertion.</li>
<li>In the case of the ordinary overlay insertion, the overlay will be added to the current arbitrary frame.</li>
<li>In the case of the frame accurate overlay insertion, there is a frame_id(dsp_pts) along with the overlay frame, so that the overlay could be applied to corresponding correct frame.</li>
<li>The frame accurate overlay insertion is able to give better overlay effect. For example, the detection bounding boxes, the human skeletons or the blur privacy effect can be added correspondingly with the correct target object.</li>
<li>Here are just some tips about the overlay circle buffer number. The library will handle this number, and users don't need to take care about it.</li>
<li>In ordinary overlay insertion case: <div class="fragment"><div class="line">buffer_number = |-- 4~6  (overlay_update_frequency &gt;= VIN_frequency/4)</div>
<div class="line">                |</div>
<div class="line">                |-- 2    (overlay_update_frequency &lt; VIN_frequency/4)</div>
</div><!-- fragment --></li>
<li>In frame accurate overlay insertion case (dummy here is the encoding dummy latency number): <div class="fragment"><div class="line">buffer_number = |-- dummy + 4~6  (overlay_update_frequency &gt;= VIN_frequency/4)</div>
<div class="line">                |</div>
<div class="line">                |-- dummy + 2    (overlay_update_frequency &lt; VIN_frequency/4)</div>
</div><!-- fragment --></li>
<li>When there are less buffer number for frame accurate overlay insertion (but the buffer number is still enough for ordinary insertion), the overlay can still be applied, <b>but it will not be applied to the accurate frame</b>.</li>
</ul>
</li>
</ol>
</li>
</ol>
<h3><a class="anchor" id="eazyai_cvflow_core_log"></a>
2.2.7 Core Library - ea_log</h3>
<p><a class="el" href="../../d4/d96/group__eazyai-log-helper.html">ea_log macros, enumerations and structures</a> provides macros to control the output of log messages of each individual source code file.</p><ol type="1">
<li><p class="startli"><a class="el" href="../../d4/d96/group__eazyai-log-helper.html#gabf4ab7c2d5fe62deac5689fad8a8296e">EA_LOG_DECLARE_LOCAL</a></p>
<p class="startli">This macro is used to declare the log level variable in each source code file. </p><div class="fragment"><div class="line"><a class="code" href="../../d4/d96/group__eazyai-log-helper.html#gabf4ab7c2d5fe62deac5689fad8a8296e">EA_LOG_DECLARE_LOCAL</a>(<a class="code" href="../../d4/d96/group__eazyai-log-helper.html#gga35915c50caa86eeec9606ef087bec6b5a11be6a6ac457a87220a879b8c4050ce6">EA_LOG_LEVEL_NOTICE</a>);</div>
</div><!-- fragment --></li>
<li><p class="startli"><a class="el" href="../../d4/d96/group__eazyai-log-helper.html#ga5994ff775af94256896b8cf8793e4275">EA_LOG_GET_LOCAL</a></p>
<p class="startli">This macro is used to get the current log level in a source code file scope. </p><div class="fragment"><div class="line">log_level = <a class="code" href="../../d4/d96/group__eazyai-log-helper.html#ga5994ff775af94256896b8cf8793e4275">EA_LOG_GET_LOCAL</a>();</div>
</div><!-- fragment --></li>
<li><p class="startli"><a class="el" href="../../d4/d96/group__eazyai-log-helper.html#ga4da64e8e9357c35fd8e1be1252a8bfe1">EA_LOG_SET_LOCAL</a></p>
<p class="startli">This macro is used to change the log level in a source code file scope. </p><div class="fragment"><div class="line"><a class="code" href="../../d4/d96/group__eazyai-log-helper.html#ga4da64e8e9357c35fd8e1be1252a8bfe1">EA_LOG_SET_LOCAL</a>(params-&gt;log_level);</div>
</div><!-- fragment --></li>
<li><p class="startli"><a class="el" href="../../d4/d96/group__eazyai-log-helper.html#ga14964c495beb6c2c9af8a952edd3a615">EA_LOG_GET_GLOBAL</a></p>
<p class="startli">This macro is used to get the current log level in the global scope. </p><div class="fragment"><div class="line">log_level = <a class="code" href="../../d4/d96/group__eazyai-log-helper.html#ga14964c495beb6c2c9af8a952edd3a615">EA_LOG_GET_GLOBAL</a>();</div>
</div><!-- fragment --></li>
<li><p class="startli"><a class="el" href="../../d4/d96/group__eazyai-log-helper.html#ga46c9c6107717fa7b5ad1965d6e40a35e">EA_LOG_SET_GLOBAL</a></p>
<p class="startli">This macro is used to change the log level in the global scope. By default, it is <a class="el" href="../../d4/d96/group__eazyai-log-helper.html#gga35915c50caa86eeec9606ef087bec6b5a767b83cdc86110c41e93c104b2a9f8f2">EA_LOG_LEVEL_INVALID</a>. After it is set with a valid value, all logs with lower criticality will not be output. </p><div class="fragment"><div class="line"><a class="code" href="../../d4/d96/group__eazyai-log-helper.html#ga46c9c6107717fa7b5ad1965d6e40a35e">EA_LOG_SET_GLOBAL</a>(params-&gt;log_level);</div>
</div><!-- fragment --></li>
<li><p class="startli"><a class="el" href="../../d4/d96/group__eazyai-log-helper.html#gade967f14003f29f4b1b954c96cddbcb3">EA_LOG_VERBOSE</a>, <a class="el" href="../../d4/d96/group__eazyai-log-helper.html#gadb50ef003362974157bd5ba706c600e2">EA_LOG_DEBUG</a>, <a class="el" href="../../d4/d96/group__eazyai-log-helper.html#gadff5cc953d26853718e397ac1be6ef8e">EA_LOG_NOTICE</a>, <a class="el" href="../../d4/d96/group__eazyai-log-helper.html#ga90cd35cff1406b5b8f71c2a9a108bd6d">EA_LOG_ERROR</a></p>
<p class="startli">These macros are used to output the log message when criticality is allowed by the log level. </p><div class="fragment"><div class="line"><a class="code" href="../../d4/d96/group__eazyai-log-helper.html#gadff5cc953d26853718e397ac1be6ef8e">EA_LOG_NOTICE</a>(<span class="stringliteral">&quot;retinaface_deinit\n&quot;</span>);</div>
</div><!-- fragment --></li>
<li><p class="startli"><a class="el" href="../../d4/d96/group__eazyai-log-helper.html#gac2958cac7dd6dde4da6483e260d982c0">EA_LOG_ASSERT</a></p>
<p class="startli">This macro can be used to check a statement. If the statement is false, the trace of line, function, and file will be printed. </p><div class="fragment"><div class="line"><a class="code" href="../../d4/d96/group__eazyai-log-helper.html#gac2958cac7dd6dde4da6483e260d982c0">EA_LOG_ASSERT</a>(is_true());</div>
</div><!-- fragment --></li>
</ol>
<hr  />
<h2><a class="anchor" id="eazyai_cvflow_utils"></a>
2.3 Utils Library</h2>
<h3><a class="anchor" id="eazyai_cvflow_utils_display"></a>
2.3.1 Utils Library - ea_display</h3>
<p><a class="el" href="../../d2/dd8/group__eazyai-display-details.html">ea_display functions</a> provide functions to draw detection results on the display media in the form of bounding boxes, textboxes, and grey images. Along with the parameters in the ea_display_set_*() functions, the other parameters of drawing content can be set by changing the common parameters returned by <a class="el" href="../../d2/dd8/group__eazyai-display-details.html#ga4c54d8c74192837262efe0a75c4bdf7f">ea_display_obj_params()</a>. The overlay buffer size taken by each feature in <a class="el" href="../../d1/d5c/group__eazyai-display-helper.html#ga006e4c6e8e51bca579fde2eeef724dc9">ea_display_feature_e</a> is around <b>(1024 + resolution * (enc-dummy-latency + 5))</b>.</p><ol type="1">
<li>Draw on VOUT. <div class="fragment"><div class="line"><a class="code" href="../../d1/d5c/group__eazyai-display-helper.html#ga6a3a6e2e3f892e912b296b52a2cf0d37">ea_display_t</a> *display = <a class="code" href="../../d2/dd8/group__eazyai-display-details.html#gad23209ebb70eb39abf454106a2367a8b">ea_display_new</a>(<a class="code" href="../../d1/d5c/group__eazyai-display-helper.html#gga6dd902e4319e44983fc40c9302d861c5a120eb3f9b02994096dfb66f2cc4489e6">EA_DISPLAY_VOUT</a>, <a class="code" href="../../d1/d5c/group__eazyai-display-helper.html#gga29303fa2fb5d6355bc35b0f3c684d32fa1bb66c3cdbe77f369639e1b5fa9a4939">EA_DISPLAY_ANALOG_VOUT</a>, <a class="code" href="../../d1/d5c/group__eazyai-display-helper.html#gga006e4c6e8e51bca579fde2eeef724dc9a6581a829e8436c0a00754957ba35e844">EA_DISPLAY_BBOX_TEXTBOX</a>, NULL);</div>
</div><!-- fragment --></li>
<li>Draw on the stream.<ul>
<li>With automatically allocated overlay buffer: <div class="fragment"><div class="line"><a class="code" href="../../d1/d5c/group__eazyai-display-helper.html#ga6a3a6e2e3f892e912b296b52a2cf0d37">ea_display_t</a> *display = <a class="code" href="../../d2/dd8/group__eazyai-display-details.html#gad23209ebb70eb39abf454106a2367a8b">ea_display_new</a>(<a class="code" href="../../d1/d5c/group__eazyai-display-helper.html#gga6dd902e4319e44983fc40c9302d861c5a52139433ee975cb1bef7d9b68e248e1a">EA_DISPLAY_STREAM</a>, stream_id, <a class="code" href="../../d1/d5c/group__eazyai-display-helper.html#gga006e4c6e8e51bca579fde2eeef724dc9a6581a829e8436c0a00754957ba35e844">EA_DISPLAY_BBOX_TEXTBOX</a> | <a class="code" href="../../d1/d5c/group__eazyai-display-helper.html#gga006e4c6e8e51bca579fde2eeef724dc9ae4cbf6b0535608d3e7418f3d941f069f">EA_DISPLAY_GRAY_SCALE</a>, NULL);</div>
</div><!-- fragment --></li>
<li>With specified overlay buffer offset when overlay buffer is used in multiple applications: <div class="fragment"><div class="line"><a class="code" href="../../d1/d5c/group__eazyai-display-helper.html#ga6a3a6e2e3f892e912b296b52a2cf0d37">ea_display_t</a> *display = <a class="code" href="../../d2/dd8/group__eazyai-display-details.html#gad23209ebb70eb39abf454106a2367a8b">ea_display_new</a>(<a class="code" href="../../d1/d5c/group__eazyai-display-helper.html#gga6dd902e4319e44983fc40c9302d861c5a52139433ee975cb1bef7d9b68e248e1a">EA_DISPLAY_STREAM</a>, stream_id, <a class="code" href="../../d1/d5c/group__eazyai-display-helper.html#gga006e4c6e8e51bca579fde2eeef724dc9a6581a829e8436c0a00754957ba35e844">EA_DISPLAY_BBOX_TEXTBOX</a> | <a class="code" href="../../d1/d5c/group__eazyai-display-helper.html#gga006e4c6e8e51bca579fde2eeef724dc9ae4cbf6b0535608d3e7418f3d941f069f">EA_DISPLAY_GRAY_SCALE</a>, (<span class="keywordtype">void</span> *)0x1000000);</div>
</div><!-- fragment --></li>
<li>With standalone server application:<ul>
<li>Server application: <div class="fragment"><div class="line"><a class="code" href="../../d1/d5c/group__eazyai-display-helper.html#ga6a3a6e2e3f892e912b296b52a2cf0d37">ea_display_t</a> *display = <a class="code" href="../../d2/dd8/group__eazyai-display-details.html#gad23209ebb70eb39abf454106a2367a8b">ea_display_new</a>(<a class="code" href="../../d1/d5c/group__eazyai-display-helper.html#gga6dd902e4319e44983fc40c9302d861c5a183a9f81ecfc42fbffb966db15fab538">EA_DISPLAY_STREAM_SERVER</a>, stream_id, <a class="code" href="../../d1/d5c/group__eazyai-display-helper.html#gga006e4c6e8e51bca579fde2eeef724dc9a6581a829e8436c0a00754957ba35e844">EA_DISPLAY_BBOX_TEXTBOX</a> | <a class="code" href="../../d1/d5c/group__eazyai-display-helper.html#gga006e4c6e8e51bca579fde2eeef724dc9ae4cbf6b0535608d3e7418f3d941f069f">EA_DISPLAY_GRAY_SCALE</a>, (<span class="keywordtype">void</span> *)0x1000000);</div>
<div class="line"><span class="keywordflow">while</span> (1) {</div>
<div class="line">    <a class="code" href="../../d2/dd8/group__eazyai-display-details.html#gad7f1f719224c7e03a0ed9ba69d0650de">ea_display_refresh</a>(display, NULL);</div>
<div class="line">}</div>
</div><!-- fragment --></li>
<li>Client application: <div class="fragment"><div class="line"><a class="code" href="../../d1/d5c/group__eazyai-display-helper.html#ga6a3a6e2e3f892e912b296b52a2cf0d37">ea_display_t</a> *display = <a class="code" href="../../d2/dd8/group__eazyai-display-details.html#gad23209ebb70eb39abf454106a2367a8b">ea_display_new</a>(<a class="code" href="../../d1/d5c/group__eazyai-display-helper.html#gga6dd902e4319e44983fc40c9302d861c5a2a99b87ce0093dd1763db95a12e4c731">EA_DISPLAY_STREAM_CLIENT</a>, stream_id, <a class="code" href="../../d1/d5c/group__eazyai-display-helper.html#gga006e4c6e8e51bca579fde2eeef724dc9a6581a829e8436c0a00754957ba35e844">EA_DISPLAY_BBOX_TEXTBOX</a> | <a class="code" href="../../d1/d5c/group__eazyai-display-helper.html#gga006e4c6e8e51bca579fde2eeef724dc9ae4cbf6b0535608d3e7418f3d941f069f">EA_DISPLAY_GRAY_SCALE</a>, <span class="stringliteral">&quot;127.0.0.1&quot;</span>);</div>
</div><!-- fragment --></li>
</ul>
</li>
<li>With DSP blur: <div class="fragment"><div class="line"><a class="code" href="../../d1/d5c/group__eazyai-display-helper.html#ga6a3a6e2e3f892e912b296b52a2cf0d37">ea_display_t</a> *display = <a class="code" href="../../d2/dd8/group__eazyai-display-details.html#gad23209ebb70eb39abf454106a2367a8b">ea_display_new</a>(<a class="code" href="../../d1/d5c/group__eazyai-display-helper.html#gga6dd902e4319e44983fc40c9302d861c5a52139433ee975cb1bef7d9b68e248e1a">EA_DISPLAY_STREAM</a>, stream_id, <a class="code" href="../../d1/d5c/group__eazyai-display-helper.html#gga006e4c6e8e51bca579fde2eeef724dc9a6581a829e8436c0a00754957ba35e844">EA_DISPLAY_BBOX_TEXTBOX</a> | <a class="code" href="../../d1/d5c/group__eazyai-display-helper.html#gga006e4c6e8e51bca579fde2eeef724dc9ae4cbf6b0535608d3e7418f3d941f069f">EA_DISPLAY_GRAY_SCALE</a>, NULL);</div>
<div class="line"><a class="code" href="../../d2/dd8/group__eazyai-display-details.html#ga4c54d8c74192837262efe0a75c4bdf7f">ea_display_obj_params</a>(display)-&gt;blur_strength = USER_BLUR_STRENGTH_LEVEL;</div>
</div><!-- fragment --></li>
</ul>
</li>
<li>Draw on the JPEG image. <div class="fragment"><div class="line"><a class="code" href="../../df/d83/group__eazyai-img-resource-helper.html#ga7a78f8fb1a7b1f5c417f07ffc4bc77b0">ea_img_resource_t</a> *img_resource = <a class="code" href="../../d9/d59/group__eazyai-img-resource-details.html#ga5d110e8094f21624809e17a6044970dc">ea_img_resource_new</a>(<a class="code" href="../../df/d83/group__eazyai-img-resource-helper.html#gga869eb0ce6a6d02cdc89a81980b1b5538a88382b9bca694ea58b0e342c6d938d77">EA_JPEG_FOLDER</a>, (<span class="keywordtype">void</span> *)<span class="stringliteral">&quot;/sdcard/in/&quot;</span>);</div>
<div class="line"><span class="comment">// ...</span></div>
<div class="line"><a class="code" href="../../d1/d5c/group__eazyai-display-helper.html#ga6a3a6e2e3f892e912b296b52a2cf0d37">ea_display_t</a> *display = <a class="code" href="../../d2/dd8/group__eazyai-display-details.html#gad23209ebb70eb39abf454106a2367a8b">ea_display_new</a>(<a class="code" href="../../d1/d5c/group__eazyai-display-helper.html#gga6dd902e4319e44983fc40c9302d861c5a4aba6e29e43651b76e2e373c4e7d6838">EA_DISPLAY_JPEG</a>, <a class="code" href="../../d9/d79/group__eazyai-tensor-helper.html#gga3ba09b564d11c6625e68723113aae4b4ac059f5fa5e339debad4cfec9d9c69903">EA_TENSOR_COLOR_MODE_BGR</a>, <a class="code" href="../../d1/d5c/group__eazyai-display-helper.html#gga006e4c6e8e51bca579fde2eeef724dc9a6581a829e8436c0a00754957ba35e844">EA_DISPLAY_BBOX_TEXTBOX</a>, (<span class="keywordtype">void</span> *)<span class="stringliteral">&quot;/sdcard/out/&quot;</span>);</div>
<div class="line">ea_img_resource_data_t data;</div>
<div class="line"><span class="comment">// ...</span></div>
<div class="line"><a class="code" href="../../d9/d59/group__eazyai-img-resource-details.html#ga0f1539e9f7582c2b165dd066e17a4084">ea_img_resource_hold_data</a>(img_resource, &amp;data);</div>
<div class="line"><span class="comment">// ...</span></div>
<div class="line"><a class="code" href="../../d2/dd8/group__eazyai-display-details.html#gad7f1f719224c7e03a0ed9ba69d0650de">ea_display_refresh</a>(display, (<span class="keywordtype">void</span> *)data.tensor_group[0]);</div>
</div><!-- fragment --></li>
</ol>
<h3><a class="anchor" id="eazyai_cvflow_sub_utils"></a>
2.3.2 Utils Library - ea_utils</h3>
<p><a class="el" href="../../db/d66/group__eazyai-utils-details.html">ea_utils functions</a> provide utilities such as NMS calculation and frames per second (fps) statistics, along with some macros to shorten code.</p><ol type="1">
<li>Macros used in <em> do {} while (0); </em>:<ul>
<li><p class="startli"><a class="el" href="../../d4/d96/group__eazyai-log-helper.html#gabfe3786470deb087a8c51c3516fa0a3e">RVAL_OK</a></p>
<p class="startli">This macro can be used to check the return value of a function if a negative returned value indicates failure. If a negative value is returned, it will break <em> do {} while (0); </em>, and print the error trace of line, function, and file. </p><div class="fragment"><div class="line"><span class="keywordtype">int</span> rval = 0; <span class="comment">// checked by RVAL_OK()</span></div>
<div class="line"> </div>
<div class="line"><span class="keywordflow">do</span> {</div>
<div class="line">    <a class="code" href="../../d4/d96/group__eazyai-log-helper.html#gabfe3786470deb087a8c51c3516fa0a3e">RVAL_OK</a>(function_return_int());</div>
<div class="line">    <span class="comment">// ...</span></div>
<div class="line">} <span class="keywordflow">while</span> (0);</div>
<div class="line"> </div>
<div class="line"><span class="keywordflow">return</span> rval;</div>
</div><!-- fragment --></li>
<li><p class="startli"><a class="el" href="../../d4/d96/group__eazyai-log-helper.html#gaed0d12d2c797fd90e7564ae681660a4f">RVAL_ASSERT</a></p>
<p class="startli">This macro can be used to check a statement. If the statement is false, it will break <em> do {} while (0); </em>, and print the error trace of line, function, and file. </p><div class="fragment"><div class="line"><span class="keywordtype">int</span> rval = 0; <span class="comment">// checked by RVAL_OK()</span></div>
<div class="line"> </div>
<div class="line"><span class="keywordflow">do</span> {</div>
<div class="line">    <a class="code" href="../../d4/d96/group__eazyai-log-helper.html#gaed0d12d2c797fd90e7564ae681660a4f">RVAL_ASSERT</a>(is_true());</div>
<div class="line">    <span class="comment">// ...</span></div>
<div class="line">} <span class="keywordflow">while</span> (0);</div>
<div class="line"> </div>
<div class="line"><span class="keywordflow">return</span> rval;</div>
</div><!-- fragment --></li>
<li><a class="el" href="../../d4/d96/group__eazyai-log-helper.html#gac09b089a2810e3f290277603c1ffe0e7">RVAL_BREAK</a> This macro is used to further check a returned negative value after a loop inside <em> do {} while (0); </em> is broken. If the return value is negative, it will perform a further break. <div class="fragment"><div class="line"><span class="keywordtype">int</span> rval = 0; <span class="comment">// checked by RVAL_OK()</span></div>
<div class="line"> </div>
<div class="line"><span class="keywordflow">do</span> {</div>
<div class="line">    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; N; i++) {</div>
<div class="line">        <a class="code" href="../../d4/d96/group__eazyai-log-helper.html#gabfe3786470deb087a8c51c3516fa0a3e">RVAL_OK</a>(function_return_int());</div>
<div class="line">        <span class="comment">// ...</span></div>
<div class="line">    }</div>
<div class="line">    <a class="code" href="../../d4/d96/group__eazyai-log-helper.html#gac09b089a2810e3f290277603c1ffe0e7">RVAL_BREAK</a>();</div>
<div class="line">    <span class="comment">// ...</span></div>
<div class="line">} <span class="keywordflow">while</span> (0);</div>
<div class="line"> </div>
<div class="line"><span class="keywordflow">return</span> rval;</div>
</div><!-- fragment --></li>
</ul>
</li>
<li>Macros used to measure execution time:<ul>
<li><p class="startli"><a class="el" href="../../d4/d96/group__eazyai-log-helper.html#ga950cfae72357fe74ae5a56666c95295a">EA_MEASURE_TIME_DECLARE</a></p>
<p class="startli">This macro is used to declare a static value to record time. It can be placed in a source code file outside of functions to be seen by all functions, or inside a function with limited visibility. </p><div class="fragment"><div class="line"><a class="code" href="../../d4/d96/group__eazyai-log-helper.html#ga950cfae72357fe74ae5a56666c95295a">EA_MEASURE_TIME_DECLARE</a>();</div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">int</span> cv_env_init(live_ctx_t *live_ctx, live_params_t *params)</div>
<div class="line">{</div>
<div class="line"><span class="comment">// ...</span></div>
<div class="line">}</div>
</div><!-- fragment --> <div class="fragment"><div class="line"><span class="keywordtype">int</span> <span class="keyword">function</span>()</div>
<div class="line">{</div>
<div class="line">    <a class="code" href="../../d4/d96/group__eazyai-log-helper.html#ga950cfae72357fe74ae5a56666c95295a">EA_MEASURE_TIME_DECLARE</a>();</div>
<div class="line">}</div>
</div><!-- fragment --></li>
<li><p class="startli"><a class="el" href="../../d4/d96/group__eazyai-log-helper.html#ga53f7894cbcfdaf96177412ddee0de90d">EA_MEASURE_TIME_START</a></p>
<p class="startli">This macro is placed at the start point of a time measure.</p>
</li>
<li><p class="startli"><a class="el" href="../../d4/d96/group__eazyai-log-helper.html#gaa9af1f313445f2443a9ccca541294264">EA_MEASURE_TIME_END</a></p>
<p class="startli">This macro is placed at the end point of a time measure. The time message will be printed. </p><div class="fragment"><div class="line"><a class="code" href="../../d4/d96/group__eazyai-log-helper.html#ga950cfae72357fe74ae5a56666c95295a">EA_MEASURE_TIME_DECLARE</a>();</div>
<div class="line"><span class="comment">// ...</span></div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">int</span> live_run_loop(live_ctx_t *live_ctx, live_params_t *params)</div>
<div class="line">{</div>
<div class="line">    <span class="keywordtype">int</span> rval = 0;</div>
<div class="line">    <span class="comment">// ...</span></div>
<div class="line">    <span class="keywordflow">do</span> {</div>
<div class="line">        <span class="comment">// ...</span></div>
<div class="line">        <a class="code" href="../../d4/d96/group__eazyai-log-helper.html#ga53f7894cbcfdaf96177412ddee0de90d">EA_MEASURE_TIME_START</a>();</div>
<div class="line">        <a class="code" href="../../d4/d96/group__eazyai-log-helper.html#gabfe3786470deb087a8c51c3516fa0a3e">RVAL_OK</a>(retinaface_vp_forward(&amp;live_ctx-&gt;retinaface));</div>
<div class="line">        <span class="comment">// ...</span></div>
<div class="line">        <a class="code" href="../../d4/d96/group__eazyai-log-helper.html#gaa9af1f313445f2443a9ccca541294264">EA_MEASURE_TIME_END</a>(<span class="stringliteral">&quot;process time: &quot;</span>);</div>
<div class="line">        <span class="comment">// ...</span></div>
<div class="line">    } <span class="keywordflow">while</span> (0);</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">return</span> rval;</div>
<div class="line">}</div>
</div><!-- fragment --></li>
</ul>
</li>
<li><p class="startli">Statistic fps of loops:</p>
<p class="startli"><a class="el" href="../../db/d66/group__eazyai-utils-details.html#ga11b8fe7e7036d5a403f1d9bc65fb1774">ea_calc_fps()</a> can be used to statistic fps of running loops by setting how many loops should be used to get the statistic. During the statistic, <a class="el" href="../../db/d66/group__eazyai-utils-details.html#ga11b8fe7e7036d5a403f1d9bc65fb1774">ea_calc_fps()</a> returns a negative value. When a statistic is finished, a valid fps value will be returned and a new statistic will start. </p><div class="fragment"><div class="line"><span class="keyword">static</span> <span class="keywordtype">int</span> live_run_loop(live_ctx_t *live_ctx, live_params_t *params)</div>
<div class="line">{</div>
<div class="line">    <span class="keywordtype">int</span> rval = 0;</div>
<div class="line">    ea_calc_fps_ctx_t calc_fps_ctx;</div>
<div class="line">    <span class="keywordtype">float</span> fps;</div>
<div class="line"> </div>
<div class="line">    memset(&amp;calc_fps_ctx, 0, <span class="keyword">sizeof</span>(ea_calc_fps_ctx_t));</div>
<div class="line">    calc_fps_ctx.count_period = 100;</div>
<div class="line">    <span class="comment">// ...</span></div>
<div class="line">    <span class="keywordflow">do</span> {</div>
<div class="line">        <span class="comment">// ...</span></div>
<div class="line">        fps = <a class="code" href="../../db/d66/group__eazyai-utils-details.html#ga11b8fe7e7036d5a403f1d9bc65fb1774">ea_calc_fps</a>(&amp;calc_fps_ctx);</div>
<div class="line">        <span class="keywordflow">if</span> (fps &gt; 0) {</div>
<div class="line">            <a class="code" href="../../d4/d96/group__eazyai-log-helper.html#gadff5cc953d26853718e397ac1be6ef8e">EA_LOG_NOTICE</a>(<span class="stringliteral">&quot;fps %.1f\n&quot;</span>, fps);</div>
<div class="line">        }</div>
<div class="line">    } <span class="keywordflow">while</span> (0);</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">return</span> rval;</div>
<div class="line">}</div>
</div><!-- fragment --></li>
<li><p class="startli">NMS:</p>
<p class="startli"><a class="el" href="../../db/d66/group__eazyai-utils-details.html#ga4dce0d08263864a05033381eccd3ce6d">ea_nms()</a> can be used to perform NMS calculation on the data in the format of [[x1, y1, x2, y2, score], ...]. If there is data related to each item in [[x1, y1, x2, y2, score], ...], for example, the landmarks output of a face detection network, <a class="el" href="../../db/d66/group__eazyai-utils-details.html#ga4dce0d08263864a05033381eccd3ce6d">ea_nms()</a> can be used to manage them together. The outputs will be sorted in the score order. </p><div class="fragment"><div class="line"><a class="code" href="../../db/d66/group__eazyai-utils-details.html#ga4dce0d08263864a05033381eccd3ce6d">ea_nms</a>(x1y1x2y2score, NULL, 0, valid_count, nms_threshold, use_iou_min, top_k,</div>
<div class="line">    nms_x1y1x2y2score, NULL, &amp;nms_valid_count);</div>
</div><!-- fragment --> <div class="fragment"><div class="line"><a class="code" href="../../db/d66/group__eazyai-utils-details.html#ga4dce0d08263864a05033381eccd3ce6d">ea_nms</a>(bbox_and_score, landmarks, <span class="keyword">sizeof</span>(<span class="keywordtype">float</span>) * 10, valid_det_num, nms_threshold, use_iou_min, top_k,</div>
<div class="line">    nms_bbox_and_score, nms_landmarks, &amp;nms_valid_det_num);</div>
</div><!-- fragment --></li>
<li><p class="startli">Soft-NMS:</p>
<p class="startli"><a class="el" href="../../db/d66/group__eazyai-utils-details.html#ga6773a669f94b50d055030d8a601b2c60">ea_soft_nms()</a>, it is named Soft-NMS. For detail, please refer to <a href="https://arxiv.org/pdf/1704.04503.pdf">https://arxiv.org/pdf/1704.04503.pdf</a>. non-maximum suppression is an integral part of the object detection pipeline. First, it sorts all detection boxes on the basis of their scores. The detection box M with the maximum score is selected and all other detection boxes with a significant overlap (using a pre-defined threshold) with M are suppressed, such as above <code><a class="el" href="../../db/d66/group__eazyai-utils-details.html#ga4dce0d08263864a05033381eccd3ce6d">ea_nms()</a></code>. This process is recursively applied on the remaining boxes. As per the design of the algorithm, if an object lies within the predefined overlap threshold, it leads to a miss. To this end, then Soft-NMS, an algorithm which decays the detection scores of all other objects as a continuous function of their overlap with M. Hence, no object is eliminated in this process. The outputs will be sorted in the score order. </p><div class="fragment"><div class="line"><a class="code" href="../../db/d66/group__eazyai-utils-details.html#ga6773a669f94b50d055030d8a601b2c60">ea_soft_nms</a>(<span class="keywordtype">float</span> *x1y1x2y2score, <span class="keywordtype">void</span> *aux, <span class="keywordtype">size_t</span> aux_element_size, <span class="keywordtype">int</span> num,</div>
<div class="line">    <span class="keywordtype">float</span> iou_threshold, <span class="keywordtype">int</span> use_iou_min, <span class="keywordtype">int</span> top_k,</div>
<div class="line">    ea_soft_nms_method_t method, <span class="keywordtype">float</span> discard_threshold, <span class="keywordtype">float</span> sigma,</div>
<div class="line">    <span class="keywordtype">float</span> *out_x1y1x2y2score, <span class="keywordtype">void</span> *out_aux, <span class="keywordtype">int</span> *out_num);</div>
</div><!-- fragment --></li>
</ol>
<hr  />
<h2><a class="anchor" id="eazyai_cvflow_comm"></a>
2.4 Communication Library</h2>
<h3><a class="anchor" id="eazyai_cvflow_comm_queue"></a>
2.4.1 Comm Library - ea_queue</h3>
<p><a class="el" href="../../df/d49/group__eazyai-queue-details.html">ea_queue functions</a> provide functions to transfer data in multi-threads. The queue owner allocates blocks of memory, and registers each memory block to ea_queue. Each time the data sender needs a block of memory to carry data, it requests an idle block from ea_queue. After the data receiver consumes the data, it releases the block of memory to ea_queue. This block of memory is called a carrier in the API. After the queue is destroyed, the queue owner frees these blocks of memory. </p><div class="image">
<img src="../../eazyai_queue_carrier_states.jpg" alt=""/>
<div class="caption">
Figure 2-2. EazyAI Queue Carrier States.</div></div>
<ol type="1">
<li>Add carriers. <div class="fragment"><div class="line">im_output_t output_group[IM_OUTPUT_QUEUE_SIZE];</div>
<div class="line"><a class="code" href="../../de/db5/group__eazyai-queue-helper.html#ga4e926f714f0ac2c29a131f3d6f175da7">ea_queue_t</a> *im_output_queue = <a class="code" href="../../df/d49/group__eazyai-queue-details.html#gab5abd4cca5db3b781c282c65b7100699">ea_queue_new</a>();</div>
<div class="line"><span class="keywordflow">for</span> (i = 0; i &lt; IM_OUTPUT_QUEUE_SIZE; i++) {</div>
<div class="line">    <a class="code" href="../../df/d49/group__eazyai-queue-details.html#ga83d51429300a33051d5598e64b2e2f6d">ea_queue_add_carrier</a>(im_output_queue, &amp;output_group[i])</div>
<div class="line">}</div>
</div><!-- fragment --></li>
<li>End queue: <div class="fragment"><div class="line">im_output_t *im_output = NULL;</div>
<div class="line">im_output_t *force_out_output = NULL;</div>
<div class="line">im_output = (im_output_t *)<a class="code" href="../../df/d49/group__eazyai-queue-details.html#gaac131e877e1e7ac3723e730fcbeca700">ea_queue_request_carrier</a>(im_output_queue);</div>
<div class="line"><span class="comment">// or</span></div>
<div class="line">im_output = (im_output_t *)<a class="code" href="../../df/d49/group__eazyai-queue-details.html#gab14a695eb3ef3dc62ea3fb671d03d171">ea_queue_request_carrier_force</a>(im_output_queue, (<span class="keywordtype">void</span> **)&amp;force_out_output);</div>
<div class="line"><span class="comment">// or</span></div>
<div class="line">im_output = (im_output_t *)<a class="code" href="../../df/d49/group__eazyai-queue-details.html#ga78e82fa09cf2f8dcec15d73aa7d6baa8">ea_queue_request_carrier_nowait</a>(im_output_queue);</div>
<div class="line"><span class="comment">// or</span></div>
<div class="line">im_output = (im_output_t *)<a class="code" href="../../df/d49/group__eazyai-queue-details.html#ga35da78d2d4574c0c224c11b8ce33ad4e">ea_queue_request_carrier_timeout</a>(im_output_queue, 10 * 1000);</div>
<div class="line"><span class="comment">// put data into im_output</span></div>
<div class="line">...</div>
<div class="line">ea_queue_en(im_output_queue, im_output);</div>
</div><!-- fragment --></li>
<li>Peek: <div class="fragment"><div class="line"><span class="keywordflow">if</span> (<a class="code" href="../../df/d49/group__eazyai-queue-details.html#ga40d5819ead3d1acac789f010f65c4dd6">ea_queue_peek</a>(im_output_queue)) { ... }         <span class="comment">// peek carrier in the queue</span></div>
<div class="line"><span class="keywordflow">if</span> (<a class="code" href="../../df/d49/group__eazyai-queue-details.html#ga68d32524c697b5eaa3ca25d04ce279c2">ea_queue_peek_carrier</a>(im_output_queue)) { ... } <span class="comment">// peek idle carrier which is not in the queue</span></div>
</div><!-- fragment --></li>
<li>Dequeue and release: <div class="fragment"><div class="line">im_output_t *im_output = NULL;</div>
<div class="line">im_output = (im_output_t *)<a class="code" href="../../df/d49/group__eazyai-queue-details.html#ga08322c65825b5f4a9fd34d926cae8410">ea_queue_de</a>(im_output_queue);</div>
<div class="line"><span class="comment">//or</span></div>
<div class="line">im_output = (im_output_t *)<a class="code" href="../../df/d49/group__eazyai-queue-details.html#gaab6e39e26118da934865174b0a20aa71">ea_queue_de_nowait</a>(im_output_queue);</div>
<div class="line"><span class="comment">// or</span></div>
<div class="line">im_output = (im_output_t *)<a class="code" href="../../df/d49/group__eazyai-queue-details.html#gacaf373c72ce837358e510f018f283f6d">ea_queue_de_timeout</a>(im_output_queue, 10 * 1000);</div>
<div class="line"><span class="comment">// use data in im_output</span></div>
<div class="line">...</div>
<div class="line">ea_queue_release_carrier(im_output_queue, im_output)</div>
</div><!-- fragment --></li>
<li>Free: <div class="fragment"><div class="line"><a class="code" href="../../df/d49/group__eazyai-queue-details.html#ga2c88442e578374371c29a757cbb221eb">ea_queue_free</a>(im_output_queue);</div>
</div><!-- fragment --></li>
</ol>
<hr  />
<h1><a class="anchor" id="eazyai_simulator"></a>
3 EazyAI Simulator</h1>
<h2><a class="anchor" id="eazyai_simulator_build"></a>
3.1 Build</h2>
<h3><a class="anchor" id="eazyai_simulator_build_include"></a>
3.1.1 Include</h3>
<p>For each source file that uses the API in the EazyAI library, the following include file is required: </p><div class="fragment"><div class="line"><span class="preprocessor">#include &lt;<a class="code" href="../../dd/dbe/eazyai_8h.html">eazyai.h</a>&gt;</span></div>
</div><!-- fragment --> <h3><a class="anchor" id="eazyai_simulator_build_compile"></a>
3.1.2 Compile</h3>
<p>The EazyAI simulator uses CMake to compile the source code. As this library uses the ADES and AC_INF libraries, users must source the CNNGen toolchain before compiling this library. The EazyAI simulator library is avaliable for adv (standard) CNNGen toolchain, but is not available for basic CNNGen toolchain.</p>
<p>Before compiling the library, users must install the json-c library into the folder <code>&lt;project_folder&gt;/eazyai/3rd_party</code>. The json-c library is available under MIT license; it aids in analyzing the <b>network_name.json</b> file. The readme in this folder guides the installation. The installation steps below are the same as those in the readme: </p><div class="fragment"><div class="line">build $ cd &lt;project_folder&gt;/eazyai/3rd_party</div>
<div class="line">build $ git clone https:<span class="comment">//github.com/json-c/json-c.git</span></div>
<div class="line">build $ cd json-c</div>
<div class="line">build $ git reset --hard f2fc1ca00a9f35aa67c987f45a4f86ae5ad22e57</div>
<div class="line">build $ cd -</div>
<div class="line">build $ mkdir build</div>
<div class="line">build $ cd build</div>
<div class="line">build $ cmake ../json-c -DCMAKE_INSTALL_PREFIX=../install</div>
<div class="line">build $ make</div>
<div class="line">build $ make install</div>
<div class="line">build $ cd -</div>
</div><!-- fragment --> <dl class="section note"><dt>Note</dt><dd>The compile target should be located at <code>&lt;project_folder&gt;/eazyai/3rd_party/install/lib/libjson-c.so</code>. If users must use another path, they can use the cmake parameter<code>-DJSON_C_INC</code> and <code>-DJSON_C_LIB</code> to modify it.</dd></dl>
<p>Compile steps for EazyAI simulator library: </p><div class="fragment"><div class="line">build $ source &lt;user_CNNGen_Toolchain_env_file&gt;</div>
<div class="line">build $ cd &lt;user_path&gt;/cvflow_cnngen_samples/library/eazyai)</div>
<div class="line">build $ mkdir build</div>
<div class="line">build $ cd build; cmake ..; make; cd -</div>
</div><!-- fragment --><p>(Optional) OpenCV is enabled by default. The users can use the macro <b>DISABLE_OPENCV</b> to compile a no-OpenCV version library. </p><div class="fragment"><div class="line">build $ cmake -DDISABLE_OPENCV=Y ..; make</div>
</div><!-- fragment --><p>(Optional) If there are multiple versions of OpenCV installed, users can use the CMake macro <code>USE_OPENCV_VERSION</code> during the CMake stage to specify the OpenCV version to be used. For example, </p><div class="fragment"><div class="line">build $ cmake -DUSE_OPENCV_VERSION=4.2.0 ..; make</div>
</div><!-- fragment --> <dl class="section note"><dt>Note</dt><dd>Users can specify the version of OpenCV with CMake macro <b>USE_OPENCV_VERSION</b> as required if needed, such as <code>cmake -DUSE_OPENCV_VERSION=3.4.3 ..</code>. However, high version OpenCV is always suggested. Some examples are only supported by high OpenCV version, such as <code>/cvflow_cnngen_samples/library/eazyai/unit_test/nn_arm_task/qrcode</code>, which requests <b>OpenCV &gt;= 3.4.3</b>. And please ensure that the EazyAI library and applications use the same OpenCV version.</dd></dl>
<p>In Linux SDK, it used OpenCV 4.5 for CVflow application, but it is not supported in Ubuntu 2004 if users want to match between CVflow and Simulator, users could install OpenCV 4.5 with PPA resource as follows. </p><div class="fragment"><div class="line">$ sudo add-apt-repository ppa:komfamedia/backports</div>
<div class="line">$ sudo apt-get update</div>
<div class="line">$ sudo apt-get install libopencv-dev</div>
</div><!-- fragment --><p>(Optional) The AC_INF is able to use a central processing unit (CPU) to do the forward inference (default setting). It also supports using a graphics processing unit (GPU) to perform forward inference. To enable this feature, users must install CUDA on the build machine. It is necessary to use the macro CUDA_VERSION to specify the CUDA version during the compiling of this EazyAI library. </p><div class="fragment"><div class="line">build $ cmake -DCUDA_VERSION=&lt;version&gt; ..; make</div>
</div><!-- fragment --> <dl class="section note"><dt>Note</dt><dd><ul>
<li>If users call the GPU on a no-GPU machine via AC_INF API, the AC_INF instance cannot be created successfully.</li>
<li>For more details on how to run GPU using AC_INF, refer to <a class="el" href="../../d3/d0c/page_lib_eazyai_doc.html#eazyai_simulator_components_net">3.2.5 ea_net</a>.</li>
<li>Since CNNGen toolchain 2.5.5.0 and 3.5.5.0, Ades will also benefit from GPU, and it is an alpha version, users can try it if needed.</li>
<li>Please refer to Acinference the section <b>10.2.3 Enable GPU</b> and Ades the section <b>10.3.3 Enable GPU</b> of the CNNGen sample package Doxygen for the supported CUDA versions.</li>
</ul>
</dd></dl>
<p>(Optional) Users can use the following command to remove ADES related support from the source code. This could be useful for the basic toolchian, which doesn't support ADES feature. </p><div class="fragment"><div class="line">build $ cmake -DDISABLE_ADES=Y ..; make</div>
</div><!-- fragment --><p>For how to compile the <b>test_eazyai</b> application, refer to <a class="el" href="../../d3/d0c/page_lib_eazyai_doc.html#eazyai_unit_test_simulator">6 EazyAI Simulator Unit Test</a>.</p>
<hr  />
<h2><a class="anchor" id="eazyai_simulator_components"></a>
3.2 Components</h2>
<h3><a class="anchor" id="eazyai_simulator_components_env"></a>
3.2.1 ea_env</h3>
<p><a class="el" href="../../dd/df6/group__eazyai-env-details.html">ea_env functions</a> initialize the necessary environment to use the CV features. <a class="el" href="../../dd/df6/group__eazyai-env-details.html#ga7199b3b2090a7bec0ed9186f0dbede98">ea_env_open()</a> should be called before the other APIs in EazyAI are called. <a class="el" href="../../dd/df6/group__eazyai-env-details.html#ga8018036e672c4e0668d1f7391a44bba8">ea_env_close()</a> should be called after the other APIs in EazyAI are called. </p><div class="fragment"><div class="line"><span class="keywordtype">int</span> features;</div>
<div class="line">rval = <a class="code" href="../../dd/df6/group__eazyai-env-details.html#ga7199b3b2090a7bec0ed9186f0dbede98">ea_env_open</a>(features);</div>
<div class="line"><a class="code" href="../../db/d66/group__eazyai-utils-details.html#ga0a17a3b00407cd9dea9800279c4511e2">ea_utils_env_callbacks_register</a>();</div>
<div class="line"><span class="comment">// ...</span></div>
<div class="line"><a class="code" href="../../dd/df6/group__eazyai-env-details.html#ga8018036e672c4e0668d1f7391a44bba8">ea_env_close</a>();</div>
</div><!-- fragment --><dl class="section note"><dt>Note</dt><dd><ul>
<li>The JPEG file mode needs OpenCV library to show network result.</li>
<li><a class="el" href="../../d5/d6a/group__eazyai-env-helper.html#gga6bfb42a512c69e1c2d8e316fba06f94aa4612f0c7ea29e1affc9fb7bf5444ba87">EA_ENV_ENABLE_IAV</a>, <a class="el" href="../../d5/d6a/group__eazyai-env-helper.html#gga6bfb42a512c69e1c2d8e316fba06f94aa19bed7f27d6c177249f7f1dc3b9e6b7e">EA_ENV_ENABLE_CAVALRY</a>, <a class="el" href="../../d5/d6a/group__eazyai-env-helper.html#gga6bfb42a512c69e1c2d8e316fba06f94aadcaae67ae37eb4dfcce8062bffb3e35f">EA_ENV_ENABLE_VPROC</a>, <a class="el" href="../../d5/d6a/group__eazyai-env-helper.html#gga6bfb42a512c69e1c2d8e316fba06f94aa3286920e729de702b99293cff9d63581">EA_ENV_ENABLE_NNCTRL</a>, <a class="el" href="../../d5/d6a/group__eazyai-env-helper.html#gga6bfb42a512c69e1c2d8e316fba06f94aa0c2038d05cd891ac7a4b0f9d49d86ff2">EA_ENV_ENABLE_OSD_VOUT</a>, <a class="el" href="../../d5/d6a/group__eazyai-env-helper.html#gga6bfb42a512c69e1c2d8e316fba06f94aa00ecf31ea9702567f4323bbb06c0d36b">EA_ENV_ENABLE_OSD_STREAM</a> are not supported on the simulator platform.</li>
</ul>
</dd>
<dd>
<ul>
<li><code>EA_ENV_ENABLE_OSD_JPEG</code> is deleted in <code>ea_env()</code> since version 0.5.0, but users can enable it with calling <a class="el" href="../../db/d66/group__eazyai-utils-details.html#ga0a17a3b00407cd9dea9800279c4511e2">ea_utils_env_callbacks_register()</a>.</li>
<li>Only when <a class="el" href="../../db/d66/group__eazyai-utils-details.html#ga0a17a3b00407cd9dea9800279c4511e2">ea_utils_env_callbacks_register()</a> is called, users can use <code>EA_JPEG_FOLDER</code> in Preprocessing modules.</li>
</ul>
</dd></dl>
<h3><a class="anchor" id="eazyai_simulator_components_tensor"></a>
3.2.2 ea_tensor</h3>
<p><a class="el" href="../../da/db2/group__eazyai-tensor-details.html">ea_tensor functions</a> provide interfaces for the tensor, which carries data in the data flow of a CV program. The tensor is a four-dimensional array with a shape in NxCxHxW order. This is not the same with EazyAI CVflow library; when creating a tensor, the memory is allocated from the heap. Users are not required to know the memory physical address or sync cache.</p><ul>
<li><a class="el" href="../../d9/d79/group__eazyai-tensor-helper.html#gga5955b4e1fe77a5bcecc29b8a8fc27e0eaf78efc1138d367b76600806ff62f1145">EA_MEM_HEAP</a> This is the type of memory allocated with malloc for common use. The tensor created by <a class="el" href="../../da/db2/group__eazyai-tensor-details.html#gabf2b83ac2d5ccc5275b21cec58aad817">ea_tensor_new()</a> or <a class="el" href="../../da/db2/group__eazyai-tensor-details.html#ga4dd5b497857e359afee9c3279d468730">ea_tensor_new_from_file()</a> uses this type of memory.</li>
</ul>
<dl class="section note"><dt>Note</dt><dd><a class="el" href="../../d9/d79/group__eazyai-tensor-helper.html#gga5955b4e1fe77a5bcecc29b8a8fc27e0ea7abef3bf8cd777d310cbddde7faf9788">EA_MEM_CAVALRY</a>, <a class="el" href="../../d9/d79/group__eazyai-tensor-helper.html#gga5955b4e1fe77a5bcecc29b8a8fc27e0eaba8edb59d72dee3f671da4d09a27e534">EA_MEM_IAV_DSP</a>, <a class="el" href="../../d9/d79/group__eazyai-tensor-helper.html#gga5955b4e1fe77a5bcecc29b8a8fc27e0eaff8582fd970539e8b1ab96e836c1cfc3">EA_MEM_IAV_ANON</a> are not supported on the simulator platform.</dd></dl>
<h3><a class="anchor" id="eazyai_simulator_components_img_resource"></a>
3.2.3 ea_img_resource</h3>
<p><a class="el" href="../../d9/d59/group__eazyai-img-resource-details.html">ea_img_resource functions</a> load image data in the format <a class="el" href="../../d9/d79/group__eazyai-tensor-helper.html#ga3ba09b564d11c6625e68723113aae4b4">ea_tensor_color_mode_e</a> from RAW binary files (<a class="el" href="../../df/d83/group__eazyai-img-resource-helper.html#gga869eb0ce6a6d02cdc89a81980b1b5538ad7c9ace25a3926fbae64690aa09240fa">EA_RAW_FILE</a> or <a class="el" href="../../df/d83/group__eazyai-img-resource-helper.html#gga869eb0ce6a6d02cdc89a81980b1b5538ad93386b1d035f6512933bd551833462f">EA_RAW_FILE_FOLDER</a>) or JPEG files (<a class="el" href="../../df/d83/group__eazyai-img-resource-helper.html#gga869eb0ce6a6d02cdc89a81980b1b5538a88382b9bca694ea58b0e342c6d938d77">EA_JPEG_FOLDER</a>). A new group of image data is loaded by each call of <a class="el" href="../../d9/d59/group__eazyai-img-resource-details.html#ga0f1539e9f7582c2b165dd066e17a4084">ea_img_resource_hold_data()</a>. <a class="el" href="../../d9/d59/group__eazyai-img-resource-details.html#ga02145c11afbfbf79731cb96d80a9395a">ea_img_resource_drop_data()</a> should be called the same number of times as <a class="el" href="../../d9/d59/group__eazyai-img-resource-details.html#ga0f1539e9f7582c2b165dd066e17a4084">ea_img_resource_hold_data()</a> is called to release the internal buffers. Usually, the image data from a JPEG file has the format of <a class="el" href="../../d9/d79/group__eazyai-tensor-helper.html#gga3ba09b564d11c6625e68723113aae4b4ac059f5fa5e339debad4cfec9d9c69903">EA_TENSOR_COLOR_MODE_BGR</a>. If the YUV NV12 data is loaded from a binary file, the Y data and the UV data are stored discontiguously in the memory; two tensors will be used to hold the image data. The Y data is stored in a tensor returned by <a class="el" href="../../d9/d59/group__eazyai-img-resource-details.html#ga0f1539e9f7582c2b165dd066e17a4084">ea_img_resource_hold_data()</a> and the UV data is stored in the tensor returned by <a class="el" href="../../da/db2/group__eazyai-tensor-details.html#gae4f62963248358bf70d26795c213ebb9" title="specially used for a tensor holding Y data, to which the related UV data has discontinuous address">ea_tensor_related()</a>.</p>
<ol type="1">
<li><p class="startli"><a class="el" href="../../df/d83/group__eazyai-img-resource-helper.html#gga869eb0ce6a6d02cdc89a81980b1b5538ad7c9ace25a3926fbae64690aa09240fa">EA_RAW_FILE</a></p>
<p class="startli">This type of image resource is created by a file path for reading one RAW binary file with a name in the format [N]x[C]x[H]x[W]_*.bin; for example, <code>1x3x480x640_dog.bin</code>. </p><div class="fragment"><div class="line"><a class="code" href="../../df/d83/group__eazyai-img-resource-helper.html#ga7a78f8fb1a7b1f5c417f07ffc4bc77b0">ea_img_resource_t</a> *img_resource;</div>
<div class="line"><span class="keywordtype">char</span> *file_path = <span class="stringliteral">&quot;/sdcard/mtcnn/in/1x3x480x640_face01.bin&quot;</span>;</div>
<div class="line">img_resource = <a class="code" href="../../d9/d59/group__eazyai-img-resource-details.html#ga5d110e8094f21624809e17a6044970dc">ea_img_resource_new</a>(<a class="code" href="../../df/d83/group__eazyai-img-resource-helper.html#gga869eb0ce6a6d02cdc89a81980b1b5538ad7c9ace25a3926fbae64690aa09240fa">EA_RAW_FILE</a>, file_path);</div>
<div class="line"><span class="comment">// ...</span></div>
<div class="line"><a class="code" href="../../d9/d59/group__eazyai-img-resource-details.html#ga986d6685a477134cab7f0df4d4f47b20">ea_img_resource_free</a>(img_resource);</div>
</div><!-- fragment --> <div class="fragment"><div class="line">ea_img_resource_data_t data;</div>
<div class="line"><span class="comment">// ...</span></div>
<div class="line"><a class="code" href="../../d9/d59/group__eazyai-img-resource-details.html#ga0f1539e9f7582c2b165dd066e17a4084">ea_img_resource_hold_data</a>(img_resource, &amp;data);</div>
<div class="line"><span class="comment">// ...</span></div>
<div class="line"><a class="code" href="../../d9/d59/group__eazyai-img-resource-details.html#ga02145c11afbfbf79731cb96d80a9395a">ea_img_resource_drop_data</a>(img_resource, &amp;data);</div>
</div><!-- fragment --></li>
<li><p class="startli"><a class="el" href="../../df/d83/group__eazyai-img-resource-helper.html#gga869eb0ce6a6d02cdc89a81980b1b5538ad93386b1d035f6512933bd551833462f">EA_RAW_FILE_FOLDER</a></p>
<p class="startli">This type of image resource is created by a folder path for reading each RAW binary file under the folder with a name in the format [N]x[C]x[H]x[W]_*.bin; for example, <code>1x3x480x640_dog.bin</code>. The data in every file will be returned by each call of <a class="el" href="../../d9/d59/group__eazyai-img-resource-details.html#ga0f1539e9f7582c2b165dd066e17a4084">ea_img_resource_hold_data()</a>. The reading order is decided by the Linux API <em>readdir()</em>. </p><div class="fragment"><div class="line"><a class="code" href="../../df/d83/group__eazyai-img-resource-helper.html#ga7a78f8fb1a7b1f5c417f07ffc4bc77b0">ea_img_resource_t</a> *img_resource;</div>
<div class="line"><span class="keywordtype">char</span> *folder_path = <span class="stringliteral">&quot;/sdcard/mtcnn/in/&quot;</span>;</div>
<div class="line">img_resource = <a class="code" href="../../d9/d59/group__eazyai-img-resource-details.html#ga5d110e8094f21624809e17a6044970dc">ea_img_resource_new</a>(<a class="code" href="../../df/d83/group__eazyai-img-resource-helper.html#gga869eb0ce6a6d02cdc89a81980b1b5538ad93386b1d035f6512933bd551833462f">EA_RAW_FILE_FOLDER</a>, folder_path);</div>
<div class="line"><span class="comment">// ...</span></div>
<div class="line"><a class="code" href="../../d9/d59/group__eazyai-img-resource-details.html#ga986d6685a477134cab7f0df4d4f47b20">ea_img_resource_free</a>(img_resource);</div>
</div><!-- fragment --> <div class="fragment"><div class="line">ea_img_resource_data_t data;</div>
<div class="line"><span class="comment">// ...</span></div>
<div class="line"><a class="code" href="../../d9/d59/group__eazyai-img-resource-details.html#ga0f1539e9f7582c2b165dd066e17a4084">ea_img_resource_hold_data</a>(img_resource, &amp;data);</div>
<div class="line"><span class="comment">// ...</span></div>
<div class="line"><a class="code" href="../../d9/d59/group__eazyai-img-resource-details.html#ga02145c11afbfbf79731cb96d80a9395a">ea_img_resource_drop_data</a>(img_resource, &amp;data);</div>
</div><!-- fragment --></li>
<li><p class="startli"><a class="el" href="../../df/d83/group__eazyai-img-resource-helper.html#gga869eb0ce6a6d02cdc89a81980b1b5538a88382b9bca694ea58b0e342c6d938d77">EA_JPEG_FOLDER</a></p>
<p class="startli">This type of image resource is created by a folder path for reading each *.jpg file under the folder. The data in every file will be returned by each call of <a class="el" href="../../d9/d59/group__eazyai-img-resource-details.html#ga0f1539e9f7582c2b165dd066e17a4084">ea_img_resource_hold_data()</a>. The reading order is decided by the Linux API <em>readdir()</em>. </p><div class="fragment"><div class="line"><a class="code" href="../../df/d83/group__eazyai-img-resource-helper.html#ga7a78f8fb1a7b1f5c417f07ffc4bc77b0">ea_img_resource_t</a> *img_resource;</div>
<div class="line"><span class="keywordtype">char</span> *folder_path = <span class="stringliteral">&quot;/sdcard/mtcnn/in/&quot;</span>;</div>
<div class="line">img_resource = <a class="code" href="../../d9/d59/group__eazyai-img-resource-details.html#ga5d110e8094f21624809e17a6044970dc">ea_img_resource_new</a>(<a class="code" href="../../df/d83/group__eazyai-img-resource-helper.html#gga869eb0ce6a6d02cdc89a81980b1b5538a88382b9bca694ea58b0e342c6d938d77">EA_JPEG_FOLDER</a>, folder_path);</div>
<div class="line"><span class="comment">// ...</span></div>
<div class="line"><a class="code" href="../../d9/d59/group__eazyai-img-resource-details.html#ga986d6685a477134cab7f0df4d4f47b20">ea_img_resource_free</a>(img_resource);</div>
</div><!-- fragment --> <div class="fragment"><div class="line">ea_img_resource_data_t data;</div>
<div class="line"><span class="comment">// ...</span></div>
<div class="line"><a class="code" href="../../d9/d59/group__eazyai-img-resource-details.html#ga0f1539e9f7582c2b165dd066e17a4084">ea_img_resource_hold_data</a>(img_resource, &amp;data);</div>
<div class="line"><span class="comment">// ...</span></div>
<div class="line"><a class="code" href="../../d9/d59/group__eazyai-img-resource-details.html#ga02145c11afbfbf79731cb96d80a9395a">ea_img_resource_drop_data</a>(img_resource, &amp;data);</div>
</div><!-- fragment --></li>
</ol>
<dl class="section note"><dt>Note</dt><dd><a class="el" href="../../df/d83/group__eazyai-img-resource-helper.html#gga869eb0ce6a6d02cdc89a81980b1b5538aab94b9ef7be96257f86f10f43612e6d5">EA_CANVAS</a>, <a class="el" href="../../df/d83/group__eazyai-img-resource-helper.html#gga869eb0ce6a6d02cdc89a81980b1b5538ab84822371c85938e7ddfe7a38d590d88">EA_CANVAS_GROUP</a>, <a class="el" href="../../df/d83/group__eazyai-img-resource-helper.html#gga869eb0ce6a6d02cdc89a81980b1b5538a2d73361d2497fca1edff280fadfaf2bc">EA_PYRAMID</a> are not supported on the simulator platform.</dd></dl>
<h3><a class="anchor" id="eazyai_simulator_components_preprocess"></a>
3.2.4 ea_preprocess</h3>
<p><a class="el" href="../../d1/d67/group__eazyai-preprocess-details.html">ea_preprocess functions</a> provide functions to perform image color convert, resize, and crop. The process is performed by the CPU device with the help of OpenvCV. If the user requires the inference result to be the same between the simulator platform and the CVflow platform, the OpenCV library version must be the same. Users can check the version of this library in the Linux SDK package under <code>&lt;user_path&gt;/ambarella/prebuild/oss/arm&lt;version&gt;/opencv/usr/lib</code>. There are limitations on each type of device. Refer to <a class="el" href="../../d1/d67/group__eazyai-preprocess-details.html">ea_preprocess functions</a> for the limitations. </p><dl class="section note"><dt>Note</dt><dd>On the simulator platform, <a class="el" href="../../d9/d79/group__eazyai-tensor-helper.html#gga2e3f04280863e7c873d05a7eb73a8a55a977de0245606a753c5511cff19c6287e">EA_CPU</a> is supported for preprocessing. <a class="el" href="../../d9/d79/group__eazyai-tensor-helper.html#gga2e3f04280863e7c873d05a7eb73a8a55a54ee6b194dc5690fac2c2bdb3f3f5562">EA_VP</a> and <a class="el" href="../../d9/d79/group__eazyai-tensor-helper.html#gga2e3f04280863e7c873d05a7eb73a8a55ab4cde2d3c5c333c54951307e338434cf">EA_DSP</a> are not supported.</dd></dl>
<ol type="1">
<li><p class="startli">Color convert:</p>
<p class="startli">Resize will be performed if the source size and the destination size are different.</p><ul>
<li>YUV NV12 to RGB or BGR <div class="fragment"><div class="line">ea_img_resource_data_t data;</div>
<div class="line"><span class="keywordtype">size_t</span> shape[] = {1, 3, 300, 300};</div>
<div class="line"><a class="code" href="../../d9/d79/group__eazyai-tensor-helper.html#ga2df9d3f13428a2486155ee1f330c1ed4">ea_tensor_t</a> *rgb_tensor = <a class="code" href="../../da/db2/group__eazyai-tensor-details.html#gabf2b83ac2d5ccc5275b21cec58aad817">ea_tensor_new</a>(<a class="code" href="../../d9/d79/group__eazyai-tensor-helper.html#ggae7f2cca4c1c06ac3685dbd6d93d8aaf2a134d76e333656b2d3a02e43b198df06a">EA_U8</a>, shape, 0);</div>
<div class="line"><a class="code" href="../../d9/d79/group__eazyai-tensor-helper.html#ga2df9d3f13428a2486155ee1f330c1ed4">ea_tensor_t</a> *bgr_tensor = <a class="code" href="../../da/db2/group__eazyai-tensor-details.html#gabf2b83ac2d5ccc5275b21cec58aad817">ea_tensor_new</a>(<a class="code" href="../../d9/d79/group__eazyai-tensor-helper.html#ggae7f2cca4c1c06ac3685dbd6d93d8aaf2a134d76e333656b2d3a02e43b198df06a">EA_U8</a>, shape, 0);</div>
<div class="line"><span class="comment">// ...</span></div>
<div class="line"><a class="code" href="../../d1/d67/group__eazyai-preprocess-details.html#ga565556c72e67622ff43979ef7eb4d01f">ea_cvt_color_resize</a>(data.tensor_group[0], rbg_tensor, <a class="code" href="../../d2/da6/group__eazyai-preprocess-helper.html#ggacf838ff025e07d2405d18f4d80494eb7a6e505ff310dfdc04463b8c03a9ee1429">EA_COLOR_YUV2RGB_NV12</a>, <a class="code" href="../../d9/d79/group__eazyai-tensor-helper.html#gga2e3f04280863e7c873d05a7eb73a8a55a977de0245606a753c5511cff19c6287e">EA_CPU</a>);</div>
<div class="line"><a class="code" href="../../d1/d67/group__eazyai-preprocess-details.html#ga565556c72e67622ff43979ef7eb4d01f">ea_cvt_color_resize</a>(data.tensor_group[0], bgr_tensor, <a class="code" href="../../d2/da6/group__eazyai-preprocess-helper.html#ggacf838ff025e07d2405d18f4d80494eb7a9587d53a90140ea1bba203e4b76c1f61">EA_COLOR_YUV2BGR_NV12</a>, <a class="code" href="../../d9/d79/group__eazyai-tensor-helper.html#gga2e3f04280863e7c873d05a7eb73a8a55a977de0245606a753c5511cff19c6287e">EA_CPU</a>);</div>
<div class="line"><span class="comment">// ...</span></div>
<div class="line"><a class="code" href="../../da/db2/group__eazyai-tensor-details.html#gaf483e043827cebdda5bbfab8264a58a8">ea_tensor_free</a>(rgb_tensor);</div>
<div class="line"><a class="code" href="../../da/db2/group__eazyai-tensor-details.html#gaf483e043827cebdda5bbfab8264a58a8">ea_tensor_free</a>(bgr_tensor);</div>
</div><!-- fragment --> * - RBG to BGR or BGR to RGB. <div class="fragment"><div class="line"><a class="code" href="../../d1/d67/group__eazyai-preprocess-details.html#ga565556c72e67622ff43979ef7eb4d01f">ea_cvt_color_resize</a>(rbg_tensor, bgr_tensor, <a class="code" href="../../d2/da6/group__eazyai-preprocess-helper.html#ggacf838ff025e07d2405d18f4d80494eb7a69f74586433b54a930607a3ffef92dde">EA_COLOR_RGB2BGR</a>, <a class="code" href="../../d9/d79/group__eazyai-tensor-helper.html#gga2e3f04280863e7c873d05a7eb73a8a55a977de0245606a753c5511cff19c6287e">EA_CPU</a>);</div>
<div class="line"><a class="code" href="../../d1/d67/group__eazyai-preprocess-details.html#ga565556c72e67622ff43979ef7eb4d01f">ea_cvt_color_resize</a>(bgr_tensor, rbg_tensor, <a class="code" href="../../d2/da6/group__eazyai-preprocess-helper.html#ggacf838ff025e07d2405d18f4d80494eb7adec3c4aa38f4ff47ebd830a9f29b1d7c">EA_COLOR_BGR2RGB</a>, <a class="code" href="../../d9/d79/group__eazyai-tensor-helper.html#gga2e3f04280863e7c873d05a7eb73a8a55a977de0245606a753c5511cff19c6287e">EA_CPU</a>);</div>
</div><!-- fragment --></li>
</ul>
</li>
<li><p class="startli">Crop:</p>
<p class="startli">Resize will be performed if the source size and the destination size are different.</p>
</li>
</ol>
<div class="fragment"><div class="line"><span class="keywordtype">size_t</span> shape[] = {1, 1, 224, 224};</div>
<div class="line">ea_roi_t roi = {100, 100, 200, 200};</div>
<div class="line"><a class="code" href="../../d9/d79/group__eazyai-tensor-helper.html#ga2df9d3f13428a2486155ee1f330c1ed4">ea_tensor_t</a> *scale_tensor = <a class="code" href="../../da/db2/group__eazyai-tensor-details.html#ga4dd5b497857e359afee9c3279d468730">ea_tensor_new_from_file</a>(<a class="code" href="../../d9/d79/group__eazyai-tensor-helper.html#ggae7f2cca4c1c06ac3685dbd6d93d8aaf2a134d76e333656b2d3a02e43b198df06a">EA_U8</a>, shape, RAW_file_path);</div>
<div class="line"><a class="code" href="../../d1/d67/group__eazyai-preprocess-details.html#ga82e38bf6b45b39114c964a3f13a7f150">ea_crop_resize</a>(&amp;data.tensor_group[0], 1, &amp;scale_tensor, 1, &amp;roi, <a class="code" href="../../d9/d79/group__eazyai-tensor-helper.html#gga3ba09b564d11c6625e68723113aae4b4ae790cff8c2691ad3e7dde66e5b457c23">EA_TENSOR_COLOR_MODE_RGB</a>, <a class="code" href="../../d9/d79/group__eazyai-tensor-helper.html#gga2e3f04280863e7c873d05a7eb73a8a55a977de0245606a753c5511cff19c6287e">EA_CPU</a>);</div>
</div><!-- fragment --> <dl class="section note"><dt>Note</dt><dd><a class="el" href="../../d1/d67/group__eazyai-preprocess-details.html#ga82e38bf6b45b39114c964a3f13a7f150">ea_crop_resize</a> does not support <a class="el" href="../../d2/da6/group__eazyai-preprocess-helper.html#ggacf838ff025e07d2405d18f4d80494eb7afd14c83fb6c6fb65d1a231b8b1f6be79">EA_COLOR_TRANSPOSE</a>.</dd></dl>
<p>If only resize is required, use NULL as ::ea_roi_t: </p><div class="fragment"><div class="line"><span class="keywordtype">size_t</span> shape[] = {1, 1, 224, 224};</div>
<div class="line"><a class="code" href="../../d9/d79/group__eazyai-tensor-helper.html#ga2df9d3f13428a2486155ee1f330c1ed4">ea_tensor_t</a> *scale_tensor = <a class="code" href="../../da/db2/group__eazyai-tensor-details.html#ga4dd5b497857e359afee9c3279d468730">ea_tensor_new_from_file</a>(<a class="code" href="../../d9/d79/group__eazyai-tensor-helper.html#ggae7f2cca4c1c06ac3685dbd6d93d8aaf2a134d76e333656b2d3a02e43b198df06a">EA_U8</a>, shape, RAW_file_path);</div>
<div class="line"><a class="code" href="../../d1/d67/group__eazyai-preprocess-details.html#ga82e38bf6b45b39114c964a3f13a7f150">ea_crop_resize</a>(&amp;data.tensor_group[0], 1, &amp;scale_tensor, 1, NULL, <a class="code" href="../../d9/d79/group__eazyai-tensor-helper.html#gga3ba09b564d11c6625e68723113aae4b4ae790cff8c2691ad3e7dde66e5b457c23">EA_TENSOR_COLOR_MODE_RGB</a>, <a class="code" href="../../d9/d79/group__eazyai-tensor-helper.html#gga2e3f04280863e7c873d05a7eb73a8a55a977de0245606a753c5511cff19c6287e">EA_CPU</a>);</div>
</div><!-- fragment --> <dl class="section note"><dt>Note</dt><dd><ul>
<li><a class="el" href="../../d1/d67/group__eazyai-preprocess-details.html#ga82e38bf6b45b39114c964a3f13a7f150">ea_crop_resize</a> does not support batch mode on the simlator platform.</li>
<li><a class="el" href="../../d1/d67/group__eazyai-preprocess-details.html#ga82e38bf6b45b39114c964a3f13a7f150">ea_crop_resize</a> does not support <a class="el" href="../../d9/d79/group__eazyai-tensor-helper.html#gga3ba09b564d11c6625e68723113aae4b4a2c504ada3e5bd7e9b1d2dbee64b5b40a">EA_TENSOR_COLOR_MODE_YUV_NV12</a>.</li>
</ul>
</dd></dl>
<h3><a class="anchor" id="eazyai_simulator_components_net"></a>
3.2.5 ea_net</h3>
<p><a class="el" href="../../d9/d87/group__eazyai-net-details.html">ea_net functions</a> provide functions to perform network forward inference on the simulator platform using the ADES or AC_INF API.</p><ul>
<li>For the AC_INF API, the network model and converted weights are stored in the parser output folder. The <code>network_name.json</code> is regarded as the structure file of the networks. This file defines the relations between each node and the data format, dimension, and so on for each node. The weights binary files and the other parameters of the network are also stored in the parser output folder. The path of these binary files are defined in <code>network_name.json</code>. Users must keep the parser output folder in its original hierarchy.</li>
<li>For the ADES API, users will require the output of ades_autogen.py. The <code>network_name_ades.cmd</code> file path must be filled to the <code>ades_cmd_file</code> parameter of <a class="el" href="../../de/d43/group__eazyai-net-helper.html#gaf7b37b09e0acd75f30eae4956cacb4b2">ea_net_t</a>. Users must keep the ADES output folder in its original hierarchy because the weights and other network parameters are stored in the ADES output folder. The path of these binary files are defined in <code>network_name_ades.cmd</code>. The <code>network_name.json</code> is also required because it provides the input / output (I/O) port information of this network.</li>
</ul>
<p>The tensors that hold the network I/O buffers can be fetched by <a class="el" href="../../d9/d87/group__eazyai-net-details.html#ga89291c3e32b3f08007deb053e6a68b38">ea_net_input()</a>/<a class="el" href="../../d9/d87/group__eazyai-net-details.html#ga8110e8c888c6a6acc0fdbe553b440de7">ea_net_output()</a>. The input tensors can be used to accept the input data, for example, as the <em>dst</em> in <a class="el" href="../../d1/d67/group__eazyai-preprocess-details.html#ga565556c72e67622ff43979ef7eb4d01f">ea_cvt_color_resize()</a>. The output tensors can be used to read the inference result.</p><ol type="1">
<li>Load the model and call AC_INF API. <div class="fragment"><div class="line"><span class="keywordtype">char</span> *model_path = <span class="stringliteral">&quot;/path/network_name.json&quot;</span></div>
<div class="line">ea_net_params_t net_param;</div>
<div class="line">net_param.acinf_gpu_id = -1; (Specify the GPU <span class="keywordtype">id</span> to use, -1 is CPU)</div>
<div class="line"><a class="code" href="../../de/d43/group__eazyai-net-helper.html#gaf7b37b09e0acd75f30eae4956cacb4b2">ea_net_t</a> *net = <a class="code" href="../../d9/d87/group__eazyai-net-details.html#ga6b5eaf1b3100e7356aa04dca2b736b7c">ea_net_new</a>(&amp;net_param);</div>
<div class="line"><a class="code" href="../../d9/d87/group__eazyai-net-details.html#gaea0c0ae54f20344fc21b9ee5fdd59df0">ea_net_config_input</a>(net, <span class="stringliteral">&quot;input&quot;</span>);</div>
<div class="line"><a class="code" href="../../d9/d87/group__eazyai-net-details.html#gaf0631da862b369b7ab6cdbefee343d5b">ea_net_config_output</a>(net, <span class="stringliteral">&quot;output&quot;</span>);</div>
<div class="line"><a class="code" href="../../d9/d87/group__eazyai-net-details.html#ga59a08912bda9753fba38f19d81f8d574">ea_net_load</a>(net, <a class="code" href="../../de/d43/group__eazyai-net-helper.html#gga101ce817045a507d2f99f05e6a410cb1a042d99460389b45492f889b4c4931c06">EA_NET_LOAD_FILE</a>, (<span class="keywordtype">void</span> *)model_path, 1);</div>
<div class="line">input_tensor = <a class="code" href="../../d9/d87/group__eazyai-net-details.html#ga89291c3e32b3f08007deb053e6a68b38">ea_net_input</a>(net, <span class="stringliteral">&quot;input&quot;</span>);</div>
<div class="line">output_tensor = <a class="code" href="../../d9/d87/group__eazyai-net-details.html#ga8110e8c888c6a6acc0fdbe553b440de7">ea_net_output</a>(net, <span class="stringliteral">&quot;output&quot;</span>);</div>
</div><!-- fragment --> <dl class="section note"><dt>Note</dt><dd>If users call the GPU on a no-GPU machine via AC_INF API, the AC_INF instance cannot be created successfully. If only the CPU is required to perform the forward inference, set acinf_gpu_id as -1. For more information on how to compile the EazyAI library with CUDA support, refer to <a class="el" href="../../d3/d0c/page_lib_eazyai_doc.html#eazyai_simulator_build_compile">3.1.2 Compile</a>.</dd></dl>
</li>
<li>Load the model and call the ADES API. <div class="fragment"><div class="line"><span class="keywordtype">char</span> *model_path = <span class="stringliteral">&quot;/path_to/network_name.json&quot;</span></div>
<div class="line">ea_net_params_t net_param;</div>
<div class="line">net_param.ades_cmd_file = <span class="stringliteral">&quot;/path_to/network_name_ades.cmd&quot;</span>;</div>
<div class="line"><a class="code" href="../../de/d43/group__eazyai-net-helper.html#gaf7b37b09e0acd75f30eae4956cacb4b2">ea_net_t</a> *net = <a class="code" href="../../d9/d87/group__eazyai-net-details.html#ga6b5eaf1b3100e7356aa04dca2b736b7c">ea_net_new</a>(&amp;net_param);</div>
<div class="line"><a class="code" href="../../d9/d87/group__eazyai-net-details.html#gaea0c0ae54f20344fc21b9ee5fdd59df0">ea_net_config_input</a>(net, <span class="stringliteral">&quot;input&quot;</span>);</div>
<div class="line"><a class="code" href="../../d9/d87/group__eazyai-net-details.html#gaf0631da862b369b7ab6cdbefee343d5b">ea_net_config_output</a>(net, <span class="stringliteral">&quot;output&quot;</span>);</div>
<div class="line"><a class="code" href="../../d9/d87/group__eazyai-net-details.html#ga59a08912bda9753fba38f19d81f8d574">ea_net_load</a>(net, <a class="code" href="../../de/d43/group__eazyai-net-helper.html#gga101ce817045a507d2f99f05e6a410cb1a042d99460389b45492f889b4c4931c06">EA_NET_LOAD_FILE</a>, (<span class="keywordtype">void</span> *)model_path, 1);</div>
<div class="line">input_tensor = <a class="code" href="../../d9/d87/group__eazyai-net-details.html#ga89291c3e32b3f08007deb053e6a68b38">ea_net_input</a>(net, <span class="stringliteral">&quot;input&quot;</span>);</div>
<div class="line">output_tensor = <a class="code" href="../../d9/d87/group__eazyai-net-details.html#ga8110e8c888c6a6acc0fdbe553b440de7">ea_net_output</a>(net, <span class="stringliteral">&quot;output&quot;</span>);</div>
</div><!-- fragment --></li>
<li>Forward. <div class="fragment"><div class="line"><a class="code" href="../../d1/d67/group__eazyai-preprocess-details.html#ga565556c72e67622ff43979ef7eb4d01f">ea_cvt_color_resize</a>(img_tensors[0], input_tensor, <a class="code" href="../../d2/da6/group__eazyai-preprocess-helper.html#ggacf838ff025e07d2405d18f4d80494eb7adec3c4aa38f4ff47ebd830a9f29b1d7c">EA_COLOR_BGR2RGB</a>, <a class="code" href="../../d9/d79/group__eazyai-tensor-helper.html#gga2e3f04280863e7c873d05a7eb73a8a55a977de0245606a753c5511cff19c6287e">EA_CPU</a>); (optional)</div>
<div class="line"><a class="code" href="../../d9/d87/group__eazyai-net-details.html#ga00c836da74a34494e7c859ed60d9875f">ea_net_forward</a>(net, 1);</div>
</div><!-- fragment --></li>
<li>Read inference result. <div class="fragment"><div class="line">bbox_addr = (<span class="keywordtype">float</span> *)<a class="code" href="../../da/db2/group__eazyai-tensor-details.html#gabb70502d92d6eddb96124b51c695c26f">ea_tensor_data</a>(output_tensor);</div>
</div><!-- fragment --> </li>
</ol>
<h3><a class="anchor" id="eazyai_simulator_components_display"></a>
3.2.6 ea_display</h3>
<p><a class="el" href="../../d2/dd8/group__eazyai-display-details.html">ea_display functions</a> provide functions to draw detection results on the JPEG image in the form of bounding boxes, textboxes, segmentations, and grey images. Along with the parameters in the ea_display_set_*() functions, the other parameters of drawing content can be set by changing the common parameters returned by <a class="el" href="../../d2/dd8/group__eazyai-display-details.html#ga4c54d8c74192837262efe0a75c4bdf7f">ea_display_obj_params()</a>. </p><div class="fragment"><div class="line"><a class="code" href="../../df/d83/group__eazyai-img-resource-helper.html#ga7a78f8fb1a7b1f5c417f07ffc4bc77b0">ea_img_resource_t</a> *img_resource = <a class="code" href="../../d9/d59/group__eazyai-img-resource-details.html#ga5d110e8094f21624809e17a6044970dc">ea_img_resource_new</a>(<a class="code" href="../../df/d83/group__eazyai-img-resource-helper.html#gga869eb0ce6a6d02cdc89a81980b1b5538a88382b9bca694ea58b0e342c6d938d77">EA_JPEG_FOLDER</a>, (<span class="keywordtype">void</span> *)<span class="stringliteral">&quot;/sdcard/in/&quot;</span>);</div>
<div class="line"><span class="comment">// ...</span></div>
<div class="line"><a class="code" href="../../d1/d5c/group__eazyai-display-helper.html#ga6a3a6e2e3f892e912b296b52a2cf0d37">ea_display_t</a> *display = <a class="code" href="../../d2/dd8/group__eazyai-display-details.html#gad23209ebb70eb39abf454106a2367a8b">ea_display_new</a>(<a class="code" href="../../d1/d5c/group__eazyai-display-helper.html#gga6dd902e4319e44983fc40c9302d861c5a4aba6e29e43651b76e2e373c4e7d6838">EA_DISPLAY_JPEG</a>, <a class="code" href="../../d9/d79/group__eazyai-tensor-helper.html#gga3ba09b564d11c6625e68723113aae4b4ac059f5fa5e339debad4cfec9d9c69903">EA_TENSOR_COLOR_MODE_BGR</a>, <a class="code" href="../../d1/d5c/group__eazyai-display-helper.html#gga006e4c6e8e51bca579fde2eeef724dc9a6581a829e8436c0a00754957ba35e844">EA_DISPLAY_BBOX_TEXTBOX</a>, (<span class="keywordtype">void</span> *)<span class="stringliteral">&quot;/sdcard/out/&quot;</span>);</div>
<div class="line">ea_img_resource_data_t data;</div>
<div class="line"><span class="comment">// ...</span></div>
<div class="line"><a class="code" href="../../d9/d59/group__eazyai-img-resource-details.html#ga0f1539e9f7582c2b165dd066e17a4084">ea_img_resource_hold_data</a>(img_resource, &amp;data);</div>
<div class="line"><span class="comment">// ...</span></div>
<div class="line"><a class="code" href="../../d2/dd8/group__eazyai-display-details.html#gad7f1f719224c7e03a0ed9ba69d0650de">ea_display_refresh</a>(display, (<span class="keywordtype">void</span> *)data.tensor_group[0]);</div>
</div><!-- fragment --> <dl class="section note"><dt>Note</dt><dd><a class="el" href="../../d1/d5c/group__eazyai-display-helper.html#gga6dd902e4319e44983fc40c9302d861c5a52139433ee975cb1bef7d9b68e248e1a">EA_DISPLAY_STREAM</a>, <a class="el" href="../../d1/d5c/group__eazyai-display-helper.html#gga6dd902e4319e44983fc40c9302d861c5a183a9f81ecfc42fbffb966db15fab538">EA_DISPLAY_STREAM_SERVER</a>, <a class="el" href="../../d1/d5c/group__eazyai-display-helper.html#gga6dd902e4319e44983fc40c9302d861c5a2a99b87ce0093dd1763db95a12e4c731">EA_DISPLAY_STREAM_CLIENT</a>, and <a class="el" href="../../d1/d5c/group__eazyai-display-helper.html#gga6dd902e4319e44983fc40c9302d861c5a120eb3f9b02994096dfb66f2cc4489e6">EA_DISPLAY_VOUT</a> are not supported on simulator platform. <a class="el" href="../../d1/d5c/group__eazyai-display-helper.html#gga6dd902e4319e44983fc40c9302d861c5a4aba6e29e43651b76e2e373c4e7d6838">EA_DISPLAY_JPEG</a> feature depends on OpenCV.</dd></dl>
<h3><a class="anchor" id="eazyai_simulator_components_log"></a>
3.2.7 ea_log</h3>
<p><a class="el" href="../../d4/d96/group__eazyai-log-helper.html">ea_log macros, enumerations and structures</a> provide macros to control the output of log messages of each individual source code file.</p><ol type="1">
<li><p class="startli"><a class="el" href="../../d4/d96/group__eazyai-log-helper.html#gabf4ab7c2d5fe62deac5689fad8a8296e">EA_LOG_DECLARE_LOCAL</a></p>
<p class="startli">This macro is used to declare the log level variable in each source code file. </p><div class="fragment"><div class="line"><a class="code" href="../../d4/d96/group__eazyai-log-helper.html#gabf4ab7c2d5fe62deac5689fad8a8296e">EA_LOG_DECLARE_LOCAL</a>(<a class="code" href="../../d4/d96/group__eazyai-log-helper.html#gga35915c50caa86eeec9606ef087bec6b5a11be6a6ac457a87220a879b8c4050ce6">EA_LOG_LEVEL_NOTICE</a>);</div>
</div><!-- fragment --></li>
<li><p class="startli"><a class="el" href="../../d4/d96/group__eazyai-log-helper.html#ga5994ff775af94256896b8cf8793e4275">EA_LOG_GET_LOCAL</a></p>
<p class="startli">This macro is used to get the current log level in a source code file scope. </p><div class="fragment"><div class="line">log_level = <a class="code" href="../../d4/d96/group__eazyai-log-helper.html#ga5994ff775af94256896b8cf8793e4275">EA_LOG_GET_LOCAL</a>();</div>
</div><!-- fragment --></li>
<li><p class="startli"><a class="el" href="../../d4/d96/group__eazyai-log-helper.html#ga4da64e8e9357c35fd8e1be1252a8bfe1">EA_LOG_SET_LOCAL</a></p>
<p class="startli">This macro is used to change the log level in a source code file scope. </p><div class="fragment"><div class="line"><a class="code" href="../../d4/d96/group__eazyai-log-helper.html#ga4da64e8e9357c35fd8e1be1252a8bfe1">EA_LOG_SET_LOCAL</a>(params-&gt;log_level);</div>
</div><!-- fragment --></li>
<li><p class="startli"><a class="el" href="../../d4/d96/group__eazyai-log-helper.html#ga14964c495beb6c2c9af8a952edd3a615">EA_LOG_GET_GLOBAL</a></p>
<p class="startli">This macro is used to get the current log level in the global scope. </p><div class="fragment"><div class="line">log_level = <a class="code" href="../../d4/d96/group__eazyai-log-helper.html#ga14964c495beb6c2c9af8a952edd3a615">EA_LOG_GET_GLOBAL</a>();</div>
</div><!-- fragment --></li>
<li><p class="startli"><a class="el" href="../../d4/d96/group__eazyai-log-helper.html#ga46c9c6107717fa7b5ad1965d6e40a35e">EA_LOG_SET_GLOBAL</a></p>
<p class="startli">This macro is used to change the log level in the global scope. By default, it is <a class="el" href="../../d4/d96/group__eazyai-log-helper.html#gga35915c50caa86eeec9606ef087bec6b5a767b83cdc86110c41e93c104b2a9f8f2">EA_LOG_LEVEL_INVALID</a>. After it is set with a valid value, all logs with lower criticality will not output. </p><div class="fragment"><div class="line"><a class="code" href="../../d4/d96/group__eazyai-log-helper.html#ga46c9c6107717fa7b5ad1965d6e40a35e">EA_LOG_SET_GLOBAL</a>(params-&gt;log_level);</div>
</div><!-- fragment --></li>
<li><p class="startli"><a class="el" href="../../d4/d96/group__eazyai-log-helper.html#gade967f14003f29f4b1b954c96cddbcb3">EA_LOG_VERBOSE</a>, <a class="el" href="../../d4/d96/group__eazyai-log-helper.html#gadb50ef003362974157bd5ba706c600e2">EA_LOG_DEBUG</a>, <a class="el" href="../../d4/d96/group__eazyai-log-helper.html#gadff5cc953d26853718e397ac1be6ef8e">EA_LOG_NOTICE</a>, <a class="el" href="../../d4/d96/group__eazyai-log-helper.html#ga90cd35cff1406b5b8f71c2a9a108bd6d">EA_LOG_ERROR</a></p>
<p class="startli">These macros are used to output the log message when the criticality is allowed by the log level. </p><div class="fragment"><div class="line"><a class="code" href="../../d4/d96/group__eazyai-log-helper.html#gadff5cc953d26853718e397ac1be6ef8e">EA_LOG_NOTICE</a>(<span class="stringliteral">&quot;retinaface_deinit\n&quot;</span>);</div>
</div><!-- fragment --></li>
<li><p class="startli"><a class="el" href="../../d4/d96/group__eazyai-log-helper.html#gac2958cac7dd6dde4da6483e260d982c0">EA_LOG_ASSERT</a></p>
<p class="startli">This macro can be used to check a statement. If the statement is false, the trace of line, function, and file will be printed. </p><div class="fragment"><div class="line"><a class="code" href="../../d4/d96/group__eazyai-log-helper.html#gac2958cac7dd6dde4da6483e260d982c0">EA_LOG_ASSERT</a>(is_true());</div>
</div><!-- fragment --></li>
</ol>
<h3><a class="anchor" id="eazyai_simulator_simulator_components_utils"></a>
3.2.8 ea_utils</h3>
<p><a class="el" href="../../db/d66/group__eazyai-utils-details.html">ea_utils functions</a> provide utilities such as NMS calculation and fps statistic, as well as some macros to shorten code.</p><ol type="1">
<li>Macros used in <em> do {} while (0); </em>:<ul>
<li><p class="startli"><a class="el" href="../../d4/d96/group__eazyai-log-helper.html#gabfe3786470deb087a8c51c3516fa0a3e">RVAL_OK</a></p>
<p class="startli">This macro can be used to check the return value of a function if a negative returned value indicates failure. If a negative value is returned, it will break <em> do {} while (0); </em>, and print the error trace of line, function, and file. </p><div class="fragment"><div class="line"><span class="keywordtype">int</span> rval = 0; <span class="comment">// checked by RVAL_OK()</span></div>
<div class="line"> </div>
<div class="line"><span class="keywordflow">do</span> {</div>
<div class="line">    <a class="code" href="../../d4/d96/group__eazyai-log-helper.html#gabfe3786470deb087a8c51c3516fa0a3e">RVAL_OK</a>(function_return_int());</div>
<div class="line">    <span class="comment">// ...</span></div>
<div class="line">} <span class="keywordflow">while</span> (0);</div>
<div class="line"> </div>
<div class="line"><span class="keywordflow">return</span> rval;</div>
</div><!-- fragment --></li>
<li><p class="startli"><a class="el" href="../../d4/d96/group__eazyai-log-helper.html#gaed0d12d2c797fd90e7564ae681660a4f">RVAL_ASSERT</a></p>
<p class="startli">This macro can be used to check a statement. If the statement is false, it will break <em> do {} while (0); </em>, and print the error trace of line, function, and file. </p><div class="fragment"><div class="line"><span class="keywordtype">int</span> rval = 0; <span class="comment">// checked by RVAL_OK()</span></div>
<div class="line"> </div>
<div class="line"><span class="keywordflow">do</span> {</div>
<div class="line">    <a class="code" href="../../d4/d96/group__eazyai-log-helper.html#gaed0d12d2c797fd90e7564ae681660a4f">RVAL_ASSERT</a>(is_true());</div>
<div class="line">    <span class="comment">// ...</span></div>
<div class="line">} <span class="keywordflow">while</span> (0);</div>
<div class="line"> </div>
<div class="line"><span class="keywordflow">return</span> rval;</div>
</div><!-- fragment --></li>
<li><a class="el" href="../../d4/d96/group__eazyai-log-helper.html#gac09b089a2810e3f290277603c1ffe0e7">RVAL_BREAK</a> This macro is used to make further check of a returned negative value after a loop inside <em> do {} while (0); </em> is broken. If the return value is negative, it will perform a further break. <div class="fragment"><div class="line"><span class="keywordtype">int</span> rval = 0; <span class="comment">// checked by RVAL_OK()</span></div>
<div class="line"> </div>
<div class="line"><span class="keywordflow">do</span> {</div>
<div class="line">    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; N; i++) {</div>
<div class="line">        <a class="code" href="../../d4/d96/group__eazyai-log-helper.html#gabfe3786470deb087a8c51c3516fa0a3e">RVAL_OK</a>(function_return_int());</div>
<div class="line">        <span class="comment">// ...</span></div>
<div class="line">    }</div>
<div class="line">    <a class="code" href="../../d4/d96/group__eazyai-log-helper.html#gac09b089a2810e3f290277603c1ffe0e7">RVAL_BREAK</a>();</div>
<div class="line">    <span class="comment">// ...</span></div>
<div class="line">} <span class="keywordflow">while</span> (0);</div>
<div class="line"> </div>
<div class="line"><span class="keywordflow">return</span> rval;</div>
</div><!-- fragment --></li>
</ul>
</li>
<li>Macros used to measure execution time:<ul>
<li><p class="startli"><a class="el" href="../../d4/d96/group__eazyai-log-helper.html#ga950cfae72357fe74ae5a56666c95295a">EA_MEASURE_TIME_DECLARE</a></p>
<p class="startli">This macro is used to declare a static value to record time. It can be placed in a source code file outside of functions to be seen by all functions, or inside a function for limited visibility. </p><div class="fragment"><div class="line"><a class="code" href="../../d4/d96/group__eazyai-log-helper.html#ga950cfae72357fe74ae5a56666c95295a">EA_MEASURE_TIME_DECLARE</a>();</div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">int</span> cv_env_init(live_ctx_t *live_ctx, live_params_t *params)</div>
<div class="line">{</div>
<div class="line"><span class="comment">// ...</span></div>
<div class="line">}</div>
</div><!-- fragment --> <div class="fragment"><div class="line"><span class="keywordtype">int</span> <span class="keyword">function</span>()</div>
<div class="line">{</div>
<div class="line">    <a class="code" href="../../d4/d96/group__eazyai-log-helper.html#ga950cfae72357fe74ae5a56666c95295a">EA_MEASURE_TIME_DECLARE</a>();</div>
<div class="line">}</div>
</div><!-- fragment --></li>
<li><p class="startli"><a class="el" href="../../d4/d96/group__eazyai-log-helper.html#ga53f7894cbcfdaf96177412ddee0de90d">EA_MEASURE_TIME_START</a></p>
<p class="startli">This macro is placed at the start point of a time measure.</p>
</li>
<li><p class="startli"><a class="el" href="../../d4/d96/group__eazyai-log-helper.html#gaa9af1f313445f2443a9ccca541294264">EA_MEASURE_TIME_END</a></p>
<p class="startli">This macro is placed at the end point of a time measure. The time message will be printed. </p><div class="fragment"><div class="line"><a class="code" href="../../d4/d96/group__eazyai-log-helper.html#ga950cfae72357fe74ae5a56666c95295a">EA_MEASURE_TIME_DECLARE</a>();</div>
<div class="line"><span class="comment">// ...</span></div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">int</span> live_run_loop(live_ctx_t *live_ctx, live_params_t *params)</div>
<div class="line">{</div>
<div class="line">    <span class="keywordtype">int</span> rval = 0;</div>
<div class="line">    <span class="comment">// ...</span></div>
<div class="line">    <span class="keywordflow">do</span> {</div>
<div class="line">        <span class="comment">// ...</span></div>
<div class="line">        <a class="code" href="../../d4/d96/group__eazyai-log-helper.html#ga53f7894cbcfdaf96177412ddee0de90d">EA_MEASURE_TIME_START</a>();</div>
<div class="line">        <a class="code" href="../../d4/d96/group__eazyai-log-helper.html#gabfe3786470deb087a8c51c3516fa0a3e">RVAL_OK</a>(retinaface_vp_forward(&amp;live_ctx-&gt;retinaface));</div>
<div class="line">        <span class="comment">// ...</span></div>
<div class="line">        <a class="code" href="../../d4/d96/group__eazyai-log-helper.html#gaa9af1f313445f2443a9ccca541294264">EA_MEASURE_TIME_END</a>(<span class="stringliteral">&quot;process time: &quot;</span>);</div>
<div class="line">        <span class="comment">// ...</span></div>
<div class="line">    } <span class="keywordflow">while</span> (0);</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">return</span> rval;</div>
<div class="line">}</div>
</div><!-- fragment --></li>
</ul>
</li>
<li><p class="startli">Statistic fps of loops:</p>
<p class="startli"><a class="el" href="../../db/d66/group__eazyai-utils-details.html#ga11b8fe7e7036d5a403f1d9bc65fb1774">ea_calc_fps()</a> can be used to get statistic fps of running loops by setting how many loops should be used to get the statistic. During the statistic, <a class="el" href="../../db/d66/group__eazyai-utils-details.html#ga11b8fe7e7036d5a403f1d9bc65fb1774">ea_calc_fps()</a> returns a negative value. When a statistic is finished, a valid fps value will be returned and a new statistic will start. </p><div class="fragment"><div class="line"><span class="keyword">static</span> <span class="keywordtype">int</span> live_run_loop(live_ctx_t *live_ctx, live_params_t *params)</div>
<div class="line">{</div>
<div class="line">    <span class="keywordtype">int</span> rval = 0;</div>
<div class="line">    ea_calc_fps_ctx_t calc_fps_ctx;</div>
<div class="line">    <span class="keywordtype">float</span> fps;</div>
<div class="line"> </div>
<div class="line">    memset(&amp;calc_fps_ctx, 0, <span class="keyword">sizeof</span>(ea_calc_fps_ctx_t));</div>
<div class="line">    calc_fps_ctx.count_period = 100;</div>
<div class="line">    <span class="comment">// ...</span></div>
<div class="line">    <span class="keywordflow">do</span> {</div>
<div class="line">        <span class="comment">// ...</span></div>
<div class="line">        fps = <a class="code" href="../../db/d66/group__eazyai-utils-details.html#ga11b8fe7e7036d5a403f1d9bc65fb1774">ea_calc_fps</a>(&amp;calc_fps_ctx);</div>
<div class="line">        <span class="keywordflow">if</span> (fps &gt; 0) {</div>
<div class="line">            <a class="code" href="../../d4/d96/group__eazyai-log-helper.html#gadff5cc953d26853718e397ac1be6ef8e">EA_LOG_NOTICE</a>(<span class="stringliteral">&quot;fps %.1f\n&quot;</span>, fps);</div>
<div class="line">        }</div>
<div class="line">    } <span class="keywordflow">while</span> (0);</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">return</span> rval;</div>
<div class="line">}</div>
</div><!-- fragment --></li>
<li><p class="startli">NMS</p>
<p class="startli"><a class="el" href="../../db/d66/group__eazyai-utils-details.html#ga4dce0d08263864a05033381eccd3ce6d">ea_nms()</a> can be used to perform NMS calculation on the data in the format of [[x1, y1, x2, y2, score], ...]. If there is data related to each item in [[x1, y1, x2, y2, score], ...], for example, the landmarks output of a face detection network, <a class="el" href="../../db/d66/group__eazyai-utils-details.html#ga4dce0d08263864a05033381eccd3ce6d">ea_nms()</a> can be used to manage them together. The outputs will be sorted in the score order. </p><div class="fragment"><div class="line"><a class="code" href="../../db/d66/group__eazyai-utils-details.html#ga4dce0d08263864a05033381eccd3ce6d">ea_nms</a>(x1y1x2y2score, NULL, 0, valid_count, nms_threshold, use_iou_min, top_k,</div>
<div class="line">    nms_x1y1x2y2score, NULL, &amp;nms_valid_count);</div>
</div><!-- fragment --> <div class="fragment"><div class="line"><a class="code" href="../../db/d66/group__eazyai-utils-details.html#ga4dce0d08263864a05033381eccd3ce6d">ea_nms</a>(bbox_and_score, landmarks, <span class="keyword">sizeof</span>(<span class="keywordtype">float</span>) * 10, valid_det_num, nms_threshold, use_iou_min, top_k,</div>
<div class="line">    nms_bbox_and_score, nms_landmarks, &amp;nms_valid_det_num);</div>
</div><!-- fragment --></li>
</ol>
<hr  />
<h1><a class="anchor" id="eazyai_arm_postprocess"></a>
4 EazyAI Arm Postprocess</h1>
<p>The EazyAI Arm Postprocess library assembles public network postprocessing realization on Arm, such as SSD, YOLOV5, and so on.</p>
<h2><a class="anchor" id="eazyai_arm_postprocess_build"></a>
4.1 Build</h2>
<p>The EazyAI Arm Postprocess library is based on the EazyAI Library. Users should first enable the EazyAI library and then enable the EazyAI Arm Postprocess library. Follow the commands below to build the library:</p>
<ul>
<li>For CV2x SDK 3.0 Amba build: <div class="fragment"><div class="line">build $ make menuconfig</div>
<div class="line">         [*] Ambarella Package Configuration  ---&gt;</div>
<div class="line">             [*] Build Ambarella EAZYAI library  ---&gt;</div>
<div class="line">                 [*] Build Ambarella custom postprocess libray</div>
</div><!-- fragment --></li>
<li>For Cooper Amba build: <div class="fragment"><div class="line">build $ make menuconfig</div>
<div class="line">    packages  ---&gt;</div>
<div class="line">        eazyai  ---&gt;</div>
<div class="line">             [*] libeazyai-arm-postprocess (packages/eazyai/unit_test)  ---&gt;</div>
</div><!-- fragment --></li>
<li>For Cooper Yocto build: <div class="fragment"><div class="line">build $ make menuconfig</div>
<div class="line">    meta-ambalib  ---&gt;</div>
<div class="line">        recipes-eazyai  ---&gt;</div>
<div class="line">             [*] libeazyai-arm-postprocess (meta-ambalib/recipes-eazyai/libeazyai)  ---&gt;</div>
</div><!-- fragment --> </li>
</ul>
<h2><a class="anchor" id="eazyai_arm_postprocess_customize_postprocess"></a>
4.2 How to Add Customized Postprocess</h2>
<h3><a class="anchor" id="eazyai_arm_postprocess_customize_postprocess_implement"></a>
4.2.1 Implement</h3>
<p>Users can add the customized postprocess of a network into the EazyAI Arm Postprocess library by implementing the four functions in the following table, such as SSD in <code>eazyai/unit_test/nn_arm_task/ssd</code>.</p>
<a class="anchor" id="ops function"></a>
<table class="doxtable">
<caption>Table 4-1. EazyAI_Postprocess_Functions.</caption>
<tr>
<th align="left">Function</th><th align="left">Description </th></tr>
<tr>
<td>int (*nn_arm_init)(nn_arm_context_t *ctx, const char *lua_file)</td><td>Initialization function of post-processing </td></tr>
<tr>
<td>void (*nn_arm_deinit)(nn_arm_context_t *ctx)</td><td>Recovery function of post-processing </td></tr>
<tr>
<td>int (*nn_arm_post_process)(nn_arm_context_t *ctx, vp_output_t *output, nn_label_t *labels, int label_count)</td><td>Process function of post-processing </td></tr>
<tr>
<td>int (*nn_arm_show_result)(nn_arm_context_t *ctx, const ea_tensor_t *tensor)</td><td>Show result function of post-processing </td></tr>
</table>
<p>Register them to the EazyAI Arm Postprocess library by searching by name.</p>
<h3><a class="anchor" id="eazyai_arm_postprocesss_custmoize_postprocess_include"></a>
4.2.2 Include</h3>
<p>Add customized postprocess header files into <code>eazyai/unit_test/nn_arm_task/nn_arm_list.h</code>, such as SSD below.</p>
<div class="fragment"><div class="line"><span class="preprocessor">#ifdef BUILD_AMBARELLA_CONFIG_NN_ARM_TASK_SSD</span></div>
<div class="line"><span class="preprocessor">#include &quot;ssd.h&quot;</span></div>
<div class="line"><span class="preprocessor">#endif</span></div>
</div><!-- fragment --><h3><a class="anchor" id="eazyai_arm_postprocess_customize_postprocess_register"></a>
4.2.3 Register Postprocess</h3>
<p>Register postprocess functions at <a class="el" href="../../d3/d0c/page_lib_eazyai_doc.html#eazyai_arm_postprocess_customize_postprocess_implement">4.2.1 Implement</a> to EazyAI Arm Postprocess library in <code>eazyai/unit_test/nn_arm_task/nn_arm.c</code>, such as SSD below.</p>
<div class="fragment"><div class="line"><span class="preprocessor">#ifdef BUILD_AMBARELLA_CONFIG_NN_ARM_TASK_SSD</span></div>
<div class="line">REGISTER_NN_ARM_TASK(<span class="stringliteral">&quot;ssd&quot;</span>, ssd_arm_init, ssd_arm_deinit, ssd_arm_post_process, ssd_arm_show_result),</div>
<div class="line"><span class="preprocessor">#endif</span></div>
</div><!-- fragment --><h3><a class="anchor" id="eazyai_arm_postprocess_custmoize_postprocess_configure"></a>
4.2.4 Configure</h3>
<p>Add build configuration macros in <code>eazyai/unit_test/AmbaConfig</code> of the SDK, such as SSD below.</p>
<div class="fragment"><div class="line">config BUILD_AMBARELLA_CONFIG_NN_ARM_TASK_SSD</div>
<div class="line">   <span class="keywordtype">bool</span> <span class="stringliteral">&quot;Build Ambarella custom postprocess library with ssd&quot;</span></div>
<div class="line">   <span class="keywordflow">default</span> y</div>
<div class="line">       help</div>
<div class="line">           Build Ambarella custom postprocess library with ssd</div>
</div><!-- fragment --><h3><a class="anchor" id="eazyai_arm_postprocess_customize_postprocess_makefile"></a>
4.2.5 Makefile</h3>
<p>Add source files into <code>eazyai/unit_test/nn_arm_task</code> of the SDK, such as SSD below.</p>
<div class="fragment"><div class="line">ifeq ($(BUILD_AMBARELLA_CONFIG_NN_ARM_TASK_SSD), y)</div>
<div class="line">LOCAL_SRCS += $(LOCAL_PATH)/ssd/ssd.c</div>
<div class="line">LOCAL_CFLAGS   += -I$(LOCAL_PATH)/ssd</div>
<div class="line">endif</div>
</div><!-- fragment --><hr  />
<h1><a class="anchor" id="eazyai_unit_test_cvflow"></a>
5 EazyAI Unit Test</h1>
<h2><a class="anchor" id="eazyai_unit_test_cvflow_build"></a>
5.1 Build</h2>
<p>Follow the commands below to build the unit test <code>test_eazyai</code>:</p>
<ul>
<li>For CV2x SDK 3.0 Amba build: <div class="fragment"><div class="line">build $ make menuconfig</div>
<div class="line">         [*] Ambarella Package Configuration  ---&gt;</div>
<div class="line">             [*] Build Ambarella EAZYAI library  ---&gt;</div>
<div class="line">                 [*] Build EazyAI unit tests</div>
</div><!-- fragment --></li>
<li>For Cooper Amba build: <div class="fragment"><div class="line">build $ make menuconfig</div>
<div class="line">    packages  ---&gt;</div>
<div class="line">        eazyai  ---&gt;</div>
<div class="line">             [*] eazyai-unit-test (packages/eazyai/unit_test)</div>
</div><!-- fragment --></li>
<li>For Cooper Yocto build: <div class="fragment"><div class="line">build $ make menuconfig</div>
<div class="line">    meta-ambaapp  ---&gt;</div>
<div class="line">        recipes-test  ---&gt;</div>
<div class="line">             [*] eazyai-test@<span class="keyword">virtual</span> (meta-ambaapp/recipes-test/eazyai-test)  ---&gt;</div>
</div><!-- fragment --> </li>
</ul>
<h2><a class="anchor" id="eazyai_unit_test_cvflow_usage"></a>
5.2 Unit Test Usage</h2>
<p>The available options of <code>test_eazyai</code> are listed as follows: </p><pre class="fragment">  -m --mode                    Run mode: (0 = live), (1 = file), (2 = dummy). Default is live mode.
  -c --canvas_id               Canvas Id. Default is 1.
  -p --pyramid_id              Pyramid Id.
  -r --rgb                     Set color type to rgb_planar, default is bgr_planar. Only for live mode. It will be deprecated, suggest use option --nn_in_cf.
  --roi                        Roi of image, default is full image, order of roi parameters: x,y,h,w. Only for live mode.
  --yuv                        Enable yuv input from iav. Default is disable. It will be deprecated, suggest use option --nn_in_cf.
  --nn_in_cf                   Set color format of model, 0=bgr_planar, 1=rgb_planar, 2=grayscale, 3=yuv_nv12. Default is 0. Only for live mode.
  --isrc                       Multi input, e.g. -isrc "i:data=image|t:jpeg|c:rgb|r:0,0,0,0|d:cpu". Only for file mode.
  --model_path                 Path of cavalry binary file.
  --dis_auto_odfc              Disable output float32 data from float16 data on non-float32 CVflow ARCH. Default is enable.
  --nvp_id                     Specify the NVP ID. Only valid for CV3.
  --ades_cmd_file              Enable Ades with the Ades command file path, default will enable Acinference without this file.
  --acinf_gpu_id               Acinference gpu id. Default is -1(CPU). Only for Acinference.
  -n --nn_arm_name             NN Arm task name.
  --queue_size                 Queue size, test_eazyai is refined to use single thread, please use test_eazyai_queue for this option.
  --lua_file                   Lua file name.
  --thread_num                 Thread number, test_eazyai is refined to use single thread, please use test_eazyai_queue for this option.
  --extra_input                Extra input for network.
  --label_path                 Path of class names file.
  --hold_img                   Enable or disable to hold image data for postprocess. Default is disable. Only for live mode.
  -d --draw_mode               Draw mode, 0=draw bbox, 1=draw img.
  -s --stream_id               Stream ID to draw. Default is -1, means app doesn't use stream to draw.
  --fsync_off                  Enable or disable frame sync, default is enable.
  --stream_offset              Overlay buffer offset for multi-stream display.
  --vout_id                    VOUT Id for display. Default is 1, means to use HDMI/CVBS.
  --to_txt                     Save detection results to txt file. Only for file mode.
  --output_dir                 Path to contain output file.
  --support                    Show support list.
  -v --log_level               Log level 0=None, 1=Error, 2=Notice, 3=Debug, 4=Verbose.
  -t --iter                    Iteration of running inference or postprocess, loop forever (0xffffffff) if set 0. Default is 1.
  --interval                   Interval loop count, should be less than or equal iteration count. Default is 1.
  --cavalry_load               Specify the percentage of cavalry loading for dummy mode, ex. 0.5.

  test_eazyai live pipeline:
  ==========================================================================================================================================
  Mode                   Input               ==&gt;Preprocess          ==&gt;Inference           ==&gt;Postprocess         ==&gt;Show_Results
  ==========================================================================================================================================
  live                  |-c --canvas_id        |-r --rgb              |   --model_path       |-n --nn_arm_name      |-d --draw_mode
                        |-p --pyramid_id       |   --roi              |   --dis_auto_odfc    |   --queue_size       |-s --stream_id
                        |                      |   --yuv              |   --nvp_id           |   --lua_file         |   --fsync_off
                        |                      |   --nn_in_cf         |                      |   --thread_num       |   --stream_offset
                        |                      |                      |                      |   --extra_input      |   --vout_id
                        |                      |                      |                      |   --label_path       |
                        |                      |                      |                      |   --hold_img         |
                        |                      |                      |                      |                      |
  ==========================================================================================================================================

  test_eazyai live usage:
  test_eazyai -m 0 -s 0 -d 0 -r -n yolov3 --model_path onnx_yolov3_cavalry.bin --lua_file yolov3.lua --label_path label_coco_80.txt --fsync_off

  test_eazyai file pipeline:
  ==========================================================================================================================================
  Mode                   Input               ==&gt;Preprocess          ==&gt;Inference           ==&gt;Postprocess         ==&gt;Show_Results
  ==========================================================================================================================================
  file                  |   --isrc                                    |   --model_path       |-n --nn_arm_name      |-d --draw_mode
                        |                                             |   --dis_auto_odfc    |   --queue_size       |   --to_txt
                        |                                             |   --nvp_id           |   --lua_file         |   --output_dir
                        |                                             |   --ades_cmd_file    |   --thread_num       |
                        |                                             |   --acinf_gpu_id     |   --extra_input      |
                        |                                             |                      |   --label_path       |
                        |                                             |                      |                      |
                        |                                             |                      |                      |
  ==========================================================================================================================================

  test_eazyai file usage:
  test_eazyai -m 1 -d 0 -n yolov3 --model_path onnx_yolov3_cavalry.bin --lua_file yolov3.lua --isrc i:input.1=in|t:jpg|c:rgb --label_path label_coco_80.txt --output_dir out/

  test_eazyai file usage with Ades on PC:
  test_eazyai -m 1 -d 0 -n yolov3 --model_path &lt;usr_path&gt;/out_onnx_yolov3_parser/onnx_yolov3.json --lua_file yolov3.lua --isrc i:input.1=&lt;usr_path&gt;/dra_img|t:jpg|c:rgb --label_path &lt;usr_path&gt;/label_coco_80.txt --output_dir &lt;usr_path&gt;/yolov3/out --ades_cmd_file &lt;usr_path&gt;/ades_onnx_yolov3/onnx_yolov3_ades.cmd

  test_eazyai file usage with Acinference on PC:
  test_eazyai -m 1 -d 0 -n yolov3 --model_path &lt;usr_path&gt;/out_onnx_yolov3_parser/onnx_yolov3.json --lua_file yolov3.lua --isrc i:data=&lt;usr_path&gt;/dra_img|t:jpg|c:rgb --label_path &lt;usr_path&gt;/label_coco_80.txt --output_dir &lt;usr_path&gt;/yolov3/out

  test_eazyai dummy usage:
  test_eazyai -m 2 --model_path onnx_yolov3_cavalry.bin

  support 16 arm postprocess tasks:
        to_file
        bisenet
        centernet
        deeplabv3
        fgfd
        fairmot
        hfnet
        lffd
        mobilenetv2_nv12
        opennet
        retinaface
        ssd
        yolox
        yolov3
        yolov8
        yolov5</pre><p>The value of <code>--isrc</code> can be set as shown in the table below :</p>
<a class="anchor" id="isrc_key_value"></a>
<table class="doxtable">
<caption>Table 5-1. Isrc Parameters for test_eazyai.</caption>
<tr align="middle">
<th>Key </th><th>Value </th><th>Option </th><th align="left">Description </th></tr>
<tr align="middle">
<td>i </td><td>name=folder </td><td><b>No</b> </td><td align="left">Feed network with files in a folder; name is the input name of a network. </td></tr>
<tr align="middle">
<td>t </td><td>jpeg/raw/jpg/png </td><td><b>No</b> </td><td align="left">Type of file; file postfix shold be ".jpeg", ".bin",".jpg" or ".bin". Supports capital letters, such as JPEG. </td></tr>
<tr align="middle">
<td>c </td><td>rgb/bgr </td><td><b>Yes</b> </td><td align="left">Color of image which is fed into network; the default value is bgr. </td></tr>
<tr align="middle">
<td>r </td><td>0,0,0,0 </td><td><b>Yes</b> </td><td align="left">The region of interest (ROI) of an image which is fed into the network; the value is in order of x,y,h,w. The default is 0,0,0,0, which feeds full image. </td></tr>
<tr align="middle">
<td>d </td><td>cpu/vp </td><td><b>Yes</b> </td><td align="left">Use CPU or CVflow device to perform pre-processing; the default value is CPU. </td></tr>
</table>
<h2><a class="anchor" id="eazyai_unit_test_cvflow__example"></a>
5.3 Examples</h2>
<p>Example to get the <b>support list</b>:</p>
<div class="fragment"><div class="line">build $ test_eazyai --support</div>
</div><!-- fragment --><p>Four <b>CVflow</b> examples are as follows.</p>
<ol type="1">
<li>File mode: <div class="fragment"><div class="line">board # rmmod cavalry &amp;&amp; modprobe cavalry &amp;&amp; cavalry_load -f /lib/firmware/cavalry.bin -r</div>
<div class="line">board # test_eazyai -m 1 -d 1 -n hfnet --model_path /sdcard/hfnet/model/tf_hfnet_cavalry.bin --lua_file /usr/share/</div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line">/eazyai/lua/hfnet.lua --isrc <span class="stringliteral">&quot;i:gray_image=/sdcard/hfnet/in|t:jpeg|d:vp&quot;</span> --output_dir /sdcard/hfnet/out/</div>
</div><!-- fragment --></li>
<li>Dummy mode for performance test: <div class="fragment"><div class="line">board # rmmod cavalry &amp;&amp; modprobe cavalry &amp;&amp; cavalry_load -f /lib/firmware/cavalry.bin -r</div>
<div class="line">board # test_eazyai -m 2 --model_path /sdcard/hfnet/model/tf_hfnet_cavalry.bin</div>
</div><!-- fragment --></li>
<li>Live mode (draw on stream <em>rtsp://10.0.0.2/stream1</em>): <div class="fragment"><div class="line">board # eazyai_video.sh --stream_A 1080p --enc_dummy_latency 4 --reallocate_mem overlay,0x01200000</div>
<div class="line">board # test_eazyai -m 0 -s 0 -c 1 -d 1 --model_path /sdcard/hfnet/model/tf_hfnet_cavalry.bin -n hfnet --lua_file /usr/share/ambarella/eazyai/lua/hfnet.lua</div>
</div><!-- fragment --></li>
<li>Live mode (draw on VOUT): <div class="fragment"><div class="line">board # eazyai_video.sh --hdmi 1080p</div>
<div class="line">board # test_eazyai -m 0 -d 1 -c 1 --model_path /sdcard/hfnet/model/tf_hfnet_cavalry.bin -n hfnet --lua_file /usr/share/ambarella/eazyai/lua/hfnet.lua</div>
</div><!-- fragment --></li>
</ol>
<hr  />
<h1><a class="anchor" id="eazyai_unit_test_simulator"></a>
6 EazyAI Simulator Unit Test</h1>
<h2><a class="anchor" id="eazyai_unit_test_simulator_build"></a>
6.1 Build</h2>
<p>The EazyAI unit test simulator shares the same header files source files with <a class="el" href="../../d3/d0c/page_lib_eazyai_doc.html#eazyai_unit_test_cvflow_build">5.1 Build</a>.</p>
<p>Before compiling the executable target, users must install the <b>EazyAI</b> simulator library into the folder <code>&lt;project_folder&gt;/eazyai/build</code>. If users must use another path, they can use the cmake parameter <code>-DEA_INC</code> and <code>-DEA_LIB</code> to modify it. For how to compile the <b>EazyAI</b> simulator library, refer to <a class="el" href="../../d3/d0c/page_lib_eazyai_doc.html#eazyai_simulator_build_compile">3.1.2 Compile</a>.</p>
<p>Follow the steps below to setup the Lua library, the Eigen library, and the executable application.</p>
<p>The Lua library is available under MIT license; it aids in analyzing the <code>network_name.lua</code> file for postprocessing. The readme in this folder guides the installation. The installation steps below are the same as those in the readme: </p><div class="fragment"><div class="line">build $ cd &lt;project_folder&gt;/eazyai/unit_test/3rd_party</div>
<div class="line">build $ wget https:<span class="comment">//www.lua.org/ftp/lua-5.4.4.tar.gz</span></div>
<div class="line">build $ tar -xzf lua-5.4.4.tar.gz</div>
<div class="line">build $ cd lua-5.4.4</div>
<div class="line">build $ make MYCFLAGS=<span class="stringliteral">&quot;-fPIC&quot;</span></div>
<div class="line">build $ cd -</div>
</div><!-- fragment --> <dl class="section note"><dt>Note</dt><dd>The compile target should be located at <code>&lt;project_folder&gt;/eazyai/unit_test/3rd_party/lua-5.4.4/src/liblua.a</code>. If users must use another path, they can use the cmake parameter <code>-DLUA_INC</code> to modify it.</dd></dl>
<p>Below are the steps to install the Eigen library into the folder <code>&lt;project_folder&gt;/eazyai/unit_test/3rd_party</code>. This library aids in algebra function. Only its header files are required during the compilation. </p><div class="fragment"><div class="line">build $ cd &lt;project_folder&gt;/eazyai/unit_test/3rd_party</div>
<div class="line">build $ wget https:<span class="comment">//gitlab.com/libeigen/eigen/-/archive/3.4.0/eigen-3.4.0.zip</span></div>
<div class="line">build $ unzip eigen-3.4.0.zip</div>
<div class="line">build $ cd -</div>
</div><!-- fragment --> <dl class="section note"><dt>Note</dt><dd><ul>
<li>The demo fairmot (source file path <code>eazyai/unit_test/nn_arm_task/fairmot/</code>) requires this Eigen library. If users do not require it, they must modify <code>eazyai/unit_test/CMakeLists.txt</code> and <code>eazyai/unit_test/nn_arm_task/nn_arm_list.h</code> to remove the related source code.</li>
<li>The download target should be located at <code>&lt;project_folder&gt;/eazyai/unit_test/3rd_party/eigen-3.4.0/Eigen</code>.</li>
<li>If users must use another path, they can use the cmake parameter <code>-DEIGEN_INC</code> to modify it.</li>
<li>For more information about this Eigen library, refer to <a href="https://eigen.tuxfamily.org/dox/GettingStarted.html">https://eigen.tuxfamily.org/dox/GettingStarted.html</a></li>
</ul>
</dd></dl>
<p>Below are the steps to install the <b>test_eazyai</b> application. The EazyAI unit test simulator uses CMake to compile the source code. The compile steps are as follows: </p><div class="fragment"><div class="line">build $ source &lt;user_CNNGen_Toolchain_env_file&gt;</div>
<div class="line">build $ cd &lt;user_path&gt;/cvflow_cnngen_samples/eazyai/unit_test</div>
<div class="line">build $ mkdir build</div>
<div class="line">build $ cd build; cmake ..; make; cd -</div>
</div><!-- fragment --><p> The executable file is located at <code>&lt;project_folder&gt;/eazyai/unit_test/build/test_eazyai</code>. </p><dl class="section note"><dt>Note</dt><dd><code>nn_arm_task/qrcode</code> requests <code>OpenCV &gt;= 3.4.3</code>. By default, this target is not compiled. To compile this target, users must install an <code>OpenCV &gt;= 3.4.3</code>. If there are multiple versions of OpenCV installed, users can use the CMake macro <code>USE_OPENCV_VERSION</code> during the CMake stage to specify which OpenCV version to be used. For example, <code>cmake -DUSE_OPENCV_VERSION=3.4.3 ..</code>. Ensure that the libeazyai uses the same OpenCV version as this unit test. For more information on how to compile the library libeazyai, refer to <a class="el" href="../../d3/d0c/page_lib_eazyai_doc.html#eazyai_simulator_build_compile">3.1.2 Compile</a>.</dd></dl>
<h2><a class="anchor" id="eazyai_unit_test_simulator_usage"></a>
6.2 Usage</h2>
<p>The usage of the EazyAI simulator unit test is similar to the <a class="el" href="../../d3/d0c/page_lib_eazyai_doc.html#eazyai_unit_test_cvflow_usage">5.2 Unit Test Usage</a>. The EazyAI simulator unit test supports using AC_INF API or ADES API to forward the network. For the difference between AC_INF API and ADES API, refer to <a class="el" href="../../d3/d0c/page_lib_eazyai_doc.html#eazyai_introduction_simulator">1.3 NN Simulator</a>. Users must pay attention to the following options:</p><ul>
<li><code>--models</code>: This option should be followed by the path of the <code>network_name.json</code> file. The <code>network_name.json</code> must remain in the parser output of this network in AC_INF mode. For more information, refer to <a class="el" href="../../d3/d0c/page_lib_eazyai_doc.html#eazyai_simulator_components_net">3.2.5 ea_net</a>.</li>
<li><code>--ades_cmd_file</code>: This option should be followed by the path of the <code>network_name_ades.cmd</code> file. Along with <code>network_name.json</code>, the <code>network_name_ades.cmd</code> should remain in the ADES output folder. If this option is provided via command-line interface (CLI), the forward inference is performed by the ADES API; otherwise, it is performed by the AC_INF API. And this file is generated by the tool <code>ades_autogen.py</code>. For more information, refer to <a class="el" href="../../d3/d0c/page_lib_eazyai_doc.html#eazyai_simulator_components_net">3.2.5 ea_net</a>.</li>
<li><code>--acinf_gpu_id</code>: The AC_INF supports using GPU to perform forward inference. To enable this feature, users must set up CUDA on the build machine as well as the GPU version EazyAI library. If users call the GPU on a no-GPU machine via AC_INF API, the AC_INF instance cannot be created successfully. For more information on how to compile the EazyAI lib with GPU support, refer to <a class="el" href="../../d3/d0c/page_lib_eazyai_doc.html#eazyai_simulator_build_compile">3.1.2 Compile</a>. For more information on how to run GPU using AC_INF, refer to <a class="el" href="../../d3/d0c/page_lib_eazyai_doc.html#eazyai_simulator_components_net">3.2.5 ea_net</a>.</li>
</ul>
<p>For more information, refer to <a class="el" href="../../d3/d0c/page_lib_eazyai_doc.html#eazyai_unit_test_cvflow_usage">5.2 Unit Test Usage</a>.</p>
<h2><a class="anchor" id="eazyai_unit_test_simulator_example"></a>
6.3 Examples</h2>
<p>Example for how to get the <b>support list</b>:</p>
<div class="fragment"><div class="line">build $ ./build/test_eazyai --support</div>
</div><!-- fragment --><p>Some <b>ADES</b> examples, as shown below, which only support file mode:</p>
<div class="fragment"><div class="line">build $ ./build/test_eazyai -m 1 -d 0 --model_path /&lt;cnngen_sample_sdk&gt;/out/onnx/demo_networks/onnx_yolov5s/out_onnx_yolov5s_parser/onnx_yolov5s.json \</div>
<div class="line">         --label_path /&lt;cnngen_sample_sdk&gt;/library/eazyai/unit_test/resource/label_coco_80.txt -n yolov5 \</div>
<div class="line">         --lua_file /&lt;cnngen_sample_sdk&gt;/library/eazyai/unit_test/resource/lua/yolov5s.lua --output_dir output --isrc <span class="stringliteral">&quot;i:images=dra_img|t:jpeg|c:rgb&quot;</span> \</div>
<div class="line">         --ades_cmd_file /&lt;cnngen_sample_sdk&gt;/out/onnx/demo_networks/onnx_yolov5s/ades_onnx_yolov5s/onnx_yolov5s_ades.cmd</div>
</div><!-- fragment --><p>Some <b>Acinference</b> examples, as shown below, which only support file mode:</p>
<div class="fragment"><div class="line">build $ ./build/test_eazyai -m 1 -d 0 --model_path /&lt;cnngen_sample_sdk&gt;/out/onnx/demo_networks/onnx_yolov5s/out_onnx_yolov5s_parser/onnx_yolov5s.json \</div>
<div class="line">         --label_path /&lt;cnngen_sample_sdk&gt;/library/eazyai/unit_test/resource/label_coco_80.txt -n yolov5 \</div>
<div class="line">         --lua_file /&lt;cnngen_sample_sdk&gt;/library/eazyai/unit_test/resource/lua/yolov5s.lua --output_dir output --isrc <span class="stringliteral">&quot;i:images=dra_img|t:jpeg|c:rgb&quot;</span></div>
</div><!-- fragment --><hr  />
<h1><a class="anchor" id="eazyai_api"></a>
7 EazyAI API</h1>
<p>Visit the following links to see details of <a class="el" href="../../db/dd5/group__eazyai-api.html">EazyAI API</a>.</p><ul>
<li><a class="el" href="../../da/d24/group__eazyai-api-details.html">EazyAI library functions</a></li>
<li><a class="el" href="../../de/d5b/group__eazyai-api-helper.html">EazyAI library macros, enumerations and structures</a></li>
<li><a class="el" href="../../d6/db5/group__eazyai__arm__postprocess-api-details.html">EazyAI Arm Postprocess library functions</a></li>
<li><a class="el" href="../../d9/dd3/group__eazyai__arm__postprocess-helper.html">EazyAI Arm Postporcess structures</a></li>
</ul>
<hr  />
<h1><a class="anchor" id="eazyai_core_api_test"></a>
8 EazyAI Core API Test</h1>
<p>Core API test is designed for Core library test to make sure every API works well in different chips, also it is the reference code for how to use these APIs by users. Please refer to <code>eazyai/unit_test/api_test/readme.txt</code> with below main source codes.</p><ul>
<li><code>case_ea_env.cpp</code> for <a class="el" href="../../d3/d0c/page_lib_eazyai_doc.html#eazyai_cvflow_core_env">2.2.1 Core Library - ea_env</a></li>
<li><code>case_ea_tensor.cpp</code> for <a class="el" href="../../d3/d0c/page_lib_eazyai_doc.html#eazyai_cvflow_core_tensor">2.2.2 Core Library - ea_tensor</a></li>
<li><code>case_ea_img_resource.cpp</code> for <a class="el" href="../../d3/d0c/page_lib_eazyai_doc.html#eazyai_cvflow_core_img_resource">2.2.3 Core Library - ea_img_resource</a></li>
<li><code>case_ea_preprocess.cpp</code> for <a class="el" href="../../d3/d0c/page_lib_eazyai_doc.html#eazyai_cvflow_core_preprocess">2.2.4 Core Library - ea_preprocess</a></li>
<li><code>case_ea_net.cpp</code> for <a class="el" href="../../d3/d0c/page_lib_eazyai_doc.html#eazyai_cvflow_core_net">2.2.5 Core Library - ea_net</a></li>
<li><code>case_ea_osd.cpp</code> for <a class="el" href="../../d3/d0c/page_lib_eazyai_doc.html#eazyai_cvflow_core_osd">2.2.6 Core Library - ea_osd</a></li>
<li>No for <a class="el" href="../../d3/d0c/page_lib_eazyai_doc.html#eazyai_cvflow_core_log">2.2.7 Core Library - ea_log</a> as this is too simple</li>
</ul>
<hr  />
<h1><a class="anchor" id="eazyai_display_unit_test_cvflow"></a>
9 EazyAI Display Unit Test</h1>
<h2><a class="anchor" id="eazyai_display_unit_test_cvflow_build"></a>
9.1 Build</h2>
<p><code>test_eazyai_display</code> is an Display unit test of EazyAI which is only for chip side, it can be built with the same steps in <a class="el" href="../../d3/d0c/page_lib_eazyai_doc.html#eazyai_unit_test_cvflow_build">5.1 Build</a>.</p>
<h2><a class="anchor" id="eazyai_display_unit_test_cvflow_usage"></a>
9.2 Usage</h2>
<p><code>test_eazyai_display</code> is an user interaction drawing tool with a two-level menu as follows:</p>
<div class="fragment"><div class="line">Main Menu:</div>
<div class="line">    v - Display On Vout</div>
<div class="line">    s - Display On Stream</div>
<div class="line">    q - Quit</div>
<div class="line"> </div>
<div class="line">Sub Menu:</div>
<div class="line">    1 - Draw bbox (stream blur)</div>
<div class="line">    2 - Draw textbox</div>
<div class="line">    3 - Draw line</div>
<div class="line">    4 - Draw circle</div>
<div class="line">    5 - Display refresh</div>
<div class="line">    q - Back to Main Menu</div>
</div><!-- fragment --><dl class="section note"><dt>Note</dt><dd>Stream Blur is only supported in feature <b>Draw bbox</b> in <b>Stream Mode</b>.</dd></dl>
<h2><a class="anchor" id="eazyai_display_unit_test_cvflow_examples"></a>
9.3 Examples</h2>
<p>Part of the prompts have been omitted from the examples for brevity. For details, please refer to the prompts from <code>test_eazyai_display</code>.</p>
<ul>
<li>Example to Draw bbox on Vout: <div class="fragment"><div class="line">board # eazyai_video.sh --hdmi 1080p --fb_res 1920x1080</div>
<div class="line">board # test_eazyai_display</div>
<div class="line"> </div>
<div class="line">** Main Menu Choice **</div>
<div class="line">==&gt; Input your choice: v</div>
<div class="line"> </div>
<div class="line">** OBJ Window Attribution **</div>
<div class="line">[Notice] OBJ window size is [1920.0]x[1080.0].</div>
<div class="line"> </div>
<div class="line">** Sub Menu Choice **</div>
<div class="line">==&gt; Input your choice: 1</div>
<div class="line"> </div>
<div class="line">** Input Function Attribution **</div>
<div class="line">==&gt; Input start x: 100</div>
<div class="line">==&gt; Input start y: 100</div>
<div class="line">==&gt; Input width: 200</div>
<div class="line">==&gt; Input height: 200</div>
<div class="line">==&gt; Input border thickness: 10</div>
<div class="line">==&gt; Input bbox color(<span class="keywordflow">if</span> solid bbox, will also be bg color): 2</div>
<div class="line">==&gt; Input bbox background transparency: 255</div>
<div class="line">==&gt; Input title position: 2</div>
<div class="line">==&gt; Input font size: 20</div>
<div class="line">==&gt; Input text color: 2</div>
<div class="line">==&gt; Input text background color: 3</div>
<div class="line">==&gt; Input text background transparency: 255</div>
<div class="line">==&gt; Input text string: Ambarella</div>
<div class="line"> </div>
<div class="line">** To Refresh Display **</div>
<div class="line"> </div>
<div class="line">** Sub Menu Choice **</div>
<div class="line">==&gt; Input your choice: 5</div>
<div class="line"> </div>
<div class="line">** Display Refreshed **</div>
</div><!-- fragment --></li>
<li>Example to Draw bbox on Stream: <div class="fragment"><div class="line">board # eazyai_video.sh --stream_A 1080p</div>
<div class="line">board # test_eazyai_display</div>
<div class="line"> </div>
<div class="line">** Main Menu Choice **</div>
<div class="line">==&gt; Input your choice: s</div>
<div class="line"> </div>
<div class="line">** OBJ Window Attribution **</div>
<div class="line">[Notice] OBJ window size is [1920.0]x[1080.0].</div>
<div class="line"> </div>
<div class="line">** Sub Menu Choice **</div>
<div class="line">==&gt; Input your choice: 1</div>
<div class="line"> </div>
<div class="line">** Input Function Attribution **</div>
<div class="line">==&gt; Input start x: 100</div>
<div class="line">==&gt; Input start y: 100</div>
<div class="line">==&gt; Input width: 200</div>
<div class="line">==&gt; Input height: 200</div>
<div class="line">==&gt; Input blur strength: -1</div>
<div class="line">==&gt; Input border thickness: 10</div>
<div class="line">==&gt; Input bbox color(<span class="keywordflow">if</span> solid bbox, will also be bg color): 2</div>
<div class="line">==&gt; Input bbox background transparency: 255</div>
<div class="line">==&gt; Input title position: 2</div>
<div class="line">==&gt; Input font size: 20</div>
<div class="line">==&gt; Input text color: 2</div>
<div class="line">==&gt; Input text background color: 3</div>
<div class="line">==&gt; Input text background transparency: 255</div>
<div class="line">==&gt; Input text string: Ambarella</div>
<div class="line"> </div>
<div class="line">** To Refresh Display **</div>
<div class="line"> </div>
<div class="line">** Sub Menu Choice **</div>
<div class="line">==&gt; Input your choice: 5</div>
<div class="line"> </div>
<div class="line">** Display Refreshed **</div>
</div><!-- fragment --></li>
<li>Example to Draw blur on Stream: <div class="fragment"><div class="line">board # eazyai_video.sh --stream_A 1080p --blur --enc_dummy_latency 3 --reallocate_mem blur,0x01000000:overlay,0x01000000</div>
<div class="line">board # test_eazyai_display</div>
<div class="line"> </div>
<div class="line">** Main Menu Choice **</div>
<div class="line">==&gt; Input your choice: s</div>
<div class="line"> </div>
<div class="line">** OBJ Window Attribution **</div>
<div class="line">[Notice] OBJ window size is [1920.0]x[1080.0].</div>
<div class="line"> </div>
<div class="line">** Sub Menu Choice **</div>
<div class="line">==&gt; Input your choice: 1</div>
<div class="line"> </div>
<div class="line">** Input Function Attribution **</div>
<div class="line">==&gt; Input start x: 100</div>
<div class="line">==&gt; Input start y: 100</div>
<div class="line">==&gt; Input width: 200</div>
<div class="line">==&gt; Input height: 200</div>
<div class="line">==&gt; Input blur strength: 2</div>
<div class="line"> </div>
<div class="line">** To Refresh Display **</div>
<div class="line"> </div>
<div class="line">** Sub Menu Choice **</div>
<div class="line">==&gt; Input your choice: 5</div>
<div class="line"> </div>
<div class="line">** Display Refreshed **</div>
</div><!-- fragment --></li>
<li><p class="startli">Draw Other Objects</p>
<p class="startli">Users can draw other objects according to the prompts of <code>test_eazyai_display</code>.</p>
</li>
</ul>
<hr  />
<h1><a class="anchor" id="eazyai_licence"></a>
10 License</h1>
<p>Copyright (c) 2023 Ambarella International LP.</p>
<p>This file and its contents ( "Software" ) are protected by intellectual property rights including, without limitation, U.S. and/or foreign copyrights. This Software is also the confidential and proprietary information of Ambarella International LP and its licensors. You may not use, reproduce, disclose, distribute, modify, or otherwise prepare derivative works of this Software or any portion thereof except pursuant to a signed license agreement or nondisclosure agreement with Ambarella International LP or its authorized affiliates. In the absence of such an agreement, you agree to promptly notify and return this Software to Ambarella International LP.</p>
<p>This file includes sample code and is only for internal testing and evaluation. If you distribute this sample code (whether in source, object, or binary code form), it will be without any warranty or indemnity protection from Ambarella International LP or its affiliates.</p>
<p>THIS SOFTWARE IS PROVIDED "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF NON-INFRINGEMENT, MERCHANTABILITY, AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL AMBARELLA INTERNATIONAL LP OR ITS AFFILIATES BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; COMPUTER FAILURE OR MALFUNCTION; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE. </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<div class="ttc" id="agroup__eazyai-display-helper_html_gga006e4c6e8e51bca579fde2eeef724dc9a6581a829e8436c0a00754957ba35e844"><div class="ttname"><a href="../../d1/d5c/group__eazyai-display-helper.html#gga006e4c6e8e51bca579fde2eeef724dc9a6581a829e8436c0a00754957ba35e844">EA_DISPLAY_BBOX_TEXTBOX</a></div><div class="ttdeci">@ EA_DISPLAY_BBOX_TEXTBOX</div><div class="ttdef"><b>Definition:</b> ea_display.h:81</div></div>
<div class="ttc" id="agroup__eazyai-display-helper_html_gga6dd902e4319e44983fc40c9302d861c5a4aba6e29e43651b76e2e373c4e7d6838"><div class="ttname"><a href="../../d1/d5c/group__eazyai-display-helper.html#gga6dd902e4319e44983fc40c9302d861c5a4aba6e29e43651b76e2e373c4e7d6838">EA_DISPLAY_JPEG</a></div><div class="ttdeci">@ EA_DISPLAY_JPEG</div><div class="ttdef"><b>Definition:</b> ea_display.h:62</div></div>
<div class="ttc" id="agroup__eazyai-tensor-helper_html_gga2e3f04280863e7c873d05a7eb73a8a55a54ee6b194dc5690fac2c2bdb3f3f5562"><div class="ttname"><a href="../../d9/d79/group__eazyai-tensor-helper.html#gga2e3f04280863e7c873d05a7eb73a8a55a54ee6b194dc5690fac2c2bdb3f3f5562">EA_VP</a></div><div class="ttdeci">@ EA_VP</div><div class="ttdef"><b>Definition:</b> ea_tensor.h:58</div></div>
<div class="ttc" id="agroup__eazyai-tensor-details_html_ga11c5b3f9ee51ccbd9190bc9d6ac5a883"><div class="ttname"><a href="../../da/db2/group__eazyai-tensor-details.html#ga11c5b3f9ee51ccbd9190bc9d6ac5a883">ea_tensor_pitch</a></div><div class="ttdeci">AMBA_API size_t ea_tensor_pitch(const ea_tensor_t *tensor)</div></div>
<div class="ttc" id="agroup__eazyai-preprocess-helper_html_ggacf838ff025e07d2405d18f4d80494eb7afd14c83fb6c6fb65d1a231b8b1f6be79"><div class="ttname"><a href="../../d2/da6/group__eazyai-preprocess-helper.html#ggacf838ff025e07d2405d18f4d80494eb7afd14c83fb6c6fb65d1a231b8b1f6be79">EA_COLOR_TRANSPOSE</a></div><div class="ttdeci">@ EA_COLOR_TRANSPOSE</div><div class="ttdef"><b>Definition:</b> ea_preprocess.h:56</div></div>
<div class="ttc" id="agroup__eazyai-utils-details_html_ga4dce0d08263864a05033381eccd3ce6d"><div class="ttname"><a href="../../db/d66/group__eazyai-utils-details.html#ga4dce0d08263864a05033381eccd3ce6d">ea_nms</a></div><div class="ttdeci">AMBA_API int ea_nms(float *x1y1x2y2score, void *aux, size_t aux_element_size, int num, float threshold, int use_iou_min, int top_k, float *out_x1y1x2y2score, void *out_aux, int *out_num)</div></div>
<div class="ttc" id="agroup__eazyai-preprocess-details_html_ga565556c72e67622ff43979ef7eb4d01f"><div class="ttname"><a href="../../d1/d67/group__eazyai-preprocess-details.html#ga565556c72e67622ff43979ef7eb4d01f">ea_cvt_color_resize</a></div><div class="ttdeci">AMBA_API int ea_cvt_color_resize(ea_tensor_t *src, ea_tensor_t *dst, ea_color_convert_type_t type, ea_device_t device)</div></div>
<div class="ttc" id="agroup__eazyai-net-details_html_ga6b5eaf1b3100e7356aa04dca2b736b7c"><div class="ttname"><a href="../../d9/d87/group__eazyai-net-details.html#ga6b5eaf1b3100e7356aa04dca2b736b7c">ea_net_new</a></div><div class="ttdeci">AMBA_API ea_net_t * ea_net_new(ea_net_params_t *params)</div></div>
<div class="ttc" id="agroup__eazyai-net-details_html_ga89291c3e32b3f08007deb053e6a68b38"><div class="ttname"><a href="../../d9/d87/group__eazyai-net-details.html#ga89291c3e32b3f08007deb053e6a68b38">ea_net_input</a></div><div class="ttdeci">AMBA_API ea_tensor_t * ea_net_input(ea_net_t *net, const char *port_name)</div></div>
<div class="ttc" id="agroup__eazyai-osd-details_html_ga8e9c7a89673fc7a451721a73ffd06f57"><div class="ttname"><a href="../../da/dc6/group__eazyai-osd-details.html#ga8e9c7a89673fc7a451721a73ffd06f57">ea_osd_refresh</a></div><div class="ttdeci">AMBA_API int ea_osd_refresh(ea_osd_t *osd, const void *params)</div></div>
<div class="ttc" id="agroup__eazyai-queue-details_html_ga78e82fa09cf2f8dcec15d73aa7d6baa8"><div class="ttname"><a href="../../df/d49/group__eazyai-queue-details.html#ga78e82fa09cf2f8dcec15d73aa7d6baa8">ea_queue_request_carrier_nowait</a></div><div class="ttdeci">AMBA_API void * ea_queue_request_carrier_nowait(ea_queue_t *queue)</div></div>
<div class="ttc" id="agroup__eazyai-osd-details_html_ga942af3078011f666816bdce17707f76b"><div class="ttname"><a href="../../da/dc6/group__eazyai-osd-details.html#ga942af3078011f666816bdce17707f76b">ea_osd_area_set_default_16_color_table</a></div><div class="ttdeci">AMBA_API int ea_osd_area_set_default_16_color_table(ea_osd_t *osd, int local_area_id)</div></div>
<div class="ttc" id="agroup__eazyai-img-resource-helper_html_ga7a78f8fb1a7b1f5c417f07ffc4bc77b0"><div class="ttname"><a href="../../df/d83/group__eazyai-img-resource-helper.html#ga7a78f8fb1a7b1f5c417f07ffc4bc77b0">ea_img_resource_t</a></div><div class="ttdeci">struct ea_img_resource_s ea_img_resource_t</div><div class="ttdef"><b>Definition:</b> ea_img_resource.h:92</div></div>
<div class="ttc" id="agroup__eazyai-log-helper_html_ga5994ff775af94256896b8cf8793e4275"><div class="ttname"><a href="../../d4/d96/group__eazyai-log-helper.html#ga5994ff775af94256896b8cf8793e4275">EA_LOG_GET_LOCAL</a></div><div class="ttdeci">#define EA_LOG_GET_LOCAL()</div><div class="ttdef"><b>Definition:</b> ea_log.h:78</div></div>
<div class="ttc" id="agroup__eazyai-log-helper_html_gaed0d12d2c797fd90e7564ae681660a4f"><div class="ttname"><a href="../../d4/d96/group__eazyai-log-helper.html#gaed0d12d2c797fd90e7564ae681660a4f">RVAL_ASSERT</a></div><div class="ttdeci">#define RVAL_ASSERT</div><div class="ttdef"><b>Definition:</b> ea_log.h:215</div></div>
<div class="ttc" id="agroup__eazyai-osd-helper_html_ggadf0ed00a8800a0cf01c6cae4fdeb3214a402d677933516a13514a84a773c3007d"><div class="ttname"><a href="../../d4/d73/group__eazyai-osd-helper.html#ggadf0ed00a8800a0cf01c6cae4fdeb3214a402d677933516a13514a84a773c3007d">EA_OSD_STREAM</a></div><div class="ttdeci">@ EA_OSD_STREAM</div><div class="ttdef"><b>Definition:</b> ea_osd.h:51</div></div>
<div class="ttc" id="agroup__eazyai-tensor-details_html_gabf2b83ac2d5ccc5275b21cec58aad817"><div class="ttname"><a href="../../da/db2/group__eazyai-tensor-details.html#gabf2b83ac2d5ccc5275b21cec58aad817">ea_tensor_new</a></div><div class="ttdeci">AMBA_API ea_tensor_t * ea_tensor_new(ea_data_type_t dtype, const size_t *shape, size_t pitch)</div></div>
<div class="ttc" id="agroup__eazyai-queue-helper_html_ga4e926f714f0ac2c29a131f3d6f175da7"><div class="ttname"><a href="../../de/db5/group__eazyai-queue-helper.html#ga4e926f714f0ac2c29a131f3d6f175da7">ea_queue_t</a></div><div class="ttdeci">struct ea_queue_s ea_queue_t</div><div class="ttdef"><b>Definition:</b> ea_queue.h:50</div></div>
<div class="ttc" id="agroup__eazyai-log-helper_html_gaa9af1f313445f2443a9ccca541294264"><div class="ttname"><a href="../../d4/d96/group__eazyai-log-helper.html#gaa9af1f313445f2443a9ccca541294264">EA_MEASURE_TIME_END</a></div><div class="ttdeci">#define EA_MEASURE_TIME_END(s)</div><div class="ttdef"><b>Definition:</b> ea_log.h:225</div></div>
<div class="ttc" id="agroup__eazyai-tensor-details_html_ga499b40d042214b20aadbaec126916cb6"><div class="ttname"><a href="../../da/db2/group__eazyai-tensor-details.html#ga499b40d042214b20aadbaec126916cb6">ea_tensor_sync_cache</a></div><div class="ttdeci">AMBA_API int ea_tensor_sync_cache(ea_tensor_t *tensor, ea_device_t from, ea_device_t to)</div></div>
<div class="ttc" id="agroup__eazyai-queue-details_html_gaac131e877e1e7ac3723e730fcbeca700"><div class="ttname"><a href="../../df/d49/group__eazyai-queue-details.html#gaac131e877e1e7ac3723e730fcbeca700">ea_queue_request_carrier</a></div><div class="ttdeci">AMBA_API void * ea_queue_request_carrier(ea_queue_t *queue)</div></div>
<div class="ttc" id="agroup__eazyai-tensor-helper_html_gga2e3f04280863e7c873d05a7eb73a8a55ab4cde2d3c5c333c54951307e338434cf"><div class="ttname"><a href="../../d9/d79/group__eazyai-tensor-helper.html#gga2e3f04280863e7c873d05a7eb73a8a55ab4cde2d3c5c333c54951307e338434cf">EA_DSP</a></div><div class="ttdeci">@ EA_DSP</div><div class="ttdef"><b>Definition:</b> ea_tensor.h:59</div></div>
<div class="ttc" id="agroup__eazyai-queue-details_html_gab5abd4cca5db3b781c282c65b7100699"><div class="ttname"><a href="../../df/d49/group__eazyai-queue-details.html#gab5abd4cca5db3b781c282c65b7100699">ea_queue_new</a></div><div class="ttdeci">AMBA_API ea_queue_t * ea_queue_new()</div></div>
<div class="ttc" id="agroup__eazyai-osd-helper_html_ggadf0ed00a8800a0cf01c6cae4fdeb3214a8eacb89d60c53fce19d2d19d25dc74cd"><div class="ttname"><a href="../../d4/d73/group__eazyai-osd-helper.html#ggadf0ed00a8800a0cf01c6cae4fdeb3214a8eacb89d60c53fce19d2d19d25dc74cd">EA_OSD_VOUT</a></div><div class="ttdeci">@ EA_OSD_VOUT</div><div class="ttdef"><b>Definition:</b> ea_osd.h:50</div></div>
<div class="ttc" id="agroup__eazyai-tensor-helper_html_gga3ba09b564d11c6625e68723113aae4b4a2c504ada3e5bd7e9b1d2dbee64b5b40a"><div class="ttname"><a href="../../d9/d79/group__eazyai-tensor-helper.html#gga3ba09b564d11c6625e68723113aae4b4a2c504ada3e5bd7e9b1d2dbee64b5b40a">EA_TENSOR_COLOR_MODE_YUV_NV12</a></div><div class="ttdeci">@ EA_TENSOR_COLOR_MODE_YUV_NV12</div><div class="ttdef"><b>Definition:</b> ea_tensor.h:104</div></div>
<div class="ttc" id="agroup__eazyai-log-helper_html_ga950cfae72357fe74ae5a56666c95295a"><div class="ttname"><a href="../../d4/d96/group__eazyai-log-helper.html#ga950cfae72357fe74ae5a56666c95295a">EA_MEASURE_TIME_DECLARE</a></div><div class="ttdeci">#define EA_MEASURE_TIME_DECLARE()</div><div class="ttdef"><b>Definition:</b> ea_log.h:220</div></div>
<div class="ttc" id="agroup__eazyai-queue-details_html_ga40d5819ead3d1acac789f010f65c4dd6"><div class="ttname"><a href="../../df/d49/group__eazyai-queue-details.html#ga40d5819ead3d1acac789f010f65c4dd6">ea_queue_peek</a></div><div class="ttdeci">AMBA_API void * ea_queue_peek(ea_queue_t *queue)</div></div>
<div class="ttc" id="agroup__eazyai-display-helper_html_gga6dd902e4319e44983fc40c9302d861c5a183a9f81ecfc42fbffb966db15fab538"><div class="ttname"><a href="../../d1/d5c/group__eazyai-display-helper.html#gga6dd902e4319e44983fc40c9302d861c5a183a9f81ecfc42fbffb966db15fab538">EA_DISPLAY_STREAM_SERVER</a></div><div class="ttdeci">@ EA_DISPLAY_STREAM_SERVER</div><div class="ttdef"><b>Definition:</b> ea_display.h:59</div></div>
<div class="ttc" id="agroup__eazyai-img-resource-helper_html_gga869eb0ce6a6d02cdc89a81980b1b5538ad7c9ace25a3926fbae64690aa09240fa"><div class="ttname"><a href="../../df/d83/group__eazyai-img-resource-helper.html#gga869eb0ce6a6d02cdc89a81980b1b5538ad7c9ace25a3926fbae64690aa09240fa">EA_RAW_FILE</a></div><div class="ttdeci">@ EA_RAW_FILE</div><div class="ttdef"><b>Definition:</b> ea_img_resource.h:61</div></div>
<div class="ttc" id="agroup__eazyai-utils-details_html_ga11b8fe7e7036d5a403f1d9bc65fb1774"><div class="ttname"><a href="../../db/d66/group__eazyai-utils-details.html#ga11b8fe7e7036d5a403f1d9bc65fb1774">ea_calc_fps</a></div><div class="ttdeci">AMBA_API float ea_calc_fps(ea_calc_fps_ctx_t *ea_calc_fps_ctx)</div></div>
<div class="ttc" id="agroup__eazyai-env-helper_html_gga6bfb42a512c69e1c2d8e316fba06f94aa00ecf31ea9702567f4323bbb06c0d36b"><div class="ttname"><a href="../../d5/d6a/group__eazyai-env-helper.html#gga6bfb42a512c69e1c2d8e316fba06f94aa00ecf31ea9702567f4323bbb06c0d36b">EA_ENV_ENABLE_OSD_STREAM</a></div><div class="ttdeci">@ EA_ENV_ENABLE_OSD_STREAM</div><div class="ttdef"><b>Definition:</b> ea_env.h:57</div></div>
<div class="ttc" id="agroup__eazyai-env-helper_html_gga6bfb42a512c69e1c2d8e316fba06f94aadcaae67ae37eb4dfcce8062bffb3e35f"><div class="ttname"><a href="../../d5/d6a/group__eazyai-env-helper.html#gga6bfb42a512c69e1c2d8e316fba06f94aadcaae67ae37eb4dfcce8062bffb3e35f">EA_ENV_ENABLE_VPROC</a></div><div class="ttdeci">@ EA_ENV_ENABLE_VPROC</div><div class="ttdef"><b>Definition:</b> ea_env.h:54</div></div>
<div class="ttc" id="agroup__eazyai-tensor-helper_html_gga3ba09b564d11c6625e68723113aae4b4ac059f5fa5e339debad4cfec9d9c69903"><div class="ttname"><a href="../../d9/d79/group__eazyai-tensor-helper.html#gga3ba09b564d11c6625e68723113aae4b4ac059f5fa5e339debad4cfec9d9c69903">EA_TENSOR_COLOR_MODE_BGR</a></div><div class="ttdeci">@ EA_TENSOR_COLOR_MODE_BGR</div><div class="ttdef"><b>Definition:</b> ea_tensor.h:106</div></div>
<div class="ttc" id="aeazyai_8h_html"><div class="ttname"><a href="../../dd/dbe/eazyai_8h.html">eazyai.h</a></div><div class="ttdoc">The public interfaces of EazyAI framwork.</div></div>
<div class="ttc" id="agroup__eazyai-osd-details_html_ga82a84f838f5512cfcc0bc915f1d7ad26"><div class="ttname"><a href="../../da/dc6/group__eazyai-osd-details.html#ga82a84f838f5512cfcc0bc915f1d7ad26">ea_osd_new</a></div><div class="ttdeci">AMBA_API ea_osd_t * ea_osd_new(ea_osd_type_t type, int id, const void *params)</div></div>
<div class="ttc" id="agroup__eazyai-net-details_html_ga59a08912bda9753fba38f19d81f8d574"><div class="ttname"><a href="../../d9/d87/group__eazyai-net-details.html#ga59a08912bda9753fba38f19d81f8d574">ea_net_load</a></div><div class="ttdeci">AMBA_API int ea_net_load(ea_net_t *net, ea_net_load_type_t load_type, void *from, int max_batch)</div></div>
<div class="ttc" id="agroup__eazyai-img-resource-details_html_ga5d110e8094f21624809e17a6044970dc"><div class="ttname"><a href="../../d9/d59/group__eazyai-img-resource-details.html#ga5d110e8094f21624809e17a6044970dc">ea_img_resource_new</a></div><div class="ttdeci">AMBA_API ea_img_resource_t * ea_img_resource_new(ea_img_resource_type_t type, void *from)</div></div>
<div class="ttc" id="agroup__eazyai-utils-details_html_ga6773a669f94b50d055030d8a601b2c60"><div class="ttname"><a href="../../db/d66/group__eazyai-utils-details.html#ga6773a669f94b50d055030d8a601b2c60">ea_soft_nms</a></div><div class="ttdeci">AMBA_API int ea_soft_nms(float *x1y1x2y2score, void *aux, size_t aux_element_size, int num, float iou_threshold, int use_iou_min, int top_k, ea_soft_nms_method_t method, float discard_threshold, float sigma, float *out_x1y1x2y2score, void *out_aux, int *out_num)</div></div>
<div class="ttc" id="agroup__eazyai-env-details_html_ga8018036e672c4e0668d1f7391a44bba8"><div class="ttname"><a href="../../dd/df6/group__eazyai-env-details.html#ga8018036e672c4e0668d1f7391a44bba8">ea_env_close</a></div><div class="ttdeci">AMBA_API void ea_env_close()</div></div>
<div class="ttc" id="agroup__eazyai-log-helper_html_gac2958cac7dd6dde4da6483e260d982c0"><div class="ttname"><a href="../../d4/d96/group__eazyai-log-helper.html#gac2958cac7dd6dde4da6483e260d982c0">EA_LOG_ASSERT</a></div><div class="ttdeci">#define EA_LOG_ASSERT(expr)</div><div class="ttdef"><b>Definition:</b> ea_log.h:159</div></div>
<div class="ttc" id="agroup__eazyai-net-details_html_ga8110e8c888c6a6acc0fdbe553b440de7"><div class="ttname"><a href="../../d9/d87/group__eazyai-net-details.html#ga8110e8c888c6a6acc0fdbe553b440de7">ea_net_output</a></div><div class="ttdeci">AMBA_API ea_tensor_t * ea_net_output(ea_net_t *net, const char *port_name)</div></div>
<div class="ttc" id="agroup__eazyai-queue-details_html_ga35da78d2d4574c0c224c11b8ce33ad4e"><div class="ttname"><a href="../../df/d49/group__eazyai-queue-details.html#ga35da78d2d4574c0c224c11b8ce33ad4e">ea_queue_request_carrier_timeout</a></div><div class="ttdeci">AMBA_API void * ea_queue_request_carrier_timeout(ea_queue_t *queue, long us)</div></div>
<div class="ttc" id="agroup__eazyai-img-resource-details_html_ga986d6685a477134cab7f0df4d4f47b20"><div class="ttname"><a href="../../d9/d59/group__eazyai-img-resource-details.html#ga986d6685a477134cab7f0df4d4f47b20">ea_img_resource_free</a></div><div class="ttdeci">AMBA_API void ea_img_resource_free(ea_img_resource_t *img_resource)</div></div>
<div class="ttc" id="agroup__eazyai-preprocess-details_html_ga82e38bf6b45b39114c964a3f13a7f150"><div class="ttname"><a href="../../d1/d67/group__eazyai-preprocess-details.html#ga82e38bf6b45b39114c964a3f13a7f150">ea_crop_resize</a></div><div class="ttdeci">AMBA_API int ea_crop_resize(ea_tensor_t **src, int src_num, ea_tensor_t **dst, int dst_num, ea_roi_t *roi_group, ea_tensor_color_mode_t color_mode, ea_device_t device)</div></div>
<div class="ttc" id="agroup__eazyai-net-helper_html_gaf7b37b09e0acd75f30eae4956cacb4b2"><div class="ttname"><a href="../../de/d43/group__eazyai-net-helper.html#gaf7b37b09e0acd75f30eae4956cacb4b2">ea_net_t</a></div><div class="ttdeci">struct ea_net_s ea_net_t</div><div class="ttdef"><b>Definition:</b> ea_net.h:58</div></div>
<div class="ttc" id="agroup__eazyai-queue-details_html_ga68d32524c697b5eaa3ca25d04ce279c2"><div class="ttname"><a href="../../df/d49/group__eazyai-queue-details.html#ga68d32524c697b5eaa3ca25d04ce279c2">ea_queue_peek_carrier</a></div><div class="ttdeci">AMBA_API void * ea_queue_peek_carrier(ea_queue_t *queue)</div></div>
<div class="ttc" id="agroup__eazyai-preprocess-helper_html_ggacf838ff025e07d2405d18f4d80494eb7adec3c4aa38f4ff47ebd830a9f29b1d7c"><div class="ttname"><a href="../../d2/da6/group__eazyai-preprocess-helper.html#ggacf838ff025e07d2405d18f4d80494eb7adec3c4aa38f4ff47ebd830a9f29b1d7c">EA_COLOR_BGR2RGB</a></div><div class="ttdeci">@ EA_COLOR_BGR2RGB</div><div class="ttdef"><b>Definition:</b> ea_preprocess.h:53</div></div>
<div class="ttc" id="agroup__eazyai-osd-details_html_ga0e6939336aea047b9ac94052083a4046"><div class="ttname"><a href="../../da/dc6/group__eazyai-osd-details.html#ga0e6939336aea047b9ac94052083a4046">ea_osd_area_set_color_table_rgba</a></div><div class="ttdeci">AMBA_API int ea_osd_area_set_color_table_rgba(ea_osd_t *osd, int local_area_id, const ea_osd_color_rgba_t *color_table, int color_num)</div></div>
<div class="ttc" id="agroup__eazyai-log-helper_html_ga46c9c6107717fa7b5ad1965d6e40a35e"><div class="ttname"><a href="../../d4/d96/group__eazyai-log-helper.html#ga46c9c6107717fa7b5ad1965d6e40a35e">EA_LOG_SET_GLOBAL</a></div><div class="ttdeci">#define EA_LOG_SET_GLOBAL(level)</div><div class="ttdef"><b>Definition:</b> ea_log.h:84</div></div>
<div class="ttc" id="agroup__eazyai-log-helper_html_gabf4ab7c2d5fe62deac5689fad8a8296e"><div class="ttname"><a href="../../d4/d96/group__eazyai-log-helper.html#gabf4ab7c2d5fe62deac5689fad8a8296e">EA_LOG_DECLARE_LOCAL</a></div><div class="ttdeci">#define EA_LOG_DECLARE_LOCAL(level)</div><div class="ttdef"><b>Definition:</b> ea_log.h:69</div></div>
<div class="ttc" id="agroup__eazyai-tensor-details_html_ga4dd5b497857e359afee9c3279d468730"><div class="ttname"><a href="../../da/db2/group__eazyai-tensor-details.html#ga4dd5b497857e359afee9c3279d468730">ea_tensor_new_from_file</a></div><div class="ttdeci">AMBA_API ea_tensor_t * ea_tensor_new_from_file(ea_data_type_t dtype, const size_t *shape, const char *path)</div></div>
<div class="ttc" id="agroup__eazyai-tensor-details_html_gae0d0718e5c2a88ea85072c1de627266e"><div class="ttname"><a href="../../da/db2/group__eazyai-tensor-details.html#gae0d0718e5c2a88ea85072c1de627266e">ea_tensor_new_from_iav_anon_mem</a></div><div class="ttdeci">AMBA_API ea_tensor_t * ea_tensor_new_from_iav_anon_mem(const size_t *shape)</div></div>
<div class="ttc" id="agroup__eazyai-tensor-helper_html_ga2df9d3f13428a2486155ee1f330c1ed4"><div class="ttname"><a href="../../d9/d79/group__eazyai-tensor-helper.html#ga2df9d3f13428a2486155ee1f330c1ed4">ea_tensor_t</a></div><div class="ttdeci">struct ea_tensor_s ea_tensor_t</div><div class="ttdef"><b>Definition:</b> ea_tensor.h:141</div></div>
<div class="ttc" id="agroup__eazyai-osd-details_html_gabf7978c4fd33642a2ec81c8e632ef3d0"><div class="ttname"><a href="../../da/dc6/group__eazyai-osd-details.html#gabf7978c4fd33642a2ec81c8e632ef3d0">ea_osd_area_set_color_table_yuva</a></div><div class="ttdeci">AMBA_API int ea_osd_area_set_color_table_yuva(ea_osd_t *osd, int local_area_id, const ea_osd_color_yuva_t *color_table, int color_num)</div></div>
<div class="ttc" id="agroup__eazyai-preprocess-helper_html_ggacf838ff025e07d2405d18f4d80494eb7a69f74586433b54a930607a3ffef92dde"><div class="ttname"><a href="../../d2/da6/group__eazyai-preprocess-helper.html#ggacf838ff025e07d2405d18f4d80494eb7a69f74586433b54a930607a3ffef92dde">EA_COLOR_RGB2BGR</a></div><div class="ttdeci">@ EA_COLOR_RGB2BGR</div><div class="ttdef"><b>Definition:</b> ea_preprocess.h:52</div></div>
<div class="ttc" id="agroup__eazyai-display-helper_html_ga6a3a6e2e3f892e912b296b52a2cf0d37"><div class="ttname"><a href="../../d1/d5c/group__eazyai-display-helper.html#ga6a3a6e2e3f892e912b296b52a2cf0d37">ea_display_t</a></div><div class="ttdeci">struct ea_display_s ea_display_t</div><div class="ttdef"><b>Definition:</b> ea_display.h:195</div></div>
<div class="ttc" id="agroup__eazyai-log-helper_html_gac09b089a2810e3f290277603c1ffe0e7"><div class="ttname"><a href="../../d4/d96/group__eazyai-log-helper.html#gac09b089a2810e3f290277603c1ffe0e7">RVAL_BREAK</a></div><div class="ttdeci">#define RVAL_BREAK</div><div class="ttdef"><b>Definition:</b> ea_log.h:216</div></div>
<div class="ttc" id="agroup__eazyai-log-helper_html_ga14964c495beb6c2c9af8a952edd3a615"><div class="ttname"><a href="../../d4/d96/group__eazyai-log-helper.html#ga14964c495beb6c2c9af8a952edd3a615">EA_LOG_GET_GLOBAL</a></div><div class="ttdeci">#define EA_LOG_GET_GLOBAL()</div><div class="ttdef"><b>Definition:</b> ea_log.h:90</div></div>
<div class="ttc" id="agroup__eazyai-preprocess-helper_html_ggacf838ff025e07d2405d18f4d80494eb7a9587d53a90140ea1bba203e4b76c1f61"><div class="ttname"><a href="../../d2/da6/group__eazyai-preprocess-helper.html#ggacf838ff025e07d2405d18f4d80494eb7a9587d53a90140ea1bba203e4b76c1f61">EA_COLOR_YUV2BGR_NV12</a></div><div class="ttdeci">@ EA_COLOR_YUV2BGR_NV12</div><div class="ttdef"><b>Definition:</b> ea_preprocess.h:51</div></div>
<div class="ttc" id="agroup__eazyai-env-details_html_ga7199b3b2090a7bec0ed9186f0dbede98"><div class="ttname"><a href="../../dd/df6/group__eazyai-env-details.html#ga7199b3b2090a7bec0ed9186f0dbede98">ea_env_open</a></div><div class="ttdeci">AMBA_API int ea_env_open(int features)</div></div>
<div class="ttc" id="agroup__eazyai-osd-details_html_gadc6e372f53d7d766fea249d395d354ef"><div class="ttname"><a href="../../da/dc6/group__eazyai-osd-details.html#gadc6e372f53d7d766fea249d395d354ef">ea_osd_area_current_buffer</a></div><div class="ttdeci">const AMBA_API ea_osd_area_buffer_t * ea_osd_area_current_buffer(ea_osd_t *osd, int local_area_id, const ea_osd_roi_t *dynamic_roi)</div></div>
<div class="ttc" id="agroup__eazyai-tensor-helper_html_gga3ba09b564d11c6625e68723113aae4b4ae790cff8c2691ad3e7dde66e5b457c23"><div class="ttname"><a href="../../d9/d79/group__eazyai-tensor-helper.html#gga3ba09b564d11c6625e68723113aae4b4ae790cff8c2691ad3e7dde66e5b457c23">EA_TENSOR_COLOR_MODE_RGB</a></div><div class="ttdeci">@ EA_TENSOR_COLOR_MODE_RGB</div><div class="ttdef"><b>Definition:</b> ea_tensor.h:105</div></div>
<div class="ttc" id="agroup__eazyai-log-helper_html_gga35915c50caa86eeec9606ef087bec6b5a11be6a6ac457a87220a879b8c4050ce6"><div class="ttname"><a href="../../d4/d96/group__eazyai-log-helper.html#gga35915c50caa86eeec9606ef087bec6b5a11be6a6ac457a87220a879b8c4050ce6">EA_LOG_LEVEL_NOTICE</a></div><div class="ttdeci">@ EA_LOG_LEVEL_NOTICE</div><div class="ttdef"><b>Definition:</b> ea_log.h:62</div></div>
<div class="ttc" id="agroup__eazyai-queue-details_html_ga08322c65825b5f4a9fd34d926cae8410"><div class="ttname"><a href="../../df/d49/group__eazyai-queue-details.html#ga08322c65825b5f4a9fd34d926cae8410">ea_queue_de</a></div><div class="ttdeci">AMBA_API void * ea_queue_de(ea_queue_t *queue)</div></div>
<div class="ttc" id="agroup__eazyai-queue-details_html_gab14a695eb3ef3dc62ea3fb671d03d171"><div class="ttname"><a href="../../df/d49/group__eazyai-queue-details.html#gab14a695eb3ef3dc62ea3fb671d03d171">ea_queue_request_carrier_force</a></div><div class="ttdeci">AMBA_API void * ea_queue_request_carrier_force(ea_queue_t *queue, void **forced_out)</div></div>
<div class="ttc" id="agroup__eazyai-log-helper_html_gabfe3786470deb087a8c51c3516fa0a3e"><div class="ttname"><a href="../../d4/d96/group__eazyai-log-helper.html#gabfe3786470deb087a8c51c3516fa0a3e">RVAL_OK</a></div><div class="ttdeci">#define RVAL_OK</div><div class="ttdef"><b>Definition:</b> ea_log.h:214</div></div>
<div class="ttc" id="agroup__eazyai-display-helper_html_gga6dd902e4319e44983fc40c9302d861c5a120eb3f9b02994096dfb66f2cc4489e6"><div class="ttname"><a href="../../d1/d5c/group__eazyai-display-helper.html#gga6dd902e4319e44983fc40c9302d861c5a120eb3f9b02994096dfb66f2cc4489e6">EA_DISPLAY_VOUT</a></div><div class="ttdeci">@ EA_DISPLAY_VOUT</div><div class="ttdef"><b>Definition:</b> ea_display.h:61</div></div>
<div class="ttc" id="agroup__eazyai-display-helper_html_gga29303fa2fb5d6355bc35b0f3c684d32fa1bb66c3cdbe77f369639e1b5fa9a4939"><div class="ttname"><a href="../../d1/d5c/group__eazyai-display-helper.html#gga29303fa2fb5d6355bc35b0f3c684d32fa1bb66c3cdbe77f369639e1b5fa9a4939">EA_DISPLAY_ANALOG_VOUT</a></div><div class="ttdeci">@ EA_DISPLAY_ANALOG_VOUT</div><div class="ttdef"><b>Definition:</b> ea_display.h:71</div></div>
<div class="ttc" id="agroup__eazyai-img-resource-helper_html_gga869eb0ce6a6d02cdc89a81980b1b5538ad93386b1d035f6512933bd551833462f"><div class="ttname"><a href="../../df/d83/group__eazyai-img-resource-helper.html#gga869eb0ce6a6d02cdc89a81980b1b5538ad93386b1d035f6512933bd551833462f">EA_RAW_FILE_FOLDER</a></div><div class="ttdeci">@ EA_RAW_FILE_FOLDER</div><div class="ttdef"><b>Definition:</b> ea_img_resource.h:62</div></div>
<div class="ttc" id="agroup__eazyai-tensor-details_html_gabb70502d92d6eddb96124b51c695c26f"><div class="ttname"><a href="../../da/db2/group__eazyai-tensor-details.html#gabb70502d92d6eddb96124b51c695c26f">ea_tensor_data</a></div><div class="ttdeci">AMBA_API void * ea_tensor_data(ea_tensor_t *tensor)</div></div>
<div class="ttc" id="agroup__eazyai-preprocess-helper_html_ggacf838ff025e07d2405d18f4d80494eb7a6e505ff310dfdc04463b8c03a9ee1429"><div class="ttname"><a href="../../d2/da6/group__eazyai-preprocess-helper.html#ggacf838ff025e07d2405d18f4d80494eb7a6e505ff310dfdc04463b8c03a9ee1429">EA_COLOR_YUV2RGB_NV12</a></div><div class="ttdeci">@ EA_COLOR_YUV2RGB_NV12</div><div class="ttdef"><b>Definition:</b> ea_preprocess.h:50</div></div>
<div class="ttc" id="agroup__eazyai-display-helper_html_gga6dd902e4319e44983fc40c9302d861c5a2a99b87ce0093dd1763db95a12e4c731"><div class="ttname"><a href="../../d1/d5c/group__eazyai-display-helper.html#gga6dd902e4319e44983fc40c9302d861c5a2a99b87ce0093dd1763db95a12e4c731">EA_DISPLAY_STREAM_CLIENT</a></div><div class="ttdeci">@ EA_DISPLAY_STREAM_CLIENT</div><div class="ttdef"><b>Definition:</b> ea_display.h:60</div></div>
<div class="ttc" id="agroup__eazyai-display-helper_html_gga6dd902e4319e44983fc40c9302d861c5a52139433ee975cb1bef7d9b68e248e1a"><div class="ttname"><a href="../../d1/d5c/group__eazyai-display-helper.html#gga6dd902e4319e44983fc40c9302d861c5a52139433ee975cb1bef7d9b68e248e1a">EA_DISPLAY_STREAM</a></div><div class="ttdeci">@ EA_DISPLAY_STREAM</div><div class="ttdef"><b>Definition:</b> ea_display.h:58</div></div>
<div class="ttc" id="agroup__eazyai-img-resource-helper_html_gga869eb0ce6a6d02cdc89a81980b1b5538a88382b9bca694ea58b0e342c6d938d77"><div class="ttname"><a href="../../df/d83/group__eazyai-img-resource-helper.html#gga869eb0ce6a6d02cdc89a81980b1b5538a88382b9bca694ea58b0e342c6d938d77">EA_JPEG_FOLDER</a></div><div class="ttdeci">@ EA_JPEG_FOLDER</div><div class="ttdef"><b>Definition:</b> ea_img_resource.h:64</div></div>
<div class="ttc" id="agroup__eazyai-env-helper_html_gga6bfb42a512c69e1c2d8e316fba06f94aa3286920e729de702b99293cff9d63581"><div class="ttname"><a href="../../d5/d6a/group__eazyai-env-helper.html#gga6bfb42a512c69e1c2d8e316fba06f94aa3286920e729de702b99293cff9d63581">EA_ENV_ENABLE_NNCTRL</a></div><div class="ttdeci">@ EA_ENV_ENABLE_NNCTRL</div><div class="ttdef"><b>Definition:</b> ea_env.h:55</div></div>
<div class="ttc" id="agroup__eazyai-net-helper_html_gga101ce817045a507d2f99f05e6a410cb1a042d99460389b45492f889b4c4931c06"><div class="ttname"><a href="../../de/d43/group__eazyai-net-helper.html#gga101ce817045a507d2f99f05e6a410cb1a042d99460389b45492f889b4c4931c06">EA_NET_LOAD_FILE</a></div><div class="ttdeci">@ EA_NET_LOAD_FILE</div><div class="ttdef"><b>Definition:</b> ea_net.h:50</div></div>
<div class="ttc" id="agroup__eazyai-tensor-helper_html_gga2e3f04280863e7c873d05a7eb73a8a55a977de0245606a753c5511cff19c6287e"><div class="ttname"><a href="../../d9/d79/group__eazyai-tensor-helper.html#gga2e3f04280863e7c873d05a7eb73a8a55a977de0245606a753c5511cff19c6287e">EA_CPU</a></div><div class="ttdeci">@ EA_CPU</div><div class="ttdef"><b>Definition:</b> ea_tensor.h:60</div></div>
<div class="ttc" id="agroup__eazyai-net-details_html_ga00c836da74a34494e7c859ed60d9875f"><div class="ttname"><a href="../../d9/d87/group__eazyai-net-details.html#ga00c836da74a34494e7c859ed60d9875f">ea_net_forward</a></div><div class="ttdeci">AMBA_API int ea_net_forward(ea_net_t *net, uint32_t batch)</div></div>
<div class="ttc" id="agroup__eazyai-img-resource-details_html_ga0f1539e9f7582c2b165dd066e17a4084"><div class="ttname"><a href="../../d9/d59/group__eazyai-img-resource-details.html#ga0f1539e9f7582c2b165dd066e17a4084">ea_img_resource_hold_data</a></div><div class="ttdeci">AMBA_API int ea_img_resource_hold_data(ea_img_resource_t *img_resource, ea_img_resource_data_t *data)</div></div>
<div class="ttc" id="agroup__eazyai-log-helper_html_gadff5cc953d26853718e397ac1be6ef8e"><div class="ttname"><a href="../../d4/d96/group__eazyai-log-helper.html#gadff5cc953d26853718e397ac1be6ef8e">EA_LOG_NOTICE</a></div><div class="ttdeci">#define EA_LOG_NOTICE(format, args...)</div><div class="ttdef"><b>Definition:</b> ea_log.h:153</div></div>
<div class="ttc" id="agroup__eazyai-env-helper_html_gga6bfb42a512c69e1c2d8e316fba06f94aa19bed7f27d6c177249f7f1dc3b9e6b7e"><div class="ttname"><a href="../../d5/d6a/group__eazyai-env-helper.html#gga6bfb42a512c69e1c2d8e316fba06f94aa19bed7f27d6c177249f7f1dc3b9e6b7e">EA_ENV_ENABLE_CAVALRY</a></div><div class="ttdeci">@ EA_ENV_ENABLE_CAVALRY</div><div class="ttdef"><b>Definition:</b> ea_env.h:53</div></div>
<div class="ttc" id="agroup__eazyai-osd-helper_html_gae32098a9e8e9f7cb550a746e21271363"><div class="ttname"><a href="../../d4/d73/group__eazyai-osd-helper.html#gae32098a9e8e9f7cb550a746e21271363">ea_osd_t</a></div><div class="ttdeci">struct ea_osd_s ea_osd_t</div><div class="ttdef"><b>Definition:</b> ea_osd.h:113</div></div>
<div class="ttc" id="agroup__eazyai-display-details_html_gad7f1f719224c7e03a0ed9ba69d0650de"><div class="ttname"><a href="../../d2/dd8/group__eazyai-display-details.html#gad7f1f719224c7e03a0ed9ba69d0650de">ea_display_refresh</a></div><div class="ttdeci">AMBA_API int ea_display_refresh(ea_display_t *display, void *param)</div></div>
<div class="ttc" id="agroup__eazyai-queue-details_html_gaab6e39e26118da934865174b0a20aa71"><div class="ttname"><a href="../../df/d49/group__eazyai-queue-details.html#gaab6e39e26118da934865174b0a20aa71">ea_queue_de_nowait</a></div><div class="ttdeci">AMBA_API void * ea_queue_de_nowait(ea_queue_t *queue)</div></div>
<div class="ttc" id="agroup__eazyai-env-helper_html_gga6bfb42a512c69e1c2d8e316fba06f94aa4612f0c7ea29e1affc9fb7bf5444ba87"><div class="ttname"><a href="../../d5/d6a/group__eazyai-env-helper.html#gga6bfb42a512c69e1c2d8e316fba06f94aa4612f0c7ea29e1affc9fb7bf5444ba87">EA_ENV_ENABLE_IAV</a></div><div class="ttdeci">@ EA_ENV_ENABLE_IAV</div><div class="ttdef"><b>Definition:</b> ea_env.h:52</div></div>
<div class="ttc" id="agroup__eazyai-net-details_html_gaf0631da862b369b7ab6cdbefee343d5b"><div class="ttname"><a href="../../d9/d87/group__eazyai-net-details.html#gaf0631da862b369b7ab6cdbefee343d5b">ea_net_config_output</a></div><div class="ttdeci">AMBA_API int ea_net_config_output(ea_net_t *net, const char *port_name)</div></div>
<div class="ttc" id="agroup__eazyai-log-helper_html_ga53f7894cbcfdaf96177412ddee0de90d"><div class="ttname"><a href="../../d4/d96/group__eazyai-log-helper.html#ga53f7894cbcfdaf96177412ddee0de90d">EA_MEASURE_TIME_START</a></div><div class="ttdeci">#define EA_MEASURE_TIME_START()</div><div class="ttdef"><b>Definition:</b> ea_log.h:223</div></div>
<div class="ttc" id="agroup__eazyai-img-resource-details_html_ga02145c11afbfbf79731cb96d80a9395a"><div class="ttname"><a href="../../d9/d59/group__eazyai-img-resource-details.html#ga02145c11afbfbf79731cb96d80a9395a">ea_img_resource_drop_data</a></div><div class="ttdeci">AMBA_API int ea_img_resource_drop_data(ea_img_resource_t *img_resource, ea_img_resource_data_t *data)</div></div>
<div class="ttc" id="agroup__eazyai-img-resource-helper_html_gga869eb0ce6a6d02cdc89a81980b1b5538a2d73361d2497fca1edff280fadfaf2bc"><div class="ttname"><a href="../../df/d83/group__eazyai-img-resource-helper.html#gga869eb0ce6a6d02cdc89a81980b1b5538a2d73361d2497fca1edff280fadfaf2bc">EA_PYRAMID</a></div><div class="ttdeci">@ EA_PYRAMID</div><div class="ttdef"><b>Definition:</b> ea_img_resource.h:60</div></div>
<div class="ttc" id="agroup__eazyai-display-details_html_gad23209ebb70eb39abf454106a2367a8b"><div class="ttname"><a href="../../d2/dd8/group__eazyai-display-details.html#gad23209ebb70eb39abf454106a2367a8b">ea_display_new</a></div><div class="ttdeci">AMBA_API ea_display_t * ea_display_new(ea_display_type_t type, int id, int features, void *param)</div></div>
<div class="ttc" id="agroup__eazyai-utils-details_html_ga0a17a3b00407cd9dea9800279c4511e2"><div class="ttname"><a href="../../db/d66/group__eazyai-utils-details.html#ga0a17a3b00407cd9dea9800279c4511e2">ea_utils_env_callbacks_register</a></div><div class="ttdeci">AMBA_API int ea_utils_env_callbacks_register()</div></div>
<div class="ttc" id="agroup__eazyai-img-resource-helper_html_gga869eb0ce6a6d02cdc89a81980b1b5538aab94b9ef7be96257f86f10f43612e6d5"><div class="ttname"><a href="../../df/d83/group__eazyai-img-resource-helper.html#gga869eb0ce6a6d02cdc89a81980b1b5538aab94b9ef7be96257f86f10f43612e6d5">EA_CANVAS</a></div><div class="ttdeci">@ EA_CANVAS</div><div class="ttdef"><b>Definition:</b> ea_img_resource.h:58</div></div>
<div class="ttc" id="agroup__eazyai-net-details_html_gaea0c0ae54f20344fc21b9ee5fdd59df0"><div class="ttname"><a href="../../d9/d87/group__eazyai-net-details.html#gaea0c0ae54f20344fc21b9ee5fdd59df0">ea_net_config_input</a></div><div class="ttdeci">AMBA_API int ea_net_config_input(ea_net_t *net, const char *port_name)</div></div>
<div class="ttc" id="agroup__eazyai-display-helper_html_gga006e4c6e8e51bca579fde2eeef724dc9ae4cbf6b0535608d3e7418f3d941f069f"><div class="ttname"><a href="../../d1/d5c/group__eazyai-display-helper.html#gga006e4c6e8e51bca579fde2eeef724dc9ae4cbf6b0535608d3e7418f3d941f069f">EA_DISPLAY_GRAY_SCALE</a></div><div class="ttdeci">@ EA_DISPLAY_GRAY_SCALE</div><div class="ttdef"><b>Definition:</b> ea_display.h:82</div></div>
<div class="ttc" id="agroup__eazyai-queue-details_html_ga83d51429300a33051d5598e64b2e2f6d"><div class="ttname"><a href="../../df/d49/group__eazyai-queue-details.html#ga83d51429300a33051d5598e64b2e2f6d">ea_queue_add_carrier</a></div><div class="ttdeci">AMBA_API int ea_queue_add_carrier(ea_queue_t *queue, void *carrier)</div></div>
<div class="ttc" id="agroup__eazyai-queue-details_html_ga2c88442e578374371c29a757cbb221eb"><div class="ttname"><a href="../../df/d49/group__eazyai-queue-details.html#ga2c88442e578374371c29a757cbb221eb">ea_queue_free</a></div><div class="ttdeci">AMBA_API void ea_queue_free(ea_queue_t *queue)</div></div>
<div class="ttc" id="agroup__eazyai-display-details_html_ga4c54d8c74192837262efe0a75c4bdf7f"><div class="ttname"><a href="../../d2/dd8/group__eazyai-display-details.html#ga4c54d8c74192837262efe0a75c4bdf7f">ea_display_obj_params</a></div><div class="ttdeci">AMBA_API ea_display_obj_params_t * ea_display_obj_params(ea_display_t *display)</div></div>
<div class="ttc" id="agroup__eazyai-log-helper_html_ga4da64e8e9357c35fd8e1be1252a8bfe1"><div class="ttname"><a href="../../d4/d96/group__eazyai-log-helper.html#ga4da64e8e9357c35fd8e1be1252a8bfe1">EA_LOG_SET_LOCAL</a></div><div class="ttdeci">#define EA_LOG_SET_LOCAL(level)</div><div class="ttdef"><b>Definition:</b> ea_log.h:72</div></div>
<div class="ttc" id="agroup__eazyai-queue-details_html_gacaf373c72ce837358e510f018f283f6d"><div class="ttname"><a href="../../df/d49/group__eazyai-queue-details.html#gacaf373c72ce837358e510f018f283f6d">ea_queue_de_timeout</a></div><div class="ttdeci">AMBA_API void * ea_queue_de_timeout(ea_queue_t *queue, long us)</div></div>
<div class="ttc" id="agroup__eazyai-net-helper_html_gga101ce817045a507d2f99f05e6a410cb1a3440bcf5671d53b62401a13af5303faf"><div class="ttname"><a href="../../de/d43/group__eazyai-net-helper.html#gga101ce817045a507d2f99f05e6a410cb1a3440bcf5671d53b62401a13af5303faf">EA_NET_LOAD_DRAM</a></div><div class="ttdeci">@ EA_NET_LOAD_DRAM</div><div class="ttdef"><b>Definition:</b> ea_net.h:51</div></div>
<div class="ttc" id="agroup__eazyai-tensor-details_html_gaf483e043827cebdda5bbfab8264a58a8"><div class="ttname"><a href="../../da/db2/group__eazyai-tensor-details.html#gaf483e043827cebdda5bbfab8264a58a8">ea_tensor_free</a></div><div class="ttdeci">AMBA_API void ea_tensor_free(ea_tensor_t *tensor)</div></div>
<div class="ttc" id="agroup__eazyai-tensor-helper_html_ggae7f2cca4c1c06ac3685dbd6d93d8aaf2a134d76e333656b2d3a02e43b198df06a"><div class="ttname"><a href="../../d9/d79/group__eazyai-tensor-helper.html#ggae7f2cca4c1c06ac3685dbd6d93d8aaf2a134d76e333656b2d3a02e43b198df06a">EA_U8</a></div><div class="ttdeci">@ EA_U8</div><div class="ttdef"><b>Definition:</b> ea_tensor.h:89</div></div>
<div class="ttc" id="agroup__eazyai-osd-details_html_gaed36ac8fec9ec49de2737bce8e539187"><div class="ttname"><a href="../../da/dc6/group__eazyai-osd-details.html#gaed36ac8fec9ec49de2737bce8e539187">ea_osd_set_dsp_blur_box</a></div><div class="ttdeci">AMBA_API int ea_osd_set_dsp_blur_box(ea_osd_t *osd, int local_area_id, const ea_osd_roi_t *roi)</div></div>
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="../../doxygen.png" alt="doxygen"/></a> 1.8.17 </li>
  </ul>
</div>
</body>
</html>
