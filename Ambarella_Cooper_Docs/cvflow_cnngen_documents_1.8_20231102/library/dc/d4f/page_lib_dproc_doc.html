<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Library: Data Process Library API</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript" src="../../navtreedata.js"></script>
<script type="text/javascript" src="../../navtree.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/search.js"></script>
<link rel="search" href="../../search_opensearch.php?v=opensearch.xml" type="application/opensearchdescription+xml" title="Library"/>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="../../../library/mathjax/MathJax.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
<link href="../../doxygen-awesome.css" rel="stylesheet" type="text/css"/>
<link href="../../doxygen-awesome-sidebar-only.css" rel="stylesheet" type="text/css"/>
<link href="../../doxygen-ambarella.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="../../Ambarella.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Library
   </div>
   <div id="projectbrief">CVflow_1.8 @ 2023.11.02</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "../../search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('../../',true,true,'search.html','Search');
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
  $(document).ready(function() {
    if ($('.searchresults').length > 0) { searchBox.DOMSearchField().focus(); }
  });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('dc/d4f/page_lib_dproc_doc.html','../../'); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">Data Process Library API </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h1><a class="anchor" id="sec_dproc_history"></a>
0. Revision History</h1>
<a class="anchor" id="lib_drpoc_rev_history"></a>
<table class="doxtable">
<caption></caption>
<tr align="middle">
<th>Library Version </th><th>Updated Date </th><th>Modification </th></tr>
<tr align="middle">
<td rowspan="3">1.0.0 </td><td rowspan="3">20200217 </td></tr>
<tr>
<td align="left">• Initial draft </td></tr>
<tr>
<td align="left">• Update section <a class="el" href="../../dc/d4f/page_lib_dproc_doc.html#sec_dproc_test">3 Unit Test</a>, remove the application of Dproc API and use test_eazyai library replacement. </td></tr>
</table>
<hr  />
<h1><a class="anchor" id="sec_dproc_overview"></a>
1 Overview</h1>
<p>The data process (DProc) Library provides some simple APIs which are used to process the output generated by the VP processor as VP will not do lots of logical judgement. The section below explains how to use the DProc Library for SSD, YOLOV3, TINY_YOLOV3, and will add support for more networks.</p>
<p>For same networks, in most of the time, the methods to get the final result from the VP output are the same, so this library encapsulates the processing code for the same network into one API. Then, according to different networks, users can call the API of the corresponding network to get the final result. In this way, it can make code leaner, easier to use, and avoid errors.</p>
<p>At present, this library has encapsulated the APIs for processing the detected data of SSD, YOLOV3 and TINY_YOLOV3. In the future, more APIs will be added as needed.</p>
<dl class="section note"><dt>Note</dt><dd><ul>
<li>This library is not thread safe.</li>
<li>This library will not be maintained any more, please refer to <a class="el" href="../../d3/d0c/page_lib_eazyai_doc.html#eazyai_arm_postprocess">4 EazyAI Arm Postprocess</a> instead.</li>
</ul>
</dd></dl>
<hr  />
<h1><a class="anchor" id="sec_dproc_proc"></a>
2 Dproc Library Process</h1>
<h2><a class="anchor" id="dproc_proc_build"></a>
2.1 Build Dproc Library</h2>
<p>The source code for Dproc library can be found under the path <code>ambarella/packages/data_process</code>.</p>
<p>For the standard SDK, Dproc library is not compiled by default. If users need to use this library in code, they need to activate "Build Ambarella Data Process library" in "make menuconfig" to compile it.</p>
<div class="fragment"><div class="line">build $ make menuconfig</div>
<div class="line">  [*] Ambarella Package Configuration  ---&gt;</div>
<div class="line">   [*]   Build Ambarella Data Process library</div>
</div><!-- fragment --><p><b>Example</b></p>
<p>To use the Dproc library in application, users need to add "select BUILD_AMBARELLA_DPROC_PACKAGE" to the "AmbaConfig" of application. For example, the Dproc library is used in "test_ssd_live.c", users can see the following code in the "AmbaConfig" of "test_ssd_live.c".</p>
<div class="fragment"><div class="line">config BUILD_AMBARELLA_UNIT_TESTS_CV_SSD</div>
<div class="line">    <span class="keywordtype">bool</span> <span class="stringliteral">&quot;Build SSD unit tests&quot;</span></div>
<div class="line">    <span class="keywordflow">default</span> n</div>
<div class="line">    select BUILD_AMBARELLA_NNCTRL_PACKAGE</div>
<div class="line">    select BUILD_AMBARELLA_CAVALRY_MEM_PACKAGE</div>
<div class="line">    select BUILD_AMBARELLA_VPROC_PACKAGE</div>
<div class="line">    select BUILD_AMBARELLA_DPROC_PACKAGE    ### Compile Dproc library ###</div>
<div class="line">    select BUILD_AMBARELLA_SMARTFB_PACKAGE</div>
<div class="line">    select CONFIG_AMBARELLA_FREETYPE_SUPPORT</div>
<div class="line">    help</div>
<div class="line">        Build Ambarella Private SSD unit tests</div>
</div><!-- fragment --><p>If the above configuration is correct, after "make sync_build_mkcfg", users can see that "Build Ambarella Data Process library" has been activated automatically in "make menuconfig".</p>
<div class="fragment"><div class="line">[*] Ambarella Package Configuration  ---&gt;</div>
<div class="line">  -*-   Build Ambarella Data Process library</div>
</div><!-- fragment --><h2><a class="anchor" id="dproc_proc_proc"></a>
2.2 Dproc Library Usage Process</h2>
<p>The usage of Dproc library mainly includes the following three steps, but for different networks, the processing method of each step will be different, which will be described in detail later.</p>
<div class="image">
<img src="../../dproc_usage_process.jpg" alt=""/>
<div class="caption">
Usage Process</div></div>
<h3><a class="anchor" id="dproc_proc_proc_ssd"></a>
2.2.1 Process For SSD</h3>
<p>1.dproc_init() for SSD</p>
<p>The <a class="el" href="../../d3/dab/group__dproc-api.html#ga161e973d97a3b87f9b346322e69ac8ef">dproc_init()</a> process of SSD is as follows. </p><div class="image">
<img src="../../dproc_init_for_SSD.jpg" alt=""/>
<div class="caption">
Dproc Init For SSD</div></div>
<p>2.dproc_run() for SSD</p>
<p>The <a class="el" href="../../d3/dab/group__dproc-api.html#ga41c902f4bbb91a8ffb07e12deb3e24cd">dproc_run()</a> process of SSD is as follows. </p><div class="image">
<img src="../../dproc_run_for_SSD.jpg" alt=""/>
<div class="caption">
Dproc Run For SSD</div></div>
<p>3.dproc_deinit() for SSD</p>
<p>The <a class="el" href="../../d3/dab/group__dproc-api.html#gaa5ca50f6b95e527f2b5accb9c6506c18">dproc_deinit()</a> process of SSD is as follows. </p><div class="image">
<img src="../../dproc_deinit_for_SSD.jpg" alt=""/>
<div class="caption">
Dproc Deinit For SSD</div></div>
<h3><a class="anchor" id="dproc_proc_proc_yolov3"></a>
2.2.2 Process For YOLOV3(TINY_YOLOV3)</h3>
<p>1.dproc_init() for YOLOV3(TINY_YOLOV3)</p>
<p>The <a class="el" href="../../d3/dab/group__dproc-api.html#ga161e973d97a3b87f9b346322e69ac8ef">dproc_init()</a> process of YOLOV3(TINY_YOLOV3) is as follows. </p><div class="image">
<img src="../../dproc_init_for_YOLOV3.jpg" alt=""/>
<div class="caption">
Dproc Init For YOLOV3(TINY_YOLOV3)</div></div>
<p>2.dproc_run() for YOLOV3(TINY_YOLOV3)</p>
<p>The <a class="el" href="../../d3/dab/group__dproc-api.html#ga41c902f4bbb91a8ffb07e12deb3e24cd">dproc_run()</a> process of YOLOV3(TINY_YOLOV3) is as follows. </p><div class="image">
<img src="../../dproc_run_for_YOLOV3.jpg" alt=""/>
<div class="caption">
Dproc Run For YOLOV3(TINY_YOLOV3)</div></div>
<p>3.dproc_deinit() for YOLOV3(TINY_YOLOV3)</p>
<p>The <a class="el" href="../../d3/dab/group__dproc-api.html#gaa5ca50f6b95e527f2b5accb9c6506c18">dproc_deinit()</a> process of YOLOV3(TINY_YOLOV3) is as follows. </p><div class="image">
<img src="../../dproc_deinit_for_YOLOV3.jpg" alt=""/>
<div class="caption">
Dproc Deinit For YOLOV3(TINY_YOLOV3)</div></div>
<hr  />
<h1><a class="anchor" id="sec_dproc_test"></a>
3 Unit Test</h1>
<ol type="1">
<li>Call function <a class="el" href="../../d3/dab/group__dproc-api.html#ga161e973d97a3b87f9b346322e69ac8ef">dproc_init()</a> to initialize the library.</li>
<li>Call function <a class="el" href="../../d3/dab/group__dproc-api.html#ga41c902f4bbb91a8ffb07e12deb3e24cd">dproc_run()</a> to run data processing of SSD or YOLOV3(TINY_YOLOV3).</li>
<li>Call function <a class="el" href="../../d3/dab/group__dproc-api.html#gaa5ca50f6b95e527f2b5accb9c6506c18">dproc_deinit()</a> to release the library session.</li>
<li>Dproc API use method can refer to the code: <code>ambarella/packages/eazyai/apps/yolov3/</code> or <code>ambarella/packages/eazyai/apps/ssd/</code>.</li>
</ol>
<hr  />
<h1><a class="anchor" id="sec_dproc_api"></a>
4 Dproc API</h1>
<p>Please go to the following link to see details of the API function.</p><ul>
<li><a class="el" href="../../d3/dab/group__dproc-api.html">Data Process Library API Details</a> will explain API functions.</li>
<li><a class="el" href="../../df/d12/group__dproc-helper.html">Data Process Library API Helper</a> will show related structs, macros and enums.</li>
</ul>
<hr  />
<h1><a class="anchor" id="sec_dproc_lic"></a>
5 License</h1>
<p>Copyright (c) 2022 Ambarella International LP</p>
<p>This file and its contents ( "Software" ) are protected by intellectual property rights including, without limitation, U.S. and/or foreign copyrights. This Software is also the confidential and proprietary information of Ambarella International LP and its licensors. You may not use, reproduce, disclose, distribute, modify, or otherwise prepare derivative works of this Software or any portion thereof except pursuant to a signed license agreement or nondisclosure agreement with Ambarella International LP or its authorized affiliates. In the absence of such an agreement, you agree to promptly notify and return this Software to Ambarella International LP</p>
<p>THIS SOFTWARE IS PROVIDED "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF NON-INFRINGEMENT, MERCHANTABILITY, AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL AMBARELLA INTERNATIONAL LP OR ITS AFFILIATES BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; COMPUTER FAILURE OR MALFUNCTION; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE. </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="../../doxygen.png" alt="doxygen"/></a> 1.8.17 </li>
  </ul>
</div>
</body>
</html>
